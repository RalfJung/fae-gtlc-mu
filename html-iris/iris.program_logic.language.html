<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="../overview.html">Project Page</a>
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">iris.program_logic.language</h1>

<div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="var">iris.algebra</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <a class="idref" href="iris.algebra.ofe.html#"><span class="id" title="library">ofe</span></a>.<br/>
<span class="id" title="keyword">Set</span> <span class="id" title="var">Default</span> <span class="id" title="keyword">Proof</span> <span class="id" title="var">Using</span> "Type".<br/>

<br/>
<span class="id" title="keyword">Section</span> <a name="language_mixin"><span class="id" title="section">language_mixin</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<span class="id" title="var">expr</span> <span class="id" title="var">val</span> <span class="id" title="var">state</span> <span class="id" title="var">observation</span> : <span class="id" title="keyword">Type</span>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> (<span class="id" title="var">of_val</span> : <a class="idref" href="iris.program_logic.language.html#language_mixin.val"><span class="id" title="variable">val</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="iris.program_logic.language.html#language_mixin.expr"><span class="id" title="variable">expr</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> (<span class="id" title="var">to_val</span> : <a class="idref" href="iris.program_logic.language.html#language_mixin.expr"><span class="id" title="variable">expr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="iris.program_logic.language.html#language_mixin.val"><span class="id" title="variable">val</span></a>).<br/>
</div>

<div class="doc">
We annotate the reduction relation with observations <span class="inlinecode"><a class="idref" href="iris.heap_lang.lifting.html#29d7d9bf2d713ce949c9fed315ed8ffb"><span class="id" title="variable">κ</span></a></span>, which we will
     use in the definition of weakest preconditions to predict future
     observations and assert correctness of the predictions. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> (<span class="id" title="var">prim_step</span> : <a class="idref" href="iris.program_logic.language.html#language_mixin.expr"><span class="id" title="variable">expr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="iris.program_logic.language.html#language_mixin.state"><span class="id" title="variable">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="iris.program_logic.language.html#language_mixin.observation"><span class="id" title="variable">observation</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="iris.program_logic.language.html#language_mixin.expr"><span class="id" title="variable">expr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="iris.program_logic.language.html#language_mixin.state"><span class="id" title="variable">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="iris.program_logic.language.html#language_mixin.expr"><span class="id" title="variable">expr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Record</span> <a name="LanguageMixin"><span class="id" title="record">LanguageMixin</span></a> := {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="mixin_to_of_val"><span class="id" title="projection">mixin_to_of_val</span></a> <span class="id" title="var">v</span> : <a class="idref" href="iris.program_logic.language.html#language_mixin.to_val"><span class="id" title="variable">to_val</span></a> (<a class="idref" href="iris.program_logic.language.html#language_mixin.of_val"><span class="id" title="variable">of_val</span></a> <a class="idref" href="iris.program_logic.language.html#v"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="iris.program_logic.language.html#v"><span class="id" title="variable">v</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="mixin_of_to_val"><span class="id" title="projection">mixin_of_to_val</span></a> <span class="id" title="var">e</span> <span class="id" title="var">v</span> : <a class="idref" href="iris.program_logic.language.html#language_mixin.to_val"><span class="id" title="variable">to_val</span></a> <a class="idref" href="iris.program_logic.language.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="iris.program_logic.language.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="iris.program_logic.language.html#language_mixin.of_val"><span class="id" title="variable">of_val</span></a> <a class="idref" href="iris.program_logic.language.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="iris.program_logic.language.html#e"><span class="id" title="variable">e</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="mixin_val_stuck"><span class="id" title="projection">mixin_val_stuck</span></a> <span class="id" title="var">e</span> σ <span class="id" title="var">κ</span> <span class="id" title="var">e'</span> σ' <span class="id" title="var">efs</span> : <a class="idref" href="iris.program_logic.language.html#language_mixin.prim_step"><span class="id" title="variable">prim_step</span></a> <a class="idref" href="iris.program_logic.language.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="iris.program_logic.language.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a> <a class="idref" href="iris.program_logic.language.html#29d7d9bf2d713ce949c9fed315ed8ffb"><span class="id" title="variable">κ</span></a> <a class="idref" href="iris.program_logic.language.html#e'"><span class="id" title="variable">e'</span></a> <a class="idref" href="iris.program_logic.language.html#4394a2ef16b8915a5209b8b27258ea45"><span class="id" title="variable">σ'</span></a> <a class="idref" href="iris.program_logic.language.html#efs"><span class="id" title="variable">efs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="iris.program_logic.language.html#language_mixin.to_val"><span class="id" title="variable">to_val</span></a> <a class="idref" href="iris.program_logic.language.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;}.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="iris.program_logic.language.html#language_mixin"><span class="id" title="section">language_mixin</span></a>.<br/>

<br/>
<span class="id" title="keyword">Structure</span> <a name="language"><span class="id" title="record">language</span></a> := <a name="Language"><span class="id" title="constructor">Language</span></a> {<br/>
&nbsp;&nbsp;<a name="expr"><span class="id" title="projection">expr</span></a> : <span class="id" title="keyword">Type</span>;<br/>
&nbsp;&nbsp;<a name="val"><span class="id" title="projection">val</span></a> : <span class="id" title="keyword">Type</span>;<br/>
&nbsp;&nbsp;<a name="state"><span class="id" title="projection">state</span></a> : <span class="id" title="keyword">Type</span>;<br/>
&nbsp;&nbsp;<a name="observation"><span class="id" title="projection">observation</span></a> : <span class="id" title="keyword">Type</span>;<br/>
&nbsp;&nbsp;<a name="of_val"><span class="id" title="projection">of_val</span></a> : <a class="idref" href="iris.program_logic.language.html#val"><span class="id" title="method">val</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="iris.program_logic.language.html#expr"><span class="id" title="method">expr</span></a>;<br/>
&nbsp;&nbsp;<a name="to_val"><span class="id" title="projection">to_val</span></a> : <a class="idref" href="iris.program_logic.language.html#expr"><span class="id" title="method">expr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="iris.program_logic.language.html#val"><span class="id" title="method">val</span></a>;<br/>
&nbsp;&nbsp;<a name="prim_step"><span class="id" title="projection">prim_step</span></a> : <a class="idref" href="iris.program_logic.language.html#expr"><span class="id" title="method">expr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="iris.program_logic.language.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="iris.program_logic.language.html#observation"><span class="id" title="method">observation</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="iris.program_logic.language.html#expr"><span class="id" title="method">expr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="iris.program_logic.language.html#state"><span class="id" title="method">state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="iris.program_logic.language.html#expr"><span class="id" title="method">expr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>;<br/>
&nbsp;&nbsp;<a name="language_mixin"><span class="id" title="projection">language_mixin</span></a> : <a class="idref" href="iris.program_logic.language.html#LanguageMixin"><span class="id" title="record">LanguageMixin</span></a> <a class="idref" href="iris.program_logic.language.html#of_val"><span class="id" title="method">of_val</span></a> <a class="idref" href="iris.program_logic.language.html#to_val"><span class="id" title="method">to_val</span></a> <a class="idref" href="iris.program_logic.language.html#prim_step"><span class="id" title="method">prim_step</span></a><br/>
}.<br/>
<span class="id" title="keyword">Delimit</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">expr_scope</span> <span class="id" title="keyword">with</span> <span class="id" title="var">E</span>.<br/>
<span class="id" title="keyword">Delimit</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">val_scope</span> <span class="id" title="keyword">with</span> <span class="id" title="var">V</span>.<br/>
<span class="id" title="keyword">Bind</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">expr_scope</span> <span class="id" title="keyword">with</span> <span class="id" title="var">expr</span>.<br/>
<span class="id" title="keyword">Bind</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">val_scope</span> <span class="id" title="keyword">with</span> <span class="id" title="var">val</span>.<br/>

<br/>
<span class="id" title="var">Arguments</span> <a class="idref" href="iris.program_logic.language.html#Language"><span class="id" title="constructor">Language</span></a> {<span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>} <span class="id" title="var">_</span>.<br/>
<span class="id" title="var">Arguments</span> <a class="idref" href="iris.program_logic.language.html#of_val"><span class="id" title="projection">of_val</span></a> {<span class="id" title="var">_</span>} <span class="id" title="var">_</span>.<br/>
<span class="id" title="var">Arguments</span> <a class="idref" href="iris.program_logic.language.html#to_val"><span class="id" title="projection">to_val</span></a> {<span class="id" title="var">_</span>} <span class="id" title="var">_</span>.<br/>
<span class="id" title="var">Arguments</span> <a class="idref" href="iris.program_logic.language.html#prim_step"><span class="id" title="projection">prim_step</span></a> {<span class="id" title="var">_</span>} <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>.<br/>

<br/>
<span class="id" title="keyword">Canonical</span> <span class="id" title="keyword">Structure</span> <span class="id" title="var">stateO</span> <span class="id" title="var">Λ</span> := <a class="idref" href="iris.algebra.ofe.html#leibnizO"><span class="id" title="abbreviation">leibnizO</span></a> (<a class="idref" href="iris.program_logic.language.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="iris.program_logic.language.html#8f9ca9cb3d78ac33d75e576570aeb27a"><span class="id" title="variable">Λ</span></a>).<br/>
<span class="id" title="keyword">Canonical</span> <span class="id" title="keyword">Structure</span> <span class="id" title="var">valO</span> <span class="id" title="var">Λ</span> := <a class="idref" href="iris.algebra.ofe.html#leibnizO"><span class="id" title="abbreviation">leibnizO</span></a> (<a class="idref" href="iris.program_logic.language.html#val"><span class="id" title="projection">val</span></a> <a class="idref" href="iris.program_logic.language.html#8f9ca9cb3d78ac33d75e576570aeb27a"><span class="id" title="variable">Λ</span></a>).<br/>
<span class="id" title="keyword">Canonical</span> <span class="id" title="keyword">Structure</span> <span class="id" title="var">exprO</span> <span class="id" title="var">Λ</span> := <a class="idref" href="iris.algebra.ofe.html#leibnizO"><span class="id" title="abbreviation">leibnizO</span></a> (<a class="idref" href="iris.program_logic.language.html#expr"><span class="id" title="projection">expr</span></a> <a class="idref" href="iris.program_logic.language.html#8f9ca9cb3d78ac33d75e576570aeb27a"><span class="id" title="variable">Λ</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="cfg"><span class="id" title="definition">cfg</span></a> (<span class="id" title="var">Λ</span> : <a class="idref" href="iris.program_logic.language.html#language"><span class="id" title="record">language</span></a>) := (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="iris.program_logic.language.html#expr"><span class="id" title="projection">expr</span></a> <a class="idref" href="iris.program_logic.language.html#8f9ca9cb3d78ac33d75e576570aeb27a"><span class="id" title="variable">Λ</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="iris.program_logic.language.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="iris.program_logic.language.html#8f9ca9cb3d78ac33d75e576570aeb27a"><span class="id" title="variable">Λ</span></a>)%<span class="id" title="keyword">type</span>.<br/>

<br/>
<span class="id" title="keyword">Class</span> <a name="LanguageCtx"><span class="id" title="record">LanguageCtx</span></a> {<span class="id" title="var">Λ</span> : <a class="idref" href="iris.program_logic.language.html#language"><span class="id" title="record">language</span></a>} (<span class="id" title="var">K</span> : <a class="idref" href="iris.program_logic.language.html#expr"><span class="id" title="projection">expr</span></a> <a class="idref" href="iris.program_logic.language.html#8f9ca9cb3d78ac33d75e576570aeb27a"><span class="id" title="variable">Λ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="iris.program_logic.language.html#expr"><span class="id" title="projection">expr</span></a> <a class="idref" href="iris.program_logic.language.html#8f9ca9cb3d78ac33d75e576570aeb27a"><span class="id" title="variable">Λ</span></a>) := {<br/>
&nbsp;&nbsp;<a name="fill_not_val"><span class="id" title="projection">fill_not_val</span></a> <span class="id" title="var">e</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="iris.program_logic.language.html#to_val"><span class="id" title="projection">to_val</span></a> <a class="idref" href="iris.program_logic.language.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="iris.program_logic.language.html#to_val"><span class="id" title="projection">to_val</span></a> (<a class="idref" href="iris.program_logic.language.html#K"><span class="id" title="variable">K</span></a> <a class="idref" href="iris.program_logic.language.html#e"><span class="id" title="variable">e</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>;<br/>
&nbsp;&nbsp;<a name="fill_step"><span class="id" title="projection">fill_step</span></a> <span class="id" title="var">e1</span> σ1 <span class="id" title="var">κ</span> <span class="id" title="var">e2</span> σ2 <span class="id" title="var">efs</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="iris.program_logic.language.html#prim_step"><span class="id" title="projection">prim_step</span></a> <a class="idref" href="iris.program_logic.language.html#e1"><span class="id" title="variable">e1</span></a> <a class="idref" href="iris.program_logic.language.html#1cc6be414ab52727f77057b4b030dde0"><span class="id" title="variable">σ1</span></a> <a class="idref" href="iris.program_logic.language.html#29d7d9bf2d713ce949c9fed315ed8ffb"><span class="id" title="variable">κ</span></a> <a class="idref" href="iris.program_logic.language.html#e2"><span class="id" title="variable">e2</span></a> <a class="idref" href="iris.program_logic.language.html#a4d9266a5be6c0504292c8910a50c288"><span class="id" title="variable">σ2</span></a> <a class="idref" href="iris.program_logic.language.html#efs"><span class="id" title="variable">efs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="iris.program_logic.language.html#prim_step"><span class="id" title="projection">prim_step</span></a> (<a class="idref" href="iris.program_logic.language.html#K"><span class="id" title="variable">K</span></a> <a class="idref" href="iris.program_logic.language.html#e1"><span class="id" title="variable">e1</span></a>) <a class="idref" href="iris.program_logic.language.html#1cc6be414ab52727f77057b4b030dde0"><span class="id" title="variable">σ1</span></a> <a class="idref" href="iris.program_logic.language.html#29d7d9bf2d713ce949c9fed315ed8ffb"><span class="id" title="variable">κ</span></a> (<a class="idref" href="iris.program_logic.language.html#K"><span class="id" title="variable">K</span></a> <a class="idref" href="iris.program_logic.language.html#e2"><span class="id" title="variable">e2</span></a>) <a class="idref" href="iris.program_logic.language.html#a4d9266a5be6c0504292c8910a50c288"><span class="id" title="variable">σ2</span></a> <a class="idref" href="iris.program_logic.language.html#efs"><span class="id" title="variable">efs</span></a>;<br/>
&nbsp;&nbsp;<a name="fill_step_inv"><span class="id" title="projection">fill_step_inv</span></a> <span class="id" title="var">e1'</span> σ1 <span class="id" title="var">κ</span> <span class="id" title="var">e2</span> σ2 <span class="id" title="var">efs</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="iris.program_logic.language.html#to_val"><span class="id" title="projection">to_val</span></a> <a class="idref" href="iris.program_logic.language.html#e1'"><span class="id" title="variable">e1'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="iris.program_logic.language.html#prim_step"><span class="id" title="projection">prim_step</span></a> (<a class="idref" href="iris.program_logic.language.html#K"><span class="id" title="variable">K</span></a> <a class="idref" href="iris.program_logic.language.html#e1'"><span class="id" title="variable">e1'</span></a>) <a class="idref" href="iris.program_logic.language.html#1cc6be414ab52727f77057b4b030dde0"><span class="id" title="variable">σ1</span></a> <a class="idref" href="iris.program_logic.language.html#29d7d9bf2d713ce949c9fed315ed8ffb"><span class="id" title="variable">κ</span></a> <a class="idref" href="iris.program_logic.language.html#e2"><span class="id" title="variable">e2</span></a> <a class="idref" href="iris.program_logic.language.html#a4d9266a5be6c0504292c8910a50c288"><span class="id" title="variable">σ2</span></a> <a class="idref" href="iris.program_logic.language.html#efs"><span class="id" title="variable">efs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <span class="id" title="var">e2'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="iris.program_logic.language.html#e2"><span class="id" title="variable">e2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="iris.program_logic.language.html#K"><span class="id" title="variable">K</span></a> <a class="idref" href="iris.program_logic.language.html#e2'"><span class="id" title="variable">e2'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="iris.program_logic.language.html#prim_step"><span class="id" title="projection">prim_step</span></a> <a class="idref" href="iris.program_logic.language.html#e1'"><span class="id" title="variable">e1'</span></a> <a class="idref" href="iris.program_logic.language.html#1cc6be414ab52727f77057b4b030dde0"><span class="id" title="variable">σ1</span></a> <a class="idref" href="iris.program_logic.language.html#29d7d9bf2d713ce949c9fed315ed8ffb"><span class="id" title="variable">κ</span></a> <a class="idref" href="iris.program_logic.language.html#e2'"><span class="id" title="variable">e2'</span></a> <a class="idref" href="iris.program_logic.language.html#a4d9266a5be6c0504292c8910a50c288"><span class="id" title="variable">σ2</span></a> <a class="idref" href="iris.program_logic.language.html#efs"><span class="id" title="variable">efs</span></a><br/>
}.<br/>

<br/>
<span class="id" title="keyword">Instance</span> <a name="language_ctx_id"><span class="id" title="instance">language_ctx_id</span></a> <span class="id" title="var">Λ</span> : <a class="idref" href="iris.program_logic.language.html#LanguageCtx"><span class="id" title="class">LanguageCtx</span></a> (@<a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> (<a class="idref" href="iris.program_logic.language.html#expr"><span class="id" title="projection">expr</span></a> <a class="idref" href="iris.program_logic.language.html#8f9ca9cb3d78ac33d75e576570aeb27a"><span class="id" title="variable">Λ</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="var">naive_solver</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Inductive</span> <a name="atomicity"><span class="id" title="inductive">atomicity</span></a> := <a name="StronglyAtomic"><span class="id" title="constructor">StronglyAtomic</span></a> | <a name="WeaklyAtomic"><span class="id" title="constructor">WeaklyAtomic</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a name="language"><span class="id" title="section">language</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<span class="id" title="var">Λ</span> : <a class="idref" href="iris.program_logic.language.html#language"><span class="id" title="record">language</span></a>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Types</span> <span class="id" title="var">v</span> : <a class="idref" href="iris.program_logic.language.html#val"><span class="id" title="projection">val</span></a> <a class="idref" href="iris.program_logic.language.html#8e77600c4e33bc8bd5940639baa9b639"><span class="id" title="variable">Λ</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Types</span> <span class="id" title="var">e</span> : <a class="idref" href="iris.program_logic.language.html#expr"><span class="id" title="projection">expr</span></a> <a class="idref" href="iris.program_logic.language.html#8e77600c4e33bc8bd5940639baa9b639"><span class="id" title="variable">Λ</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="to_of_val"><span class="id" title="lemma">to_of_val</span></a> <span class="id" title="var">v</span> : <a class="idref" href="iris.program_logic.language.html#to_val"><span class="id" title="projection">to_val</span></a> (<a class="idref" href="iris.program_logic.language.html#of_val"><span class="id" title="projection">of_val</span></a> <a class="idref" href="iris.program_logic.language.html#v"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="iris.program_logic.language.html#v"><span class="id" title="variable">v</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="iris.program_logic.language.html#language_mixin"><span class="id" title="projection">language_mixin</span></a>. <span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="of_to_val"><span class="id" title="lemma">of_to_val</span></a> <span class="id" title="var">e</span> <span class="id" title="var">v</span> : <a class="idref" href="iris.program_logic.language.html#to_val"><span class="id" title="projection">to_val</span></a> <a class="idref" href="iris.program_logic.language.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="iris.program_logic.language.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="iris.program_logic.language.html#of_val"><span class="id" title="projection">of_val</span></a> <a class="idref" href="iris.program_logic.language.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="iris.program_logic.language.html#e"><span class="id" title="variable">e</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="iris.program_logic.language.html#language_mixin"><span class="id" title="projection">language_mixin</span></a>. <span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="val_stuck"><span class="id" title="lemma">val_stuck</span></a> <span class="id" title="var">e</span> σ <span class="id" title="var">κ</span> <span class="id" title="var">e'</span> σ' <span class="id" title="var">efs</span> : <a class="idref" href="iris.program_logic.language.html#prim_step"><span class="id" title="projection">prim_step</span></a> <a class="idref" href="iris.program_logic.language.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="iris.program_logic.language.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a> <a class="idref" href="iris.program_logic.language.html#29d7d9bf2d713ce949c9fed315ed8ffb"><span class="id" title="variable">κ</span></a> <a class="idref" href="iris.program_logic.language.html#e'"><span class="id" title="variable">e'</span></a> <a class="idref" href="iris.program_logic.language.html#4394a2ef16b8915a5209b8b27258ea45"><span class="id" title="variable">σ'</span></a> <a class="idref" href="iris.program_logic.language.html#efs"><span class="id" title="variable">efs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="iris.program_logic.language.html#to_val"><span class="id" title="projection">to_val</span></a> <a class="idref" href="iris.program_logic.language.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="iris.program_logic.language.html#language_mixin"><span class="id" title="projection">language_mixin</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="reducible"><span class="id" title="definition">reducible</span></a> (<span class="id" title="var">e</span> : <a class="idref" href="iris.program_logic.language.html#expr"><span class="id" title="projection">expr</span></a> <a class="idref" href="iris.program_logic.language.html#8e77600c4e33bc8bd5940639baa9b639"><span class="id" title="variable">Λ</span></a>) (σ : <a class="idref" href="iris.program_logic.language.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="iris.program_logic.language.html#8e77600c4e33bc8bd5940639baa9b639"><span class="id" title="variable">Λ</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <span class="id" title="var">κ</span> <span class="id" title="var">e'</span> σ' <span class="id" title="var">efs</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="iris.program_logic.language.html#prim_step"><span class="id" title="projection">prim_step</span></a> <a class="idref" href="iris.program_logic.language.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="iris.program_logic.language.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a> <a class="idref" href="iris.program_logic.language.html#29d7d9bf2d713ce949c9fed315ed8ffb"><span class="id" title="variable">κ</span></a> <a class="idref" href="iris.program_logic.language.html#e'"><span class="id" title="variable">e'</span></a> <a class="idref" href="iris.program_logic.language.html#4394a2ef16b8915a5209b8b27258ea45"><span class="id" title="variable">σ'</span></a> <a class="idref" href="iris.program_logic.language.html#efs"><span class="id" title="variable">efs</span></a>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Total&nbsp;WP&nbsp;only&nbsp;permits&nbsp;reductions&nbsp;without&nbsp;observations&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="reducible_no_obs"><span class="id" title="definition">reducible_no_obs</span></a> (<span class="id" title="var">e</span> : <a class="idref" href="iris.program_logic.language.html#expr"><span class="id" title="projection">expr</span></a> <a class="idref" href="iris.program_logic.language.html#8e77600c4e33bc8bd5940639baa9b639"><span class="id" title="variable">Λ</span></a>) (σ : <a class="idref" href="iris.program_logic.language.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="iris.program_logic.language.html#8e77600c4e33bc8bd5940639baa9b639"><span class="id" title="variable">Λ</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <span class="id" title="var">e'</span> σ' <span class="id" title="var">efs</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="iris.program_logic.language.html#prim_step"><span class="id" title="projection">prim_step</span></a> <a class="idref" href="iris.program_logic.language.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="iris.program_logic.language.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="iris.program_logic.language.html#e'"><span class="id" title="variable">e'</span></a> <a class="idref" href="iris.program_logic.language.html#4394a2ef16b8915a5209b8b27258ea45"><span class="id" title="variable">σ'</span></a> <a class="idref" href="iris.program_logic.language.html#efs"><span class="id" title="variable">efs</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="irreducible"><span class="id" title="definition">irreducible</span></a> (<span class="id" title="var">e</span> : <a class="idref" href="iris.program_logic.language.html#expr"><span class="id" title="projection">expr</span></a> <a class="idref" href="iris.program_logic.language.html#8e77600c4e33bc8bd5940639baa9b639"><span class="id" title="variable">Λ</span></a>) (σ : <a class="idref" href="iris.program_logic.language.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="iris.program_logic.language.html#8e77600c4e33bc8bd5940639baa9b639"><span class="id" title="variable">Λ</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <span class="id" title="var">κ</span> <span class="id" title="var">e'</span> σ' <span class="id" title="var">efs</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬</span></a><a class="idref" href="iris.program_logic.language.html#prim_step"><span class="id" title="projection">prim_step</span></a> <a class="idref" href="iris.program_logic.language.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="iris.program_logic.language.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a> <a class="idref" href="iris.program_logic.language.html#29d7d9bf2d713ce949c9fed315ed8ffb"><span class="id" title="variable">κ</span></a> <a class="idref" href="iris.program_logic.language.html#e'"><span class="id" title="variable">e'</span></a> <a class="idref" href="iris.program_logic.language.html#4394a2ef16b8915a5209b8b27258ea45"><span class="id" title="variable">σ'</span></a> <a class="idref" href="iris.program_logic.language.html#efs"><span class="id" title="variable">efs</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="stuck"><span class="id" title="definition">stuck</span></a> (<span class="id" title="var">e</span> : <a class="idref" href="iris.program_logic.language.html#expr"><span class="id" title="projection">expr</span></a> <a class="idref" href="iris.program_logic.language.html#8e77600c4e33bc8bd5940639baa9b639"><span class="id" title="variable">Λ</span></a>) (σ : <a class="idref" href="iris.program_logic.language.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="iris.program_logic.language.html#8e77600c4e33bc8bd5940639baa9b639"><span class="id" title="variable">Λ</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="iris.program_logic.language.html#to_val"><span class="id" title="projection">to_val</span></a> <a class="idref" href="iris.program_logic.language.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="iris.program_logic.language.html#irreducible"><span class="id" title="definition">irreducible</span></a> <a class="idref" href="iris.program_logic.language.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="iris.program_logic.language.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="not_stuck"><span class="id" title="definition">not_stuck</span></a> (<span class="id" title="var">e</span> : <a class="idref" href="iris.program_logic.language.html#expr"><span class="id" title="projection">expr</span></a> <a class="idref" href="iris.program_logic.language.html#8e77600c4e33bc8bd5940639baa9b639"><span class="id" title="variable">Λ</span></a>) (σ : <a class="idref" href="iris.program_logic.language.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="iris.program_logic.language.html#8e77600c4e33bc8bd5940639baa9b639"><span class="id" title="variable">Λ</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="../html-stdpp/stdpp.option.html#is_Some"><span class="id" title="definition">is_Some</span></a> (<a class="idref" href="iris.program_logic.language.html#to_val"><span class="id" title="projection">to_val</span></a> <a class="idref" href="iris.program_logic.language.html#e"><span class="id" title="variable">e</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#9b27a55e56b4bfcc20e5b8cbd0156a3e"><span class="id" title="notation">∨</span></a> <a class="idref" href="iris.program_logic.language.html#reducible"><span class="id" title="definition">reducible</span></a> <a class="idref" href="iris.program_logic.language.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="iris.program_logic.language.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;<span class="inlinecode"><span class="id" title="var">Atomic</span></span> <span class="inlinecode"><span class="id" title="var">WeaklyAtomic</span></span>:&nbsp;This&nbsp;(weak)&nbsp;form&nbsp;of&nbsp;atomicity&nbsp;is&nbsp;enough&nbsp;to&nbsp;open<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;invariants&nbsp;when&nbsp;WP&nbsp;ensures&nbsp;safety,&nbsp;i.e.,&nbsp;programs&nbsp;never&nbsp;can&nbsp;get&nbsp;stuck.&nbsp;&nbsp;We<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;have&nbsp;an&nbsp;example&nbsp;in&nbsp;lambdaRust&nbsp;of&nbsp;an&nbsp;expression&nbsp;that&nbsp;is&nbsp;atomic&nbsp;in&nbsp;this<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sense,&nbsp;but&nbsp;not&nbsp;in&nbsp;the&nbsp;stronger&nbsp;sense&nbsp;defined&nbsp;below,&nbsp;and&nbsp;we&nbsp;have&nbsp;to&nbsp;be&nbsp;able<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to&nbsp;open&nbsp;invariants&nbsp;around&nbsp;that&nbsp;expression.&nbsp;&nbsp;See&nbsp;`CasStuckS`&nbsp;in<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="inlinecode"><span class="id" title="var">lambdaRust</span></span>(https://gitlab.mpi-sws.org/FP/LambdaRust-coq/blob/master/theories/lang/lang.v).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="inlinecode"><span class="id" title="var">Atomic</span></span> <span class="inlinecode"><span class="id" title="var">StronglyAtomic</span></span>:&nbsp;To&nbsp;open&nbsp;invariants&nbsp;with&nbsp;a&nbsp;WP&nbsp;that&nbsp;does&nbsp;not&nbsp;ensure<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;safety,&nbsp;we&nbsp;need&nbsp;a&nbsp;stronger&nbsp;form&nbsp;of&nbsp;atomicity.&nbsp;&nbsp;With&nbsp;the&nbsp;above&nbsp;definition,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in&nbsp;case&nbsp;`e`&nbsp;reduces&nbsp;to&nbsp;a&nbsp;stuck&nbsp;non-value,&nbsp;there&nbsp;is&nbsp;no&nbsp;proof&nbsp;that&nbsp;the<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;invariants&nbsp;have&nbsp;been&nbsp;established&nbsp;again.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Class</span> <a name="Atomic"><span class="id" title="record">Atomic</span></a> (<span class="id" title="var">a</span> : <a class="idref" href="iris.program_logic.language.html#atomicity"><span class="id" title="inductive">atomicity</span></a>) (<span class="id" title="var">e</span> : <a class="idref" href="iris.program_logic.language.html#expr"><span class="id" title="projection">expr</span></a> <a class="idref" href="iris.program_logic.language.html#8e77600c4e33bc8bd5940639baa9b639"><span class="id" title="variable">Λ</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="atomic"><span class="id" title="projection">atomic</span></a> σ <span class="id" title="var">e'</span> <span class="id" title="var">κ</span> σ' <span class="id" title="var">efs</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="iris.program_logic.language.html#prim_step"><span class="id" title="projection">prim_step</span></a> <a class="idref" href="iris.program_logic.language.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="iris.program_logic.language.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a> <a class="idref" href="iris.program_logic.language.html#29d7d9bf2d713ce949c9fed315ed8ffb"><span class="id" title="variable">κ</span></a> <a class="idref" href="iris.program_logic.language.html#e'"><span class="id" title="variable">e'</span></a> <a class="idref" href="iris.program_logic.language.html#4394a2ef16b8915a5209b8b27258ea45"><span class="id" title="variable">σ'</span></a> <a class="idref" href="iris.program_logic.language.html#efs"><span class="id" title="variable">efs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="iris.program_logic.language.html#a"><span class="id" title="variable">a</span></a> <span class="id" title="keyword">is</span> <a class="idref" href="iris.program_logic.language.html#WeaklyAtomic"><span class="id" title="constructor">WeaklyAtomic</span></a> <span class="id" title="keyword">then</span> <a class="idref" href="iris.program_logic.language.html#irreducible"><span class="id" title="definition">irreducible</span></a> <a class="idref" href="iris.program_logic.language.html#e'"><span class="id" title="variable">e'</span></a> <a class="idref" href="iris.program_logic.language.html#4394a2ef16b8915a5209b8b27258ea45"><span class="id" title="variable">σ'</span></a> <span class="id" title="keyword">else</span> <a class="idref" href="../html-stdpp/stdpp.option.html#is_Some"><span class="id" title="definition">is_Some</span></a> (<a class="idref" href="iris.program_logic.language.html#to_val"><span class="id" title="projection">to_val</span></a> <a class="idref" href="iris.program_logic.language.html#e'"><span class="id" title="variable">e'</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <a name="step"><span class="id" title="inductive">step</span></a> (ρ1 : <a class="idref" href="iris.program_logic.language.html#cfg"><span class="id" title="definition">cfg</span></a> <a class="idref" href="iris.program_logic.language.html#8e77600c4e33bc8bd5940639baa9b639"><span class="id" title="variable">Λ</span></a>) (<span class="id" title="var">κ</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="iris.program_logic.language.html#observation"><span class="id" title="projection">observation</span></a> <a class="idref" href="iris.program_logic.language.html#8e77600c4e33bc8bd5940639baa9b639"><span class="id" title="variable">Λ</span></a>)) (ρ2 : <a class="idref" href="iris.program_logic.language.html#cfg"><span class="id" title="definition">cfg</span></a> <a class="idref" href="iris.program_logic.language.html#8e77600c4e33bc8bd5940639baa9b639"><span class="id" title="variable">Λ</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a name="step_atomic"><span class="id" title="constructor">step_atomic</span></a> <span class="id" title="var">e1</span> σ1 <span class="id" title="var">e2</span> σ2 <span class="id" title="var">efs</span> <span class="id" title="var">t1</span> <span class="id" title="var">t2</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="iris.program_logic.language.html#5a56d21069e1b5979338388ca6da6341"><span class="id" title="variable">ρ1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="iris.program_logic.language.html#t1"><span class="id" title="variable">t1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="iris.program_logic.language.html#e1"><span class="id" title="variable">e1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="iris.program_logic.language.html#t2"><span class="id" title="variable">t2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="iris.program_logic.language.html#1cc6be414ab52727f77057b4b030dde0"><span class="id" title="variable">σ1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="iris.program_logic.language.html#624e74c7a399e3a88c70dbd629ccb3e9"><span class="id" title="variable">ρ2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="iris.program_logic.language.html#t1"><span class="id" title="variable">t1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="iris.program_logic.language.html#e2"><span class="id" title="variable">e2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="iris.program_logic.language.html#t2"><span class="id" title="variable">t2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="iris.program_logic.language.html#efs"><span class="id" title="variable">efs</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="iris.program_logic.language.html#a4d9266a5be6c0504292c8910a50c288"><span class="id" title="variable">σ2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="iris.program_logic.language.html#prim_step"><span class="id" title="projection">prim_step</span></a> <a class="idref" href="iris.program_logic.language.html#e1"><span class="id" title="variable">e1</span></a> <a class="idref" href="iris.program_logic.language.html#1cc6be414ab52727f77057b4b030dde0"><span class="id" title="variable">σ1</span></a> <a class="idref" href="iris.program_logic.language.html#29d7d9bf2d713ce949c9fed315ed8ffb"><span class="id" title="variable">κ</span></a> <a class="idref" href="iris.program_logic.language.html#e2"><span class="id" title="variable">e2</span></a> <a class="idref" href="iris.program_logic.language.html#a4d9266a5be6c0504292c8910a50c288"><span class="id" title="variable">σ2</span></a> <a class="idref" href="iris.program_logic.language.html#efs"><span class="id" title="variable">efs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="iris.program_logic.language.html#step"><span class="id" title="inductive">step</span></a> <a class="idref" href="iris.program_logic.language.html#5a56d21069e1b5979338388ca6da6341"><span class="id" title="variable">ρ1</span></a> <a class="idref" href="iris.program_logic.language.html#29d7d9bf2d713ce949c9fed315ed8ffb"><span class="id" title="variable">κ</span></a> <a class="idref" href="iris.program_logic.language.html#624e74c7a399e3a88c70dbd629ccb3e9"><span class="id" title="variable">ρ2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Hint Constructors</span> <a class="idref" href="iris.program_logic.language.html#step"><span class="id" title="inductive">step</span></a> : <span class="id" title="var">core</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <a name="nsteps"><span class="id" title="inductive">nsteps</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="iris.program_logic.language.html#cfg"><span class="id" title="definition">cfg</span></a> <a class="idref" href="iris.program_logic.language.html#8e77600c4e33bc8bd5940639baa9b639"><span class="id" title="variable">Λ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="iris.program_logic.language.html#observation"><span class="id" title="projection">observation</span></a> <a class="idref" href="iris.program_logic.language.html#8e77600c4e33bc8bd5940639baa9b639"><span class="id" title="variable">Λ</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="iris.program_logic.language.html#cfg"><span class="id" title="definition">cfg</span></a> <a class="idref" href="iris.program_logic.language.html#8e77600c4e33bc8bd5940639baa9b639"><span class="id" title="variable">Λ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a name="nsteps_refl"><span class="id" title="constructor">nsteps_refl</span></a> ρ :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="iris.program_logic.language.html#nsteps"><span class="id" title="inductive">nsteps</span></a> 0 <a class="idref" href="iris.program_logic.language.html#1af91fb19f8f622aa9ec8998986a6bf9"><span class="id" title="variable">ρ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="iris.program_logic.language.html#1af91fb19f8f622aa9ec8998986a6bf9"><span class="id" title="variable">ρ</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a name="nsteps_l"><span class="id" title="constructor">nsteps_l</span></a> <span class="id" title="var">n</span> ρ1 ρ2 ρ3 <span class="id" title="var">κ</span> <span class="id" title="var">κs</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="iris.program_logic.language.html#step"><span class="id" title="inductive">step</span></a> <a class="idref" href="iris.program_logic.language.html#5a56d21069e1b5979338388ca6da6341"><span class="id" title="variable">ρ1</span></a> <a class="idref" href="iris.program_logic.language.html#29d7d9bf2d713ce949c9fed315ed8ffb"><span class="id" title="variable">κ</span></a> <a class="idref" href="iris.program_logic.language.html#624e74c7a399e3a88c70dbd629ccb3e9"><span class="id" title="variable">ρ2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="iris.program_logic.language.html#nsteps"><span class="id" title="inductive">nsteps</span></a> <a class="idref" href="iris.program_logic.language.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="iris.program_logic.language.html#624e74c7a399e3a88c70dbd629ccb3e9"><span class="id" title="variable">ρ2</span></a> <a class="idref" href="iris.program_logic.language.html#1b0775b101386f5dc074447cf6c77aa8"><span class="id" title="variable">κs</span></a> <a class="idref" href="iris.program_logic.language.html#ffb12b2083d2b2203842276e30c58463"><span class="id" title="variable">ρ3</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="iris.program_logic.language.html#nsteps"><span class="id" title="inductive">nsteps</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="iris.program_logic.language.html#n"><span class="id" title="variable">n</span></a>) <a class="idref" href="iris.program_logic.language.html#5a56d21069e1b5979338388ca6da6341"><span class="id" title="variable">ρ1</span></a> (<a class="idref" href="iris.program_logic.language.html#29d7d9bf2d713ce949c9fed315ed8ffb"><span class="id" title="variable">κ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="iris.program_logic.language.html#1b0775b101386f5dc074447cf6c77aa8"><span class="id" title="variable">κs</span></a>) <a class="idref" href="iris.program_logic.language.html#ffb12b2083d2b2203842276e30c58463"><span class="id" title="variable">ρ3</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Hint Constructors</span> <a class="idref" href="iris.program_logic.language.html#nsteps"><span class="id" title="inductive">nsteps</span></a> : <span class="id" title="var">core</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="erased_step"><span class="id" title="definition">erased_step</span></a> (ρ1 ρ2 : <a class="idref" href="iris.program_logic.language.html#cfg"><span class="id" title="definition">cfg</span></a> <a class="idref" href="iris.program_logic.language.html#8e77600c4e33bc8bd5940639baa9b639"><span class="id" title="variable">Λ</span></a>) := <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <span class="id" title="var">κ</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="iris.program_logic.language.html#step"><span class="id" title="inductive">step</span></a> <a class="idref" href="iris.program_logic.language.html#5a56d21069e1b5979338388ca6da6341"><span class="id" title="variable">ρ1</span></a> <a class="idref" href="iris.program_logic.language.html#29d7d9bf2d713ce949c9fed315ed8ffb"><span class="id" title="variable">κ</span></a> <a class="idref" href="iris.program_logic.language.html#624e74c7a399e3a88c70dbd629ccb3e9"><span class="id" title="variable">ρ2</span></a>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><a class="idref" href="../html-stdpp/stdpp.relations.html#rtc"><span class="id" title="inductive">rtc</span></a></span> <span class="inlinecode"><a class="idref" href="iris.program_logic.language.html#erased_step"><span class="id" title="definition">erased_step</span></a></span> and <span class="inlinecode"><a class="idref" href="iris.program_logic.language.html#nsteps"><span class="id" title="inductive">nsteps</span></a></span> encode the same thing, just packaged
      in a different way. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="erased_steps_nsteps"><span class="id" title="lemma">erased_steps_nsteps</span></a> ρ1 ρ2 :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="../html-stdpp/stdpp.relations.html#rtc"><span class="id" title="inductive">rtc</span></a> <a class="idref" href="iris.program_logic.language.html#erased_step"><span class="id" title="definition">erased_step</span></a> <a class="idref" href="iris.program_logic.language.html#5a56d21069e1b5979338388ca6da6341"><span class="id" title="variable">ρ1</span></a> <a class="idref" href="iris.program_logic.language.html#624e74c7a399e3a88c70dbd629ccb3e9"><span class="id" title="variable">ρ2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#d9d5c539a07c7350478e89358d1fe520"><span class="id" title="notation">↔</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <span class="id" title="var">n</span> <span class="id" title="var">κs</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="iris.program_logic.language.html#nsteps"><span class="id" title="inductive">nsteps</span></a> <a class="idref" href="iris.program_logic.language.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="iris.program_logic.language.html#5a56d21069e1b5979338388ca6da6341"><span class="id" title="variable">ρ1</span></a> <a class="idref" href="iris.program_logic.language.html#1b0775b101386f5dc074447cf6c77aa8"><span class="id" title="variable">κs</span></a> <a class="idref" href="iris.program_logic.language.html#624e74c7a399e3a88c70dbd629ccb3e9"><span class="id" title="variable">ρ2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">induction</span> 1; <span class="id" title="tactic">firstorder</span> <span class="id" title="tactic">eauto</span>. <span class="comment">(*&nbsp;FIXME:&nbsp;<span class="inlinecode"><span class="id" title="var">naive_solver</span></span> <span class="inlinecode"><span class="id" title="tactic">eauto</span></span>&nbsp;should&nbsp;be&nbsp;able&nbsp;to&nbsp;handle&nbsp;this&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> (<span class="id" title="var">n</span> &amp; <span class="id" title="var">κs</span> &amp; <span class="id" title="var">Hsteps</span>). <span class="id" title="tactic">unfold</span> <a class="idref" href="iris.program_logic.language.html#erased_step"><span class="id" title="definition">erased_step</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Hsteps</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="../html-stdpp/stdpp.relations.html#rtc_refl"><span class="id" title="constructor">rtc_refl</span></a>, <a class="idref" href="../html-stdpp/stdpp.relations.html#rtc_l"><span class="id" title="constructor">rtc_l</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="of_to_val_flip"><span class="id" title="lemma">of_to_val_flip</span></a> <span class="id" title="var">v</span> <span class="id" title="var">e</span> : <a class="idref" href="iris.program_logic.language.html#of_val"><span class="id" title="projection">of_val</span></a> <a class="idref" href="iris.program_logic.language.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="iris.program_logic.language.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="iris.program_logic.language.html#to_val"><span class="id" title="projection">to_val</span></a> <a class="idref" href="iris.program_logic.language.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="iris.program_logic.language.html#v"><span class="id" title="variable">v</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span> &lt;-. <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="iris.program_logic.language.html#to_of_val"><span class="id" title="lemma">to_of_val</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="not_reducible"><span class="id" title="lemma">not_reducible</span></a> <span class="id" title="var">e</span> σ : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬</span></a><a class="idref" href="iris.program_logic.language.html#reducible"><span class="id" title="definition">reducible</span></a> <a class="idref" href="iris.program_logic.language.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="iris.program_logic.language.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#d9d5c539a07c7350478e89358d1fe520"><span class="id" title="notation">↔</span></a> <a class="idref" href="iris.program_logic.language.html#irreducible"><span class="id" title="definition">irreducible</span></a> <a class="idref" href="iris.program_logic.language.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="iris.program_logic.language.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="iris.program_logic.language.html#reducible"><span class="id" title="definition">reducible</span></a>, <a class="idref" href="iris.program_logic.language.html#irreducible"><span class="id" title="definition">irreducible</span></a>. <span class="id" title="var">naive_solver</span>. <span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="reducible_not_val"><span class="id" title="lemma">reducible_not_val</span></a> <span class="id" title="var">e</span> σ : <a class="idref" href="iris.program_logic.language.html#reducible"><span class="id" title="definition">reducible</span></a> <a class="idref" href="iris.program_logic.language.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="iris.program_logic.language.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="iris.program_logic.language.html#to_val"><span class="id" title="projection">to_val</span></a> <a class="idref" href="iris.program_logic.language.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span> (?&amp;?&amp;?&amp;?&amp;?); <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="iris.program_logic.language.html#val_stuck"><span class="id" title="lemma">val_stuck</span></a>. <span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="reducible_no_obs_reducible"><span class="id" title="lemma">reducible_no_obs_reducible</span></a> <span class="id" title="var">e</span> σ : <a class="idref" href="iris.program_logic.language.html#reducible_no_obs"><span class="id" title="definition">reducible_no_obs</span></a> <a class="idref" href="iris.program_logic.language.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="iris.program_logic.language.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="iris.program_logic.language.html#reducible"><span class="id" title="definition">reducible</span></a> <a class="idref" href="iris.program_logic.language.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="iris.program_logic.language.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span> (?&amp;?&amp;?&amp;?); <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="val_irreducible"><span class="id" title="lemma">val_irreducible</span></a> <span class="id" title="var">e</span> σ : <a class="idref" href="../html-stdpp/stdpp.option.html#is_Some"><span class="id" title="definition">is_Some</span></a> (<a class="idref" href="iris.program_logic.language.html#to_val"><span class="id" title="projection">to_val</span></a> <a class="idref" href="iris.program_logic.language.html#e"><span class="id" title="variable">e</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="iris.program_logic.language.html#irreducible"><span class="id" title="definition">irreducible</span></a> <a class="idref" href="iris.program_logic.language.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="iris.program_logic.language.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span> [??] ???? ?%<a class="idref" href="iris.program_logic.language.html#val_stuck"><span class="id" title="lemma">val_stuck</span></a>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> (<a class="idref" href="iris.program_logic.language.html#to_val"><span class="id" title="projection">to_val</span></a> <span class="id" title="var">e</span>). <span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Global Instance</span> <a name="of_val_inj"><span class="id" title="instance">of_val_inj</span></a> : <a class="idref" href="../html-stdpp/stdpp.base.html#Inj"><span class="id" title="class">Inj</span></a> <a class="idref" href="../html-stdpp/stdpp.base.html#924fd3758233021bbb7af913c6a625ce"><span class="id" title="notation">(=)</span></a> <a class="idref" href="../html-stdpp/stdpp.base.html#924fd3758233021bbb7af913c6a625ce"><span class="id" title="notation">(=)</span></a> (@<a class="idref" href="iris.program_logic.language.html#of_val"><span class="id" title="projection">of_val</span></a> <a class="idref" href="iris.program_logic.language.html#8e77600c4e33bc8bd5940639baa9b639"><span class="id" title="variable">Λ</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">v</span> <span class="id" title="var">v'</span> <span class="id" title="var">Hv</span>; <span class="id" title="tactic">apply</span> (<a class="idref" href="../html-stdpp/stdpp.base.html#inj"><span class="id" title="definition">inj</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a>); <span class="id" title="tactic">rewrite</span> -!<a class="idref" href="iris.program_logic.language.html#to_of_val"><span class="id" title="lemma">to_of_val</span></a> <span class="id" title="var">Hv</span>. <span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="not_not_stuck"><span class="id" title="lemma">not_not_stuck</span></a> <span class="id" title="var">e</span> σ : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬</span></a><a class="idref" href="iris.program_logic.language.html#not_stuck"><span class="id" title="definition">not_stuck</span></a> <a class="idref" href="iris.program_logic.language.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="iris.program_logic.language.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#d9d5c539a07c7350478e89358d1fe520"><span class="id" title="notation">↔</span></a> <a class="idref" href="iris.program_logic.language.html#stuck"><span class="id" title="definition">stuck</span></a> <a class="idref" href="iris.program_logic.language.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="iris.program_logic.language.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="iris.program_logic.language.html#stuck"><span class="id" title="definition">stuck</span></a> /<a class="idref" href="iris.program_logic.language.html#not_stuck"><span class="id" title="definition">not_stuck</span></a> -<a class="idref" href="../html-stdpp/stdpp.option.html#not_eq_None_Some"><span class="id" title="lemma">not_eq_None_Some</span></a> -<a class="idref" href="iris.program_logic.language.html#not_reducible"><span class="id" title="lemma">not_reducible</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="../html-stdpp/stdpp.base.html#decide"><span class="id" title="definition">decide</span></a> (<a class="idref" href="iris.program_logic.language.html#to_val"><span class="id" title="projection">to_val</span></a> <span class="id" title="var">e</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>)); <span class="id" title="var">naive_solver</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="strongly_atomic_atomic"><span class="id" title="lemma">strongly_atomic_atomic</span></a> <span class="id" title="var">e</span> <span class="id" title="var">a</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="iris.program_logic.language.html#Atomic"><span class="id" title="class">Atomic</span></a> <a class="idref" href="iris.program_logic.language.html#StronglyAtomic"><span class="id" title="constructor">StronglyAtomic</span></a> <a class="idref" href="iris.program_logic.language.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="iris.program_logic.language.html#Atomic"><span class="id" title="class">Atomic</span></a> <a class="idref" href="iris.program_logic.language.html#a"><span class="id" title="variable">a</span></a> <a class="idref" href="iris.program_logic.language.html#e"><span class="id" title="variable">e</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="iris.program_logic.language.html#Atomic"><span class="id" title="class">Atomic</span></a>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="iris.program_logic.language.html#val_irreducible"><span class="id" title="lemma">val_irreducible</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="reducible_fill"><span class="id" title="lemma">reducible_fill</span></a> `{!@<a class="idref" href="iris.program_logic.language.html#LanguageCtx"><span class="id" title="class">LanguageCtx</span></a> <a class="idref" href="iris.program_logic.language.html#8e77600c4e33bc8bd5940639baa9b639"><span class="id" title="variable">Λ</span></a> <span class="id" title="var">K</span>} <span class="id" title="var">e</span> σ :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="iris.program_logic.language.html#reducible"><span class="id" title="definition">reducible</span></a> <a class="idref" href="iris.program_logic.language.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="iris.program_logic.language.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="iris.program_logic.language.html#reducible"><span class="id" title="definition">reducible</span></a> (<a class="idref" href="iris.program_logic.language.html#K"><span class="id" title="variable">K</span></a> <a class="idref" href="iris.program_logic.language.html#e"><span class="id" title="variable">e</span></a>) <a class="idref" href="iris.program_logic.language.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="iris.program_logic.language.html#reducible"><span class="id" title="definition">reducible</span></a> <span class="id" title="tactic">in</span> *. <span class="id" title="var">naive_solver</span> <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="iris.program_logic.language.html#fill_step"><span class="id" title="method">fill_step</span></a>. <span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="reducible_fill_inv"><span class="id" title="lemma">reducible_fill_inv</span></a> `{!@<a class="idref" href="iris.program_logic.language.html#LanguageCtx"><span class="id" title="class">LanguageCtx</span></a> <a class="idref" href="iris.program_logic.language.html#8e77600c4e33bc8bd5940639baa9b639"><span class="id" title="variable">Λ</span></a> <span class="id" title="var">K</span>} <span class="id" title="var">e</span> σ :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="iris.program_logic.language.html#to_val"><span class="id" title="projection">to_val</span></a> <a class="idref" href="iris.program_logic.language.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="iris.program_logic.language.html#reducible"><span class="id" title="definition">reducible</span></a> (<a class="idref" href="iris.program_logic.language.html#K"><span class="id" title="variable">K</span></a> <a class="idref" href="iris.program_logic.language.html#e"><span class="id" title="variable">e</span></a>) <a class="idref" href="iris.program_logic.language.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="iris.program_logic.language.html#reducible"><span class="id" title="definition">reducible</span></a> <a class="idref" href="iris.program_logic.language.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="iris.program_logic.language.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ? (<span class="id" title="var">e'</span>&amp;σ'&amp;<span class="id" title="var">k</span>&amp;<span class="id" title="var">efs</span>&amp;<span class="id" title="var">Hstep</span>); <span class="id" title="tactic">unfold</span> <a class="idref" href="iris.program_logic.language.html#reducible"><span class="id" title="definition">reducible</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="iris.program_logic.language.html#fill_step_inv"><span class="id" title="method">fill_step_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hstep</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">e2'</span> &amp; <span class="id" title="var">_</span> &amp; <span class="id" title="var">Hstep</span>); <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="reducible_no_obs_fill"><span class="id" title="lemma">reducible_no_obs_fill</span></a> `{!@<a class="idref" href="iris.program_logic.language.html#LanguageCtx"><span class="id" title="class">LanguageCtx</span></a> <a class="idref" href="iris.program_logic.language.html#8e77600c4e33bc8bd5940639baa9b639"><span class="id" title="variable">Λ</span></a> <span class="id" title="var">K</span>} <span class="id" title="var">e</span> σ :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="iris.program_logic.language.html#reducible_no_obs"><span class="id" title="definition">reducible_no_obs</span></a> <a class="idref" href="iris.program_logic.language.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="iris.program_logic.language.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="iris.program_logic.language.html#reducible_no_obs"><span class="id" title="definition">reducible_no_obs</span></a> (<a class="idref" href="iris.program_logic.language.html#K"><span class="id" title="variable">K</span></a> <a class="idref" href="iris.program_logic.language.html#e"><span class="id" title="variable">e</span></a>) <a class="idref" href="iris.program_logic.language.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="iris.program_logic.language.html#reducible_no_obs"><span class="id" title="definition">reducible_no_obs</span></a> <span class="id" title="tactic">in</span> *. <span class="id" title="var">naive_solver</span> <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="iris.program_logic.language.html#fill_step"><span class="id" title="method">fill_step</span></a>. <span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="reducible_no_obs_fill_inv"><span class="id" title="lemma">reducible_no_obs_fill_inv</span></a> `{!@<a class="idref" href="iris.program_logic.language.html#LanguageCtx"><span class="id" title="class">LanguageCtx</span></a> <a class="idref" href="iris.program_logic.language.html#8e77600c4e33bc8bd5940639baa9b639"><span class="id" title="variable">Λ</span></a> <span class="id" title="var">K</span>} <span class="id" title="var">e</span> σ :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="iris.program_logic.language.html#to_val"><span class="id" title="projection">to_val</span></a> <a class="idref" href="iris.program_logic.language.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="iris.program_logic.language.html#reducible_no_obs"><span class="id" title="definition">reducible_no_obs</span></a> (<a class="idref" href="iris.program_logic.language.html#K"><span class="id" title="variable">K</span></a> <a class="idref" href="iris.program_logic.language.html#e"><span class="id" title="variable">e</span></a>) <a class="idref" href="iris.program_logic.language.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="iris.program_logic.language.html#reducible_no_obs"><span class="id" title="definition">reducible_no_obs</span></a> <a class="idref" href="iris.program_logic.language.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="iris.program_logic.language.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ? (<span class="id" title="var">e'</span>&amp;σ'&amp;<span class="id" title="var">efs</span>&amp;<span class="id" title="var">Hstep</span>); <span class="id" title="tactic">unfold</span> <a class="idref" href="iris.program_logic.language.html#reducible_no_obs"><span class="id" title="definition">reducible_no_obs</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="iris.program_logic.language.html#fill_step_inv"><span class="id" title="method">fill_step_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hstep</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">e2'</span> &amp; <span class="id" title="var">_</span> &amp; <span class="id" title="var">Hstep</span>); <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="irreducible_fill"><span class="id" title="lemma">irreducible_fill</span></a> `{!@<a class="idref" href="iris.program_logic.language.html#LanguageCtx"><span class="id" title="class">LanguageCtx</span></a> <a class="idref" href="iris.program_logic.language.html#8e77600c4e33bc8bd5940639baa9b639"><span class="id" title="variable">Λ</span></a> <span class="id" title="var">K</span>} <span class="id" title="var">e</span> σ :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="iris.program_logic.language.html#to_val"><span class="id" title="projection">to_val</span></a> <a class="idref" href="iris.program_logic.language.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="iris.program_logic.language.html#irreducible"><span class="id" title="definition">irreducible</span></a> <a class="idref" href="iris.program_logic.language.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="iris.program_logic.language.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="iris.program_logic.language.html#irreducible"><span class="id" title="definition">irreducible</span></a> (<a class="idref" href="iris.program_logic.language.html#K"><span class="id" title="variable">K</span></a> <a class="idref" href="iris.program_logic.language.html#e"><span class="id" title="variable">e</span></a>) <a class="idref" href="iris.program_logic.language.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">rewrite</span> -!<a class="idref" href="iris.program_logic.language.html#not_reducible"><span class="id" title="lemma">not_reducible</span></a>. <span class="id" title="var">naive_solver</span> <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="iris.program_logic.language.html#reducible_fill_inv"><span class="id" title="lemma">reducible_fill_inv</span></a>. <span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="irreducible_fill_inv"><span class="id" title="lemma">irreducible_fill_inv</span></a> `{!@<a class="idref" href="iris.program_logic.language.html#LanguageCtx"><span class="id" title="class">LanguageCtx</span></a> <a class="idref" href="iris.program_logic.language.html#8e77600c4e33bc8bd5940639baa9b639"><span class="id" title="variable">Λ</span></a> <span class="id" title="var">K</span>} <span class="id" title="var">e</span> σ :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="iris.program_logic.language.html#irreducible"><span class="id" title="definition">irreducible</span></a> (<a class="idref" href="iris.program_logic.language.html#K"><span class="id" title="variable">K</span></a> <a class="idref" href="iris.program_logic.language.html#e"><span class="id" title="variable">e</span></a>) <a class="idref" href="iris.program_logic.language.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="iris.program_logic.language.html#irreducible"><span class="id" title="definition">irreducible</span></a> <a class="idref" href="iris.program_logic.language.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="iris.program_logic.language.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">rewrite</span> -!<a class="idref" href="iris.program_logic.language.html#not_reducible"><span class="id" title="lemma">not_reducible</span></a>. <span class="id" title="var">naive_solver</span> <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="iris.program_logic.language.html#reducible_fill"><span class="id" title="lemma">reducible_fill</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="not_stuck_fill_inv"><span class="id" title="lemma">not_stuck_fill_inv</span></a> <span class="id" title="var">K</span> `{!@<a class="idref" href="iris.program_logic.language.html#LanguageCtx"><span class="id" title="class">LanguageCtx</span></a> <a class="idref" href="iris.program_logic.language.html#8e77600c4e33bc8bd5940639baa9b639"><span class="id" title="variable">Λ</span></a> <a class="idref" href="iris.program_logic.language.html#K"><span class="id" title="variable">K</span></a>} <span class="id" title="var">e</span> σ :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="iris.program_logic.language.html#not_stuck"><span class="id" title="definition">not_stuck</span></a> (<a class="idref" href="iris.program_logic.language.html#K"><span class="id" title="variable">K</span></a> <a class="idref" href="iris.program_logic.language.html#e"><span class="id" title="variable">e</span></a>) <a class="idref" href="iris.program_logic.language.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="iris.program_logic.language.html#not_stuck"><span class="id" title="definition">not_stuck</span></a> <a class="idref" href="iris.program_logic.language.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="iris.program_logic.language.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="iris.program_logic.language.html#not_stuck"><span class="id" title="definition">not_stuck</span></a> -!<a class="idref" href="../html-stdpp/stdpp.option.html#not_eq_None_Some"><span class="id" title="lemma">not_eq_None_Some</span></a>. <span class="id" title="tactic">intros</span> [?|?].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">auto</span> <span class="id" title="keyword">using</span> <a class="idref" href="iris.program_logic.language.html#fill_not_val"><span class="id" title="method">fill_not_val</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<a class="idref" href="../html-stdpp/stdpp.base.html#decide"><span class="id" title="definition">decide</span></a> (<a class="idref" href="iris.program_logic.language.html#to_val"><span class="id" title="projection">to_val</span></a> <span class="id" title="var">e</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>)); <span class="id" title="tactic">auto</span> <span class="id" title="keyword">using</span> <a class="idref" href="iris.program_logic.language.html#reducible_fill_inv"><span class="id" title="lemma">reducible_fill_inv</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="stuck_fill"><span class="id" title="lemma">stuck_fill</span></a> `{!@<a class="idref" href="iris.program_logic.language.html#LanguageCtx"><span class="id" title="class">LanguageCtx</span></a> <a class="idref" href="iris.program_logic.language.html#8e77600c4e33bc8bd5940639baa9b639"><span class="id" title="variable">Λ</span></a> <span class="id" title="var">K</span>} <span class="id" title="var">e</span> σ :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="iris.program_logic.language.html#stuck"><span class="id" title="definition">stuck</span></a> <a class="idref" href="iris.program_logic.language.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="iris.program_logic.language.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="iris.program_logic.language.html#stuck"><span class="id" title="definition">stuck</span></a> (<a class="idref" href="iris.program_logic.language.html#K"><span class="id" title="variable">K</span></a> <a class="idref" href="iris.program_logic.language.html#e"><span class="id" title="variable">e</span></a>) <a class="idref" href="iris.program_logic.language.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">rewrite</span> -!<a class="idref" href="iris.program_logic.language.html#not_not_stuck"><span class="id" title="lemma">not_not_stuck</span></a>. <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="iris.program_logic.language.html#not_stuck_fill_inv"><span class="id" title="lemma">not_stuck_fill_inv</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="step_Permutation"><span class="id" title="lemma">step_Permutation</span></a> (<span class="id" title="var">t1</span> <span class="id" title="var">t1'</span> <span class="id" title="var">t2</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="iris.program_logic.language.html#expr"><span class="id" title="projection">expr</span></a> <a class="idref" href="iris.program_logic.language.html#8e77600c4e33bc8bd5940639baa9b639"><span class="id" title="variable">Λ</span></a>)) <span class="id" title="var">κ</span> σ1 σ2 :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="iris.program_logic.language.html#t1"><span class="id" title="variable">t1</span></a> <a class="idref" href="../html-stdpp/stdpp.list.html#818f1d1d969a9fd3e79a8695ff497318"><span class="id" title="notation">≡ₚ</span></a> <a class="idref" href="iris.program_logic.language.html#t1'"><span class="id" title="variable">t1'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="iris.program_logic.language.html#step"><span class="id" title="inductive">step</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="iris.program_logic.language.html#t1"><span class="id" title="variable">t1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="iris.program_logic.language.html#1cc6be414ab52727f77057b4b030dde0"><span class="id" title="variable">σ1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="iris.program_logic.language.html#29d7d9bf2d713ce949c9fed315ed8ffb"><span class="id" title="variable">κ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="iris.program_logic.language.html#t2"><span class="id" title="variable">t2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="iris.program_logic.language.html#a4d9266a5be6c0504292c8910a50c288"><span class="id" title="variable">σ2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <span class="id" title="var">t2'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="iris.program_logic.language.html#t2"><span class="id" title="variable">t2</span></a> <a class="idref" href="../html-stdpp/stdpp.list.html#818f1d1d969a9fd3e79a8695ff497318"><span class="id" title="notation">≡ₚ</span></a> <a class="idref" href="iris.program_logic.language.html#t2'"><span class="id" title="variable">t2'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="iris.program_logic.language.html#step"><span class="id" title="inductive">step</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="iris.program_logic.language.html#t1'"><span class="id" title="variable">t1'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="iris.program_logic.language.html#1cc6be414ab52727f77057b4b030dde0"><span class="id" title="variable">σ1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="iris.program_logic.language.html#29d7d9bf2d713ce949c9fed315ed8ffb"><span class="id" title="variable">κ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="iris.program_logic.language.html#t2'"><span class="id" title="variable">t2'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="iris.program_logic.language.html#a4d9266a5be6c0504292c8910a50c288"><span class="id" title="variable">σ2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Ht</span> [<span class="id" title="var">e1</span> σ1' <span class="id" title="var">e2</span> σ2' <span class="id" title="var">efs</span> <span class="id" title="var">tl</span> <span class="id" title="var">tr</span> ?? <span class="id" title="var">Hstep</span>]; <span class="id" title="var">simplify_eq</span>/=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">Ht</span>; <span class="id" title="tactic">rewrite</span> -<a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Sorting.Permutation.html#Permutation_middle"><span class="id" title="lemma">Permutation_middle</span></a> (<a class="idref" href="../html-stdpp/stdpp.base.html#symmetry_iff"><span class="id" title="lemma">symmetry_iff</span></a> <a class="idref" href="../html-stdpp/stdpp.list.html#a7358ce06a60f2a977d9a5d43747ed72"><span class="id" title="notation">(≡ₚ)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> (<span class="id" title="var">tl'</span>&amp;<span class="id" title="var">tr'</span>&amp;-&gt;&amp;<span class="id" title="var">Ht</span>)%<a class="idref" href="../html-stdpp/stdpp.list.html#Permutation_cons_inv"><span class="id" title="lemma">Permutation_cons_inv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">tl'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">e2</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <span class="id" title="var">tr'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">efs</span>); <span class="id" title="tactic">split</span>; [|<span class="id" title="tactic">by</span> <span class="id" title="tactic">econstructor</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> -!<a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Sorting.Permutation.html#Permutation_middle"><span class="id" title="lemma">Permutation_middle</span></a> !<a class="idref" href="../html-stdpp/stdpp.base.html#assoc_L"><span class="id" title="lemma">assoc_L</span></a> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="step_insert"><span class="id" title="lemma">step_insert</span></a> <span class="id" title="var">i</span> <span class="id" title="var">t2</span> σ2 <span class="id" title="var">e</span> <span class="id" title="var">κ</span> <span class="id" title="var">e'</span> σ3 <span class="id" title="var">efs</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="iris.program_logic.language.html#t2"><span class="id" title="variable">t2</span></a> <a class="idref" href="../html-stdpp/stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="iris.program_logic.language.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="iris.program_logic.language.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="iris.program_logic.language.html#prim_step"><span class="id" title="projection">prim_step</span></a> <a class="idref" href="iris.program_logic.language.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="iris.program_logic.language.html#a4d9266a5be6c0504292c8910a50c288"><span class="id" title="variable">σ2</span></a> <a class="idref" href="iris.program_logic.language.html#29d7d9bf2d713ce949c9fed315ed8ffb"><span class="id" title="variable">κ</span></a> <a class="idref" href="iris.program_logic.language.html#e'"><span class="id" title="variable">e'</span></a> <a class="idref" href="iris.program_logic.language.html#e12536cea4738a3b52fe7745b6ebd1cf"><span class="id" title="variable">σ3</span></a> <a class="idref" href="iris.program_logic.language.html#efs"><span class="id" title="variable">efs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="iris.program_logic.language.html#step"><span class="id" title="inductive">step</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="iris.program_logic.language.html#t2"><span class="id" title="variable">t2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="iris.program_logic.language.html#a4d9266a5be6c0504292c8910a50c288"><span class="id" title="variable">σ2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="iris.program_logic.language.html#29d7d9bf2d713ce949c9fed315ed8ffb"><span class="id" title="variable">κ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="../html-stdpp/stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><a class="idref" href="iris.program_logic.language.html#i"><span class="id" title="variable">i</span></a><a class="idref" href="../html-stdpp/stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a><a class="idref" href="iris.program_logic.language.html#e'"><span class="id" title="variable">e'</span></a><a class="idref" href="../html-stdpp/stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a><a class="idref" href="iris.program_logic.language.html#t2"><span class="id" title="variable">t2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="iris.program_logic.language.html#efs"><span class="id" title="variable">efs</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="iris.program_logic.language.html#e12536cea4738a3b52fe7745b6ebd1cf"><span class="id" title="variable">σ3</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">edestruct</span> (<a class="idref" href="../html-stdpp/stdpp.list.html#elem_of_list_split_length"><span class="id" title="lemma">elem_of_list_split_length</span></a> <span class="id" title="var">t2</span>) <span class="id" title="keyword">as</span> (<span class="id" title="var">t21</span>&amp;<span class="id" title="var">t22</span>&amp;?&amp;?);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">first</span> (<span class="id" title="tactic">by</span> <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="../html-stdpp/stdpp.list.html#elem_of_list_lookup_2"><span class="id" title="lemma">elem_of_list_lookup_2</span></a>); <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="../html-stdpp/stdpp.list.html#insert_app_r_alt"><span class="id" title="lemma">insert_app_r_alt</span></a> // <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.sub_diag"><span class="id" title="lemma">Nat.sub_diag</span></a> /= -<a class="idref" href="../html-stdpp/stdpp.base.html#assoc_L"><span class="id" title="lemma">assoc_L</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="erased_step_Permutation"><span class="id" title="lemma">erased_step_Permutation</span></a> (<span class="id" title="var">t1</span> <span class="id" title="var">t1'</span> <span class="id" title="var">t2</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="iris.program_logic.language.html#expr"><span class="id" title="projection">expr</span></a> <a class="idref" href="iris.program_logic.language.html#8e77600c4e33bc8bd5940639baa9b639"><span class="id" title="variable">Λ</span></a>)) σ1 σ2 :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="iris.program_logic.language.html#t1"><span class="id" title="variable">t1</span></a> <a class="idref" href="../html-stdpp/stdpp.list.html#818f1d1d969a9fd3e79a8695ff497318"><span class="id" title="notation">≡ₚ</span></a> <a class="idref" href="iris.program_logic.language.html#t1'"><span class="id" title="variable">t1'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="iris.program_logic.language.html#erased_step"><span class="id" title="definition">erased_step</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="iris.program_logic.language.html#t1"><span class="id" title="variable">t1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="iris.program_logic.language.html#1cc6be414ab52727f77057b4b030dde0"><span class="id" title="variable">σ1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="iris.program_logic.language.html#t2"><span class="id" title="variable">t2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="iris.program_logic.language.html#a4d9266a5be6c0504292c8910a50c288"><span class="id" title="variable">σ2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <span class="id" title="var">t2'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="iris.program_logic.language.html#t2"><span class="id" title="variable">t2</span></a> <a class="idref" href="../html-stdpp/stdpp.list.html#818f1d1d969a9fd3e79a8695ff497318"><span class="id" title="notation">≡ₚ</span></a> <a class="idref" href="iris.program_logic.language.html#t2'"><span class="id" title="variable">t2'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="iris.program_logic.language.html#erased_step"><span class="id" title="definition">erased_step</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="iris.program_logic.language.html#t1'"><span class="id" title="variable">t1'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="iris.program_logic.language.html#1cc6be414ab52727f77057b4b030dde0"><span class="id" title="variable">σ1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="iris.program_logic.language.html#t2'"><span class="id" title="variable">t2'</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="iris.program_logic.language.html#a4d9266a5be6c0504292c8910a50c288"><span class="id" title="variable">σ2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Heq</span> [? <span class="id" title="var">Hs</span>]. <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="iris.program_logic.language.html#step_Permutation"><span class="id" title="lemma">step_Permutation</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Heq</span> <span class="id" title="var">Hs</span>). <span class="id" title="tactic">firstorder</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;FIXME:&nbsp;<span class="inlinecode"><span class="id" title="var">naive_solver</span></span>&nbsp;should&nbsp;be&nbsp;able&nbsp;to&nbsp;handle&nbsp;this&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Record</span> <a name="pure_step"><span class="id" title="record">pure_step</span></a> (<span class="id" title="var">e1</span> <span class="id" title="var">e2</span> : <a class="idref" href="iris.program_logic.language.html#expr"><span class="id" title="projection">expr</span></a> <a class="idref" href="iris.program_logic.language.html#8e77600c4e33bc8bd5940639baa9b639"><span class="id" title="variable">Λ</span></a>) := {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="pure_step_safe"><span class="id" title="projection">pure_step_safe</span></a> σ1 : <a class="idref" href="iris.program_logic.language.html#reducible_no_obs"><span class="id" title="definition">reducible_no_obs</span></a> <a class="idref" href="iris.program_logic.language.html#e1"><span class="id" title="variable">e1</span></a> <a class="idref" href="iris.program_logic.language.html#1cc6be414ab52727f77057b4b030dde0"><span class="id" title="variable">σ1</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="pure_step_det"><span class="id" title="projection">pure_step_det</span></a> σ1 <span class="id" title="var">κ</span> <span class="id" title="var">e2'</span> σ2 <span class="id" title="var">efs</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="iris.program_logic.language.html#prim_step"><span class="id" title="projection">prim_step</span></a> <a class="idref" href="iris.program_logic.language.html#e1"><span class="id" title="variable">e1</span></a> <a class="idref" href="iris.program_logic.language.html#1cc6be414ab52727f77057b4b030dde0"><span class="id" title="variable">σ1</span></a> <a class="idref" href="iris.program_logic.language.html#29d7d9bf2d713ce949c9fed315ed8ffb"><span class="id" title="variable">κ</span></a> <a class="idref" href="iris.program_logic.language.html#e2'"><span class="id" title="variable">e2'</span></a> <a class="idref" href="iris.program_logic.language.html#a4d9266a5be6c0504292c8910a50c288"><span class="id" title="variable">σ2</span></a> <a class="idref" href="iris.program_logic.language.html#efs"><span class="id" title="variable">efs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="iris.program_logic.language.html#29d7d9bf2d713ce949c9fed315ed8ffb"><span class="id" title="variable">κ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="iris.program_logic.language.html#a4d9266a5be6c0504292c8910a50c288"><span class="id" title="variable">σ2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="iris.program_logic.language.html#1cc6be414ab52727f77057b4b030dde0"><span class="id" title="variable">σ1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="iris.program_logic.language.html#e2'"><span class="id" title="variable">e2'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="iris.program_logic.language.html#e2"><span class="id" title="variable">e2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="iris.program_logic.language.html#efs"><span class="id" title="variable">efs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><br/>
&nbsp;&nbsp;}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <a name="pure_steps_tp"><span class="id" title="abbreviation">pure_steps_tp</span></a> := (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Lists.List.html#Forall2"><span class="id" title="inductive">Forall2</span></a> (<a class="idref" href="../html-stdpp/stdpp.relations.html#rtc"><span class="id" title="inductive">rtc</span></a> <a class="idref" href="iris.program_logic.language.html#pure_step"><span class="id" title="record">pure_step</span></a>)).<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;TODO:&nbsp;Exclude&nbsp;the&nbsp;case&nbsp;of&nbsp;<span class="inlinecode"><span class="id" title="var">n</span>=0</span>,&nbsp;either&nbsp;here,&nbsp;or&nbsp;in&nbsp;<span class="inlinecode"><span class="id" title="var">wp_pure</span></span>&nbsp;to&nbsp;avoid&nbsp;it<br/>
&nbsp;&nbsp;succeeding&nbsp;when&nbsp;it&nbsp;did&nbsp;not&nbsp;actually&nbsp;do&nbsp;anything.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Class</span> <a name="PureExec"><span class="id" title="record">PureExec</span></a> (φ : <span class="id" title="keyword">Prop</span>) (<span class="id" title="var">n</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<span class="id" title="var">e1</span> <span class="id" title="var">e2</span> : <a class="idref" href="iris.program_logic.language.html#expr"><span class="id" title="projection">expr</span></a> <a class="idref" href="iris.program_logic.language.html#8e77600c4e33bc8bd5940639baa9b639"><span class="id" title="variable">Λ</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="pure_exec"><span class="id" title="projection">pure_exec</span></a> : <a class="idref" href="iris.program_logic.language.html#7f48d4a68765673379b41e1b1ee20edf"><span class="id" title="variable">φ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="../html-stdpp/stdpp.relations.html#nsteps"><span class="id" title="inductive">relations.nsteps</span></a> <a class="idref" href="iris.program_logic.language.html#pure_step"><span class="id" title="record">pure_step</span></a> <a class="idref" href="iris.program_logic.language.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="iris.program_logic.language.html#e1"><span class="id" title="variable">e1</span></a> <a class="idref" href="iris.program_logic.language.html#e2"><span class="id" title="variable">e2</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="pure_step_ctx"><span class="id" title="lemma">pure_step_ctx</span></a> <span class="id" title="var">K</span> `{!@<a class="idref" href="iris.program_logic.language.html#LanguageCtx"><span class="id" title="class">LanguageCtx</span></a> <a class="idref" href="iris.program_logic.language.html#8e77600c4e33bc8bd5940639baa9b639"><span class="id" title="variable">Λ</span></a> <a class="idref" href="iris.program_logic.language.html#K"><span class="id" title="variable">K</span></a>} <span class="id" title="var">e1</span> <span class="id" title="var">e2</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="iris.program_logic.language.html#pure_step"><span class="id" title="record">pure_step</span></a> <a class="idref" href="iris.program_logic.language.html#e1"><span class="id" title="variable">e1</span></a> <a class="idref" href="iris.program_logic.language.html#e2"><span class="id" title="variable">e2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="iris.program_logic.language.html#pure_step"><span class="id" title="record">pure_step</span></a> (<a class="idref" href="iris.program_logic.language.html#K"><span class="id" title="variable">K</span></a> <a class="idref" href="iris.program_logic.language.html#e1"><span class="id" title="variable">e1</span></a>) (<a class="idref" href="iris.program_logic.language.html#K"><span class="id" title="variable">K</span></a> <a class="idref" href="iris.program_logic.language.html#e2"><span class="id" title="variable">e2</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">Hred</span> <span class="id" title="var">Hstep</span>]. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="iris.program_logic.language.html#reducible_no_obs"><span class="id" title="definition">reducible_no_obs</span></a> <span class="id" title="tactic">in</span> *. <span class="id" title="var">naive_solver</span> <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="iris.program_logic.language.html#fill_step"><span class="id" title="method">fill_step</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> σ1 <span class="id" title="var">κ</span> <span class="id" title="var">e2'</span> σ2 <span class="id" title="var">efs</span> <span class="id" title="var">Hpstep</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="iris.program_logic.language.html#fill_step_inv"><span class="id" title="method">fill_step_inv</span></a> <span class="id" title="var">e1</span> σ1 <span class="id" title="var">κ</span> <span class="id" title="var">e2'</span> σ2 <span class="id" title="var">efs</span>) <span class="id" title="keyword">as</span> (<span class="id" title="var">e2''</span> &amp; -&gt; &amp; ?); [|<span class="id" title="tactic">exact</span> <span class="id" title="var">Hpstep</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<span class="id" title="var">Hred</span> σ1) <span class="id" title="keyword">as</span> (? &amp; ? &amp; ? &amp; ?); <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="iris.program_logic.language.html#val_stuck"><span class="id" title="lemma">val_stuck</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">edestruct</span> (<span class="id" title="var">Hstep</span> σ1 <span class="id" title="var">κ</span> <span class="id" title="var">e2''</span> σ2 <span class="id" title="var">efs</span>) <span class="id" title="keyword">as</span> (? &amp; -&gt; &amp; -&gt; &amp; -&gt;); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="pure_step_nsteps_ctx"><span class="id" title="lemma">pure_step_nsteps_ctx</span></a> <span class="id" title="var">K</span> `{!@<a class="idref" href="iris.program_logic.language.html#LanguageCtx"><span class="id" title="class">LanguageCtx</span></a> <a class="idref" href="iris.program_logic.language.html#8e77600c4e33bc8bd5940639baa9b639"><span class="id" title="variable">Λ</span></a> <a class="idref" href="iris.program_logic.language.html#K"><span class="id" title="variable">K</span></a>} <span class="id" title="var">n</span> <span class="id" title="var">e1</span> <span class="id" title="var">e2</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="../html-stdpp/stdpp.relations.html#nsteps"><span class="id" title="inductive">relations.nsteps</span></a> <a class="idref" href="iris.program_logic.language.html#pure_step"><span class="id" title="record">pure_step</span></a> <a class="idref" href="iris.program_logic.language.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="iris.program_logic.language.html#e1"><span class="id" title="variable">e1</span></a> <a class="idref" href="iris.program_logic.language.html#e2"><span class="id" title="variable">e2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="../html-stdpp/stdpp.relations.html#nsteps"><span class="id" title="inductive">relations.nsteps</span></a> <a class="idref" href="iris.program_logic.language.html#pure_step"><span class="id" title="record">pure_step</span></a> <a class="idref" href="iris.program_logic.language.html#n"><span class="id" title="variable">n</span></a> (<a class="idref" href="iris.program_logic.language.html#K"><span class="id" title="variable">K</span></a> <a class="idref" href="iris.program_logic.language.html#e1"><span class="id" title="variable">e1</span></a>) (<a class="idref" href="iris.program_logic.language.html#K"><span class="id" title="variable">K</span></a> <a class="idref" href="iris.program_logic.language.html#e2"><span class="id" title="variable">e2</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="../html-stdpp/stdpp.relations.html#nsteps_congruence"><span class="id" title="lemma">nsteps_congruence</span></a>, <a class="idref" href="iris.program_logic.language.html#pure_step_ctx"><span class="id" title="lemma">pure_step_ctx</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="rtc_pure_step_ctx"><span class="id" title="lemma">rtc_pure_step_ctx</span></a> <span class="id" title="var">K</span> `{!@<a class="idref" href="iris.program_logic.language.html#LanguageCtx"><span class="id" title="class">LanguageCtx</span></a> <a class="idref" href="iris.program_logic.language.html#8e77600c4e33bc8bd5940639baa9b639"><span class="id" title="variable">Λ</span></a> <a class="idref" href="iris.program_logic.language.html#K"><span class="id" title="variable">K</span></a>} <span class="id" title="var">e1</span> <span class="id" title="var">e2</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="../html-stdpp/stdpp.relations.html#rtc"><span class="id" title="inductive">rtc</span></a> <a class="idref" href="iris.program_logic.language.html#pure_step"><span class="id" title="record">pure_step</span></a> <a class="idref" href="iris.program_logic.language.html#e1"><span class="id" title="variable">e1</span></a> <a class="idref" href="iris.program_logic.language.html#e2"><span class="id" title="variable">e2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="../html-stdpp/stdpp.relations.html#rtc"><span class="id" title="inductive">rtc</span></a> <a class="idref" href="iris.program_logic.language.html#pure_step"><span class="id" title="record">pure_step</span></a> (<a class="idref" href="iris.program_logic.language.html#K"><span class="id" title="variable">K</span></a> <a class="idref" href="iris.program_logic.language.html#e1"><span class="id" title="variable">e1</span></a>) (<a class="idref" href="iris.program_logic.language.html#K"><span class="id" title="variable">K</span></a> <a class="idref" href="iris.program_logic.language.html#e2"><span class="id" title="variable">e2</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="../html-stdpp/stdpp.relations.html#rtc_congruence"><span class="id" title="lemma">rtc_congruence</span></a>, <a class="idref" href="iris.program_logic.language.html#pure_step_ctx"><span class="id" title="lemma">pure_step_ctx</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;We&nbsp;do&nbsp;not&nbsp;make&nbsp;this&nbsp;an&nbsp;instance&nbsp;because&nbsp;it&nbsp;is&nbsp;awfully&nbsp;general.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="pure_exec_ctx"><span class="id" title="lemma">pure_exec_ctx</span></a> <span class="id" title="var">K</span> `{!@<a class="idref" href="iris.program_logic.language.html#LanguageCtx"><span class="id" title="class">LanguageCtx</span></a> <a class="idref" href="iris.program_logic.language.html#8e77600c4e33bc8bd5940639baa9b639"><span class="id" title="variable">Λ</span></a> <a class="idref" href="iris.program_logic.language.html#K"><span class="id" title="variable">K</span></a>} φ <span class="id" title="var">n</span> <span class="id" title="var">e1</span> <span class="id" title="var">e2</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="iris.program_logic.language.html#PureExec"><span class="id" title="class">PureExec</span></a> <a class="idref" href="iris.program_logic.language.html#7f48d4a68765673379b41e1b1ee20edf"><span class="id" title="variable">φ</span></a> <a class="idref" href="iris.program_logic.language.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="iris.program_logic.language.html#e1"><span class="id" title="variable">e1</span></a> <a class="idref" href="iris.program_logic.language.html#e2"><span class="id" title="variable">e2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="iris.program_logic.language.html#PureExec"><span class="id" title="class">PureExec</span></a> <a class="idref" href="iris.program_logic.language.html#7f48d4a68765673379b41e1b1ee20edf"><span class="id" title="variable">φ</span></a> <a class="idref" href="iris.program_logic.language.html#n"><span class="id" title="variable">n</span></a> (<a class="idref" href="iris.program_logic.language.html#K"><span class="id" title="variable">K</span></a> <a class="idref" href="iris.program_logic.language.html#e1"><span class="id" title="variable">e1</span></a>) (<a class="idref" href="iris.program_logic.language.html#K"><span class="id" title="variable">K</span></a> <a class="idref" href="iris.program_logic.language.html#e2"><span class="id" title="variable">e2</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="iris.program_logic.language.html#PureExec"><span class="id" title="class">PureExec</span></a>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="iris.program_logic.language.html#pure_step_nsteps_ctx"><span class="id" title="lemma">pure_step_nsteps_ctx</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;This&nbsp;is&nbsp;a&nbsp;family&nbsp;of&nbsp;frequent&nbsp;assumptions&nbsp;for&nbsp;PureExec&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Class</span> <a name="IntoVal"><span class="id" title="record">IntoVal</span></a> (<span class="id" title="var">e</span> : <a class="idref" href="iris.program_logic.language.html#expr"><span class="id" title="projection">expr</span></a> <a class="idref" href="iris.program_logic.language.html#8e77600c4e33bc8bd5940639baa9b639"><span class="id" title="variable">Λ</span></a>) (<span class="id" title="var">v</span> : <a class="idref" href="iris.program_logic.language.html#val"><span class="id" title="projection">val</span></a> <a class="idref" href="iris.program_logic.language.html#8e77600c4e33bc8bd5940639baa9b639"><span class="id" title="variable">Λ</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a name="into_val"><span class="id" title="projection">into_val</span></a> : <a class="idref" href="iris.program_logic.language.html#of_val"><span class="id" title="projection">of_val</span></a> <a class="idref" href="iris.program_logic.language.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="iris.program_logic.language.html#e"><span class="id" title="variable">e</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Class</span> <a name="AsVal"><span class="id" title="record">AsVal</span></a> (<span class="id" title="var">e</span> : <a class="idref" href="iris.program_logic.language.html#expr"><span class="id" title="projection">expr</span></a> <a class="idref" href="iris.program_logic.language.html#8e77600c4e33bc8bd5940639baa9b639"><span class="id" title="variable">Λ</span></a>) := <a name="as_val"><span class="id" title="projection">as_val</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="iris.program_logic.language.html#of_val"><span class="id" title="projection">of_val</span></a> <a class="idref" href="iris.program_logic.language.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="iris.program_logic.language.html#e"><span class="id" title="variable">e</span></a>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;There&nbsp;is&nbsp;no&nbsp;instance&nbsp;<span class="inlinecode"><span class="id" title="var">IntoVal</span></span> <span class="inlinecode">→</span> <span class="inlinecode"><span class="id" title="var">AsVal</span></span>&nbsp;as&nbsp;often&nbsp;one&nbsp;can&nbsp;solve&nbsp;<span class="inlinecode"><span class="id" title="var">AsVal</span></span>&nbsp;more<br/>
&nbsp;&nbsp;efficiently&nbsp;since&nbsp;no&nbsp;witness&nbsp;has&nbsp;to&nbsp;be&nbsp;computed.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Global Instance</span> <a name="as_vals_of_val"><span class="id" title="instance">as_vals_of_val</span></a> <span class="id" title="var">vs</span> : <a class="idref" href="../html-stdpp/stdpp.base.html#TCForall"><span class="id" title="class">TCForall</span></a> <a class="idref" href="iris.program_logic.language.html#AsVal"><span class="id" title="class">AsVal</span></a> (<a class="idref" href="iris.program_logic.language.html#of_val"><span class="id" title="projection">of_val</span></a> <a class="idref" href="../html-stdpp/stdpp.base.html#2eea06883886179dcc86cdc5a1870594"><span class="id" title="notation">&lt;$&gt;</span></a> <a class="idref" href="iris.program_logic.language.html#vs"><span class="id" title="variable">vs</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="../html-stdpp/stdpp.list.html#TCForall_Forall"><span class="id" title="lemma">TCForall_Forall</span></a>, <a class="idref" href="../html-stdpp/stdpp.list.html#Forall_fmap"><span class="id" title="lemma">Forall_fmap</span></a>, <a class="idref" href="../html-stdpp/stdpp.list.html#Forall_true"><span class="id" title="lemma">Forall_true</span></a>=&gt; <span class="id" title="var">v</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="iris.program_logic.language.html#AsVal"><span class="id" title="class">AsVal</span></a> /=; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="as_val_is_Some"><span class="id" title="lemma">as_val_is_Some</span></a> <span class="id" title="var">e</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="iris.program_logic.language.html#of_val"><span class="id" title="projection">of_val</span></a> <a class="idref" href="iris.program_logic.language.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="iris.program_logic.language.html#e"><span class="id" title="variable">e</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="../html-stdpp/stdpp.option.html#is_Some"><span class="id" title="definition">is_Some</span></a> (<a class="idref" href="iris.program_logic.language.html#to_val"><span class="id" title="projection">to_val</span></a> <a class="idref" href="iris.program_logic.language.html#e"><span class="id" title="variable">e</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span> [<span class="id" title="var">v</span> &lt;-]. <span class="id" title="tactic">rewrite</span> <a class="idref" href="iris.program_logic.language.html#to_of_val"><span class="id" title="lemma">to_of_val</span></a>. <span class="id" title="tactic">eauto</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="prim_step_not_stuck"><span class="id" title="lemma">prim_step_not_stuck</span></a> <span class="id" title="var">e</span> σ <span class="id" title="var">κ</span> <span class="id" title="var">e'</span> σ' <span class="id" title="var">efs</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="iris.program_logic.language.html#prim_step"><span class="id" title="projection">prim_step</span></a> <a class="idref" href="iris.program_logic.language.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="iris.program_logic.language.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a> <a class="idref" href="iris.program_logic.language.html#29d7d9bf2d713ce949c9fed315ed8ffb"><span class="id" title="variable">κ</span></a> <a class="idref" href="iris.program_logic.language.html#e'"><span class="id" title="variable">e'</span></a> <a class="idref" href="iris.program_logic.language.html#4394a2ef16b8915a5209b8b27258ea45"><span class="id" title="variable">σ'</span></a> <a class="idref" href="iris.program_logic.language.html#efs"><span class="id" title="variable">efs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="iris.program_logic.language.html#not_stuck"><span class="id" title="definition">not_stuck</span></a> <a class="idref" href="iris.program_logic.language.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="iris.program_logic.language.html#3122c41ebe889f745cb9bbe1c92165c3"><span class="id" title="variable">σ</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="iris.program_logic.language.html#not_stuck"><span class="id" title="definition">not_stuck</span></a> /<a class="idref" href="iris.program_logic.language.html#reducible"><span class="id" title="definition">reducible</span></a>. <span class="id" title="tactic">eauto</span> 10. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="rtc_pure_step_val"><span class="id" title="lemma">rtc_pure_step_val</span></a> `{!<a class="idref" href="../html-stdpp/stdpp.base.html#Inhabited"><span class="id" title="class">Inhabited</span></a> (<a class="idref" href="iris.program_logic.language.html#state"><span class="id" title="projection">state</span></a> <a class="idref" href="iris.program_logic.language.html#8e77600c4e33bc8bd5940639baa9b639"><span class="id" title="variable">Λ</span></a>)} <span class="id" title="var">v</span> <span class="id" title="var">e</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="../html-stdpp/stdpp.relations.html#rtc"><span class="id" title="inductive">rtc</span></a> <a class="idref" href="iris.program_logic.language.html#pure_step"><span class="id" title="record">pure_step</span></a> (<a class="idref" href="iris.program_logic.language.html#of_val"><span class="id" title="projection">of_val</span></a> <a class="idref" href="iris.program_logic.language.html#v"><span class="id" title="variable">v</span></a>) <a class="idref" href="iris.program_logic.language.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="iris.program_logic.language.html#to_val"><span class="id" title="projection">to_val</span></a> <a class="idref" href="iris.program_logic.language.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="iris.program_logic.language.html#v"><span class="id" title="variable">v</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ?; <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="iris.program_logic.language.html#to_of_val"><span class="id" title="lemma">to_of_val</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>; <span class="id" title="tactic">symmetry</span>; <span class="id" title="tactic">eapply</span> <a class="idref" href="../html-stdpp/stdpp.relations.html#rtc_nf"><span class="id" title="lemma">rtc_nf</span></a>; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">e'</span> [<span class="id" title="var">Hstep</span> <span class="id" title="var">_</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">Hstep</span> <a class="idref" href="../html-stdpp/stdpp.base.html#inhabitant"><span class="id" title="method">inhabitant</span></a>) <span class="id" title="keyword">as</span> (?&amp;?&amp;?&amp;<span class="id" title="var">Hval</span>%<a class="idref" href="iris.program_logic.language.html#val_stuck"><span class="id" title="lemma">val_stuck</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="iris.program_logic.language.html#to_of_val"><span class="id" title="lemma">to_of_val</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hval</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Let thread pools <span class="inlinecode"><a class="idref" href="iris.heap_lang.proph_erasure.html#t1"><span class="id" title="variable">t1</span></a></span> and <span class="inlinecode"><a class="idref" href="iris.program_logic.language.html#t3"><span class="id" title="variable">t3</span></a></span> be such that each thread in <span class="inlinecode"><a class="idref" href="iris.heap_lang.proph_erasure.html#t1"><span class="id" title="variable">t1</span></a></span> makes
   (zero or more) pure steps to the corresponding thread in <span class="inlinecode"><a class="idref" href="iris.program_logic.language.html#t3"><span class="id" title="variable">t3</span></a></span>. Furthermore,
   let <span class="inlinecode"><a class="idref" href="iris.heap_lang.proph_erasure.html#t2"><span class="id" title="variable">t2</span></a></span> be a thread pool such that <span class="inlinecode"><a class="idref" href="iris.heap_lang.proph_erasure.html#t1"><span class="id" title="variable">t1</span></a></span> under state <span class="inlinecode">σ1</span> makes a (single)
   step to thread pool <span class="inlinecode"><a class="idref" href="iris.heap_lang.proph_erasure.html#t2"><span class="id" title="variable">t2</span></a></span> and state <span class="inlinecode">σ2</span>. In this situation, either the step
   from <span class="inlinecode"><a class="idref" href="iris.heap_lang.proph_erasure.html#t1"><span class="id" title="variable">t1</span></a></span> to <span class="inlinecode"><a class="idref" href="iris.heap_lang.proph_erasure.html#t2"><span class="id" title="variable">t2</span></a></span> corresponds to one of the pure steps between <span class="inlinecode"><a class="idref" href="iris.heap_lang.proph_erasure.html#t1"><span class="id" title="variable">t1</span></a></span> and <span class="inlinecode"><a class="idref" href="iris.program_logic.language.html#t3"><span class="id" title="variable">t3</span></a></span>,
   or, there is an <span class="inlinecode"><a class="idref" href="iris.proofmode.monpred.html#i"><span class="id" title="variable">i</span></a></span> such that <span class="inlinecode"><a class="idref" href="iris.proofmode.monpred.html#i"><span class="id" title="variable">i</span></a></span>th thread does not participate in the
   pure steps between <span class="inlinecode"><a class="idref" href="iris.heap_lang.proph_erasure.html#t1"><span class="id" title="variable">t1</span></a></span> and <span class="inlinecode"><a class="idref" href="iris.program_logic.language.html#t3"><span class="id" title="variable">t3</span></a></span> and <span class="inlinecode"><a class="idref" href="iris.heap_lang.proph_erasure.html#t2"><span class="id" title="variable">t2</span></a></span> corresponds to taking a step in
   the <span class="inlinecode"><a class="idref" href="iris.proofmode.monpred.html#i"><span class="id" title="variable">i</span></a></span>th thread starting from <span class="inlinecode"><a class="idref" href="iris.heap_lang.proph_erasure.html#t1"><span class="id" title="variable">t1</span></a></span>. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="erased_step_pure_step_tp"><span class="id" title="lemma">erased_step_pure_step_tp</span></a> <span class="id" title="var">t1</span> σ1 <span class="id" title="var">t2</span> σ2 <span class="id" title="var">t3</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="iris.program_logic.language.html#erased_step"><span class="id" title="definition">erased_step</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="iris.program_logic.language.html#t1"><span class="id" title="variable">t1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="iris.program_logic.language.html#1cc6be414ab52727f77057b4b030dde0"><span class="id" title="variable">σ1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="iris.program_logic.language.html#t2"><span class="id" title="variable">t2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="iris.program_logic.language.html#a4d9266a5be6c0504292c8910a50c288"><span class="id" title="variable">σ2</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="iris.program_logic.language.html#pure_steps_tp"><span class="id" title="abbreviation">pure_steps_tp</span></a> <a class="idref" href="iris.program_logic.language.html#t1"><span class="id" title="variable">t1</span></a> <a class="idref" href="iris.program_logic.language.html#t3"><span class="id" title="variable">t3</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#9b27a55e56b4bfcc20e5b8cbd0156a3e"><span class="id" title="notation">(</span></a><a class="idref" href="iris.program_logic.language.html#1cc6be414ab52727f77057b4b030dde0"><span class="id" title="variable">σ1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="iris.program_logic.language.html#a4d9266a5be6c0504292c8910a50c288"><span class="id" title="variable">σ2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="iris.program_logic.language.html#pure_steps_tp"><span class="id" title="abbreviation">pure_steps_tp</span></a> <a class="idref" href="iris.program_logic.language.html#t2"><span class="id" title="variable">t2</span></a> <a class="idref" href="iris.program_logic.language.html#t3"><span class="id" title="variable">t3</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#9b27a55e56b4bfcc20e5b8cbd0156a3e"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#9b27a55e56b4bfcc20e5b8cbd0156a3e"><span class="id" title="notation">∨</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#9b27a55e56b4bfcc20e5b8cbd0156a3e"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <span class="id" title="var">i</span> <span class="id" title="var">e</span> <span class="id" title="var">efs</span> <span class="id" title="var">e'</span> <span class="id" title="var">κ</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="iris.program_logic.language.html#t1"><span class="id" title="variable">t1</span></a> <a class="idref" href="../html-stdpp/stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="iris.program_logic.language.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="iris.program_logic.language.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="iris.program_logic.language.html#t3"><span class="id" title="variable">t3</span></a> <a class="idref" href="../html-stdpp/stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="iris.program_logic.language.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="iris.program_logic.language.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="iris.program_logic.language.html#t2"><span class="id" title="variable">t2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="../html-stdpp/stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><a class="idref" href="iris.program_logic.language.html#i"><span class="id" title="variable">i</span></a><a class="idref" href="../html-stdpp/stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a><a class="idref" href="iris.program_logic.language.html#e'"><span class="id" title="variable">e'</span></a><a class="idref" href="../html-stdpp/stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a><a class="idref" href="iris.program_logic.language.html#t1"><span class="id" title="variable">t1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="iris.program_logic.language.html#efs"><span class="id" title="variable">efs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="iris.program_logic.language.html#prim_step"><span class="id" title="projection">prim_step</span></a> <a class="idref" href="iris.program_logic.language.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="iris.program_logic.language.html#1cc6be414ab52727f77057b4b030dde0"><span class="id" title="variable">σ1</span></a> <a class="idref" href="iris.program_logic.language.html#29d7d9bf2d713ce949c9fed315ed8ffb"><span class="id" title="variable">κ</span></a> <a class="idref" href="iris.program_logic.language.html#e'"><span class="id" title="variable">e'</span></a> <a class="idref" href="iris.program_logic.language.html#a4d9266a5be6c0504292c8910a50c288"><span class="id" title="variable">σ2</span></a> <a class="idref" href="iris.program_logic.language.html#efs"><span class="id" title="variable">efs</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#9b27a55e56b4bfcc20e5b8cbd0156a3e"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">κ</span> [<span class="id" title="var">e</span> σ <span class="id" title="var">e'</span> σ' ? <span class="id" title="var">t11</span> <span class="id" title="var">t12</span> ?? <span class="id" title="var">Hstep</span>]] <span class="id" title="var">Hps</span>; <span class="id" title="var">simplify_eq</span>/=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="../html-stdpp/stdpp.list.html#Forall2_app_inv_l"><span class="id" title="lemma">Forall2_app_inv_l</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hps</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">as</span> (<span class="id" title="var">t31</span>&amp;?&amp;<span class="id" title="var">Hpsteps</span>&amp;(<span class="id" title="var">e''</span>&amp;<span class="id" title="var">t32</span>&amp;<span class="id" title="var">Hps</span>&amp;?&amp;-&gt;)%<a class="idref" href="../html-stdpp/stdpp.list.html#Forall2_cons_inv_l"><span class="id" title="lemma">Forall2_cons_inv_l</span></a>&amp;-&gt;).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hps</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">e</span>|<span class="id" title="var">e1</span> <span class="id" title="var">e2</span> <span class="id" title="var">e3</span> [<span class="id" title="var">_</span> <span class="id" title="var">Hprs</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <span class="id" title="var">t11</span>), <span class="id" title="var">e</span>, <span class="id" title="var">efs</span>, <span class="id" title="var">e'</span>, <span class="id" title="var">κ</span>; <span class="id" title="var">split_and</span>!; <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="../html-stdpp/stdpp.list.html#lookup_app_r"><span class="id" title="lemma">lookup_app_r</span></a> // <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.sub_diag"><span class="id" title="lemma">Nat.sub_diag</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="../html-stdpp/stdpp.list.html#Forall2_length"><span class="id" title="lemma">Forall2_length</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hpsteps</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="../html-stdpp/stdpp.list.html#lookup_app_r"><span class="id" title="lemma">lookup_app_r</span></a> <span class="id" title="var">Hpsteps</span> // <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.sub_diag"><span class="id" title="lemma">Nat.sub_diag</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="../html-stdpp/stdpp.list.html#insert_app_r_alt"><span class="id" title="lemma">insert_app_r_alt</span></a> // <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.sub_diag"><span class="id" title="lemma">Nat.sub_diag</span></a> /= -<a class="idref" href="../html-stdpp/stdpp.base.html#assoc_L"><span class="id" title="lemma">assoc_L</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">edestruct</span> <span class="id" title="var">Hprs</span> <span class="id" title="keyword">as</span> (?&amp;?&amp;?&amp;?); <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">left</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="../html-stdpp/stdpp.base.html#right_id_L"><span class="id" title="lemma">right_id_L</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Lists.List.html#Forall2_app"><span class="id" title="lemma">Forall2_app</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="iris.program_logic.language.html#language"><span class="id" title="section">language</span></a>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a name="pure_steps_tp"><span class="id" title="abbreviation">pure_steps_tp</span></a> := (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Lists.List.html#Forall2"><span class="id" title="inductive">Forall2</span></a> (<a class="idref" href="../html-stdpp/stdpp.relations.html#rtc"><span class="id" title="inductive">rtc</span></a> <a class="idref" href="iris.program_logic.language.html#pure_step"><span class="id" title="record">pure_step</span></a>)).<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
