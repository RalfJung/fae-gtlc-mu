<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="../overview.html">Project Page</a>
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">iris.heap_lang.lib.atomic_heap</h1>

<div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="var">iris.bi.lib</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="iris.bi.lib.fractional.html#"><span class="id" title="library">fractional</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">iris.proofmode</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="iris.proofmode.tactics.html#"><span class="id" title="library">tactics</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">iris.program_logic</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <a class="idref" href="iris.program_logic.atomic.html#"><span class="id" title="library">atomic</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">iris.heap_lang</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <a class="idref" href="iris.heap_lang.lifting.html#"><span class="id" title="library">lifting</span></a> <a class="idref" href="iris.heap_lang.notation.html#"><span class="id" title="library">notation</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">iris.heap_lang</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="iris.heap_lang.proofmode.html#"><span class="id" title="library">proofmode</span></a>.<br/>
<span class="id" title="keyword">Set</span> <span class="id" title="var">Default</span> <span class="id" title="keyword">Proof</span> <span class="id" title="var">Using</span> "Type".<br/>

<br/>
</div>

<div class="doc">
A general logically atomic interface for a heap. 
</div>
<div class="code">
<span class="id" title="keyword">Class</span> <a name="atomic_heap"><span class="id" title="record">atomic_heap</span></a> {<span class="id" title="var">Σ</span>} `{!<a class="idref" href="iris.heap_lang.lifting.html#heapG"><span class="id" title="class">heapG</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#e15c0eb40e61adefe95778c26e7840f6"><span class="id" title="variable">Σ</span></a>} := <a name="AtomicHeap"><span class="id" title="constructor">AtomicHeap</span></a> {<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;--&nbsp;operations&nbsp;--&nbsp;*)</span><br/>
&nbsp;&nbsp;<a name="alloc"><span class="id" title="projection">alloc</span></a> : <a class="idref" href="iris.heap_lang.lang.html#heap_lang.val"><span class="id" title="inductive">val</span></a>;<br/>
&nbsp;&nbsp;<a name="load"><span class="id" title="projection">load</span></a> : <a class="idref" href="iris.heap_lang.lang.html#heap_lang.val"><span class="id" title="inductive">val</span></a>;<br/>
&nbsp;&nbsp;<a name="store"><span class="id" title="projection">store</span></a> : <a class="idref" href="iris.heap_lang.lang.html#heap_lang.val"><span class="id" title="inductive">val</span></a>;<br/>
&nbsp;&nbsp;<a name="cmpxchg"><span class="id" title="projection">cmpxchg</span></a> : <a class="idref" href="iris.heap_lang.lang.html#heap_lang.val"><span class="id" title="inductive">val</span></a>;<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;--&nbsp;predicates&nbsp;--&nbsp;*)</span><br/>
&nbsp;&nbsp;<a name="mapsto"><span class="id" title="projection">mapsto</span></a> (<span class="id" title="var">l</span> : <a class="idref" href="iris.heap_lang.locations.html#loc"><span class="id" title="record">loc</span></a>) (<span class="id" title="var">q</span>: <a class="idref" href="../html-stdpp/stdpp.numbers.html#Qp"><span class="id" title="record">Qp</span></a>) (<span class="id" title="var">v</span> : <a class="idref" href="iris.heap_lang.lang.html#heap_lang.val"><span class="id" title="inductive">val</span></a>) : <a class="idref" href="iris.base_logic.lib.iprop.html#iProp_solution.iProp"><span class="id" title="abbreviation">iProp</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#e15c0eb40e61adefe95778c26e7840f6"><span class="id" title="variable">Σ</span></a>;<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;--&nbsp;mapsto&nbsp;properties&nbsp;--&nbsp;*)</span><br/>
&nbsp;&nbsp;<a name="mapsto_timeless"><span class="id" title="projection">mapsto_timeless</span></a> <span class="id" title="var">l</span> <span class="id" title="var">q</span> <span class="id" title="var">v</span> :&gt; <a class="idref" href="iris.bi.derived_connectives.html#Timeless"><span class="id" title="class">Timeless</span></a> (<a class="idref" href="iris.heap_lang.lib.atomic_heap.html#mapsto"><span class="id" title="method">mapsto</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#v"><span class="id" title="variable">v</span></a>);<br/>
&nbsp;&nbsp;<a name="mapsto_fractional"><span class="id" title="projection">mapsto_fractional</span></a> <span class="id" title="var">l</span> <span class="id" title="var">v</span> :&gt; <a class="idref" href="iris.bi.lib.fractional.html#Fractional"><span class="id" title="class">Fractional</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <span class="id" title="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#mapsto"><span class="id" title="method">mapsto</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#v"><span class="id" title="variable">v</span></a>);<br/>
&nbsp;&nbsp;<a name="mapsto_as_fractional"><span class="id" title="projection">mapsto_as_fractional</span></a> <span class="id" title="var">l</span> <span class="id" title="var">q</span> <span class="id" title="var">v</span> :&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="iris.bi.lib.fractional.html#AsFractional"><span class="id" title="class">AsFractional</span></a> (<a class="idref" href="iris.heap_lang.lib.atomic_heap.html#mapsto"><span class="id" title="method">mapsto</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#v"><span class="id" title="variable">v</span></a>) (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <span class="id" title="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#mapsto"><span class="id" title="method">mapsto</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#v"><span class="id" title="variable">v</span></a>) <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#q"><span class="id" title="variable">q</span></a>;<br/>
&nbsp;&nbsp;<a name="mapsto_agree"><span class="id" title="projection">mapsto_agree</span></a> <span class="id" title="var">l</span> <span class="id" title="var">q1</span> <span class="id" title="var">q2</span> <span class="id" title="var">v1</span> <span class="id" title="var">v2</span> : <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#mapsto"><span class="id" title="method">mapsto</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#q1"><span class="id" title="variable">q1</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#v1"><span class="id" title="variable">v1</span></a> <a class="idref" href="iris.bi.interface.html#0f70793a7efc24c230ef5e3a6ac95b68"><span class="id" title="notation">-∗</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#mapsto"><span class="id" title="method">mapsto</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#q2"><span class="id" title="variable">q2</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#v2"><span class="id" title="variable">v2</span></a> <a class="idref" href="iris.bi.interface.html#6e96398fec71e244af9dd75e40876ca6"><span class="id" title="notation">-∗</span></a> <a class="idref" href="iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌜</span></a><a class="idref" href="iris.heap_lang.lib.atomic_heap.html#v1"><span class="id" title="variable">v1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#v2"><span class="id" title="variable">v2</span></a><a class="idref" href="iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌝</span></a>;<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;--&nbsp;operation&nbsp;specs&nbsp;--&nbsp;*)</span><br/>
&nbsp;&nbsp;<a name="alloc_spec"><span class="id" title="projection">alloc_spec</span></a> (<span class="id" title="var">v</span> : <a class="idref" href="iris.heap_lang.lang.html#heap_lang.val"><span class="id" title="inductive">val</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="iris.bi.weakestpre.html#46f028f989b7c77928a3da60193fc921"><span class="id" title="notation">{{{</span></a> <a class="idref" href="iris.bi.interface.html#1fb20ec9249c1b9a628d0af33d4b6be7"><span class="id" title="notation">True</span></a> <a class="idref" href="iris.bi.weakestpre.html#46f028f989b7c77928a3da60193fc921"><span class="id" title="notation">}}}</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#alloc"><span class="id" title="method">alloc</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="iris.bi.weakestpre.html#46f028f989b7c77928a3da60193fc921"><span class="id" title="notation">{{{</span></a> <span class="id" title="var">l</span><a class="idref" href="iris.bi.weakestpre.html#46f028f989b7c77928a3da60193fc921"><span class="id" title="notation">,</span></a> <a class="idref" href="iris.bi.weakestpre.html#46f028f989b7c77928a3da60193fc921"><span class="id" title="notation">RET</span></a> <a class="idref" href="iris.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="iris.heap_lang.lib.atomic_heap.html#l"><span class="id" title="variable">l</span></a><a class="idref" href="iris.bi.weakestpre.html#46f028f989b7c77928a3da60193fc921"><span class="id" title="notation">;</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#mapsto"><span class="id" title="method">mapsto</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#l"><span class="id" title="variable">l</span></a> 1 <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="iris.bi.weakestpre.html#46f028f989b7c77928a3da60193fc921"><span class="id" title="notation">}}}</span></a>;<br/>
&nbsp;&nbsp;<a name="load_spec"><span class="id" title="projection">load_spec</span></a> (<span class="id" title="var">l</span> : <a class="idref" href="iris.heap_lang.locations.html#loc"><span class="id" title="record">loc</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="iris.bi.interface.html#b7d65d242d889c3e37aca6013a51bfad"><span class="id" title="notation">⊢</span></a> <a class="idref" href="iris.program_logic.atomic.html#9d3d76104a52001d4b635576eb96f514"><span class="id" title="notation">&lt;&lt;&lt;</span></a> <a class="idref" href="iris.program_logic.atomic.html#9d3d76104a52001d4b635576eb96f514"><span class="id" title="notation">∀</span></a> <a class="idref" href="iris.program_logic.atomic.html#9d3d76104a52001d4b635576eb96f514"><span class="id" title="notation">(</span></a><span class="id" title="var">v</span> : <a class="idref" href="iris.heap_lang.lang.html#heap_lang.val"><span class="id" title="inductive">val</span></a>) <span class="id" title="var">q</span><a class="idref" href="iris.program_logic.atomic.html#9d3d76104a52001d4b635576eb96f514"><span class="id" title="notation">,</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#mapsto"><span class="id" title="method">mapsto</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="iris.program_logic.atomic.html#9d3d76104a52001d4b635576eb96f514"><span class="id" title="notation">&gt;&gt;&gt;</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#load"><span class="id" title="method">load</span></a> <a class="idref" href="iris.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="iris.heap_lang.lib.atomic_heap.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="iris.program_logic.atomic.html#9d3d76104a52001d4b635576eb96f514"><span class="id" title="notation">@</span></a> <a class="idref" href="../html-stdpp/stdpp.base.html#6c0a583aa94fbbce6fcf0f655cf1cbb7"><span class="id" title="notation">⊤</span></a> <a class="idref" href="iris.program_logic.atomic.html#9d3d76104a52001d4b635576eb96f514"><span class="id" title="notation">&lt;&lt;&lt;</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#mapsto"><span class="id" title="method">mapsto</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#q"><span class="id" title="variable">q</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#v"><span class="id" title="variable">v</span></a><a class="idref" href="iris.program_logic.atomic.html#9d3d76104a52001d4b635576eb96f514"><span class="id" title="notation">,</span></a> <a class="idref" href="iris.program_logic.atomic.html#9d3d76104a52001d4b635576eb96f514"><span class="id" title="notation">RET</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="iris.program_logic.atomic.html#9d3d76104a52001d4b635576eb96f514"><span class="id" title="notation">&gt;&gt;&gt;</span></a>;<br/>
&nbsp;&nbsp;<a name="store_spec"><span class="id" title="projection">store_spec</span></a> (<span class="id" title="var">l</span> : <a class="idref" href="iris.heap_lang.locations.html#loc"><span class="id" title="record">loc</span></a>) (<span class="id" title="var">w</span> : <a class="idref" href="iris.heap_lang.lang.html#heap_lang.val"><span class="id" title="inductive">val</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="iris.bi.interface.html#b7d65d242d889c3e37aca6013a51bfad"><span class="id" title="notation">⊢</span></a> <a class="idref" href="iris.program_logic.atomic.html#9d3d76104a52001d4b635576eb96f514"><span class="id" title="notation">&lt;&lt;&lt;</span></a> <a class="idref" href="iris.program_logic.atomic.html#9d3d76104a52001d4b635576eb96f514"><span class="id" title="notation">∀</span></a> <span class="id" title="var">v</span><a class="idref" href="iris.program_logic.atomic.html#9d3d76104a52001d4b635576eb96f514"><span class="id" title="notation">,</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#mapsto"><span class="id" title="method">mapsto</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#l"><span class="id" title="variable">l</span></a> 1 <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="iris.program_logic.atomic.html#9d3d76104a52001d4b635576eb96f514"><span class="id" title="notation">&gt;&gt;&gt;</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#store"><span class="id" title="method">store</span></a> <a class="idref" href="iris.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="iris.heap_lang.lib.atomic_heap.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#w"><span class="id" title="variable">w</span></a> <a class="idref" href="iris.program_logic.atomic.html#9d3d76104a52001d4b635576eb96f514"><span class="id" title="notation">@</span></a> <a class="idref" href="../html-stdpp/stdpp.base.html#6c0a583aa94fbbce6fcf0f655cf1cbb7"><span class="id" title="notation">⊤</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="iris.program_logic.atomic.html#9d3d76104a52001d4b635576eb96f514"><span class="id" title="notation">&lt;&lt;&lt;</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#mapsto"><span class="id" title="method">mapsto</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#l"><span class="id" title="variable">l</span></a> 1 <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#w"><span class="id" title="variable">w</span></a><a class="idref" href="iris.program_logic.atomic.html#9d3d76104a52001d4b635576eb96f514"><span class="id" title="notation">,</span></a> <a class="idref" href="iris.program_logic.atomic.html#9d3d76104a52001d4b635576eb96f514"><span class="id" title="notation">RET</span></a> <a class="idref" href="iris.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="iris.heap_lang.notation.html#3127c6bc552ca21a494fc6e3474a507d"><span class="id" title="notation">()</span></a> <a class="idref" href="iris.program_logic.atomic.html#9d3d76104a52001d4b635576eb96f514"><span class="id" title="notation">&gt;&gt;&gt;</span></a>;<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;This&nbsp;spec&nbsp;is&nbsp;slightly&nbsp;weaker&nbsp;than&nbsp;it&nbsp;could&nbsp;be:&nbsp;It&nbsp;is&nbsp;sufficient&nbsp;for&nbsp;<span class="inlinecode"><span class="id" title="var">w1</span></span><br/>
&nbsp;&nbsp;*or*&nbsp;<span class="inlinecode"><span class="id" title="var">v</span></span>&nbsp;to&nbsp;be&nbsp;unboxed.&nbsp;&nbsp;However,&nbsp;by&nbsp;writing&nbsp;it&nbsp;this&nbsp;way&nbsp;the&nbsp;<span class="inlinecode"><span class="id" title="var">val_is_unboxed</span></span><br/>
&nbsp;&nbsp;is&nbsp;outside&nbsp;the&nbsp;atomic&nbsp;triple,&nbsp;which&nbsp;makes&nbsp;it&nbsp;much&nbsp;easier&nbsp;to&nbsp;use&nbsp;--&nbsp;and&nbsp;the<br/>
&nbsp;&nbsp;spec&nbsp;is&nbsp;still&nbsp;good&nbsp;enough&nbsp;for&nbsp;all&nbsp;our&nbsp;applications.<br/>
&nbsp;&nbsp;The&nbsp;postcondition&nbsp;deliberately&nbsp;does&nbsp;not&nbsp;use&nbsp;<span class="inlinecode"><span class="id" title="var">bool_decide</span></span>&nbsp;so&nbsp;that&nbsp;users&nbsp;can<br/>
&nbsp;&nbsp;<span class="inlinecode"><span class="id" title="tactic">destruct</span></span> <span class="inlinecode">(<span class="id" title="var">decide</span></span> <span class="inlinecode">(<span class="id" title="var">a</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">b</span>))</span>&nbsp;and&nbsp;it&nbsp;will&nbsp;simplify&nbsp;in&nbsp;both&nbsp;places.&nbsp;*)</span><br/>
&nbsp;&nbsp;<a name="cmpxchg_spec"><span class="id" title="projection">cmpxchg_spec</span></a> (<span class="id" title="var">l</span> : <a class="idref" href="iris.heap_lang.locations.html#loc"><span class="id" title="record">loc</span></a>) (<span class="id" title="var">w1</span> <span class="id" title="var">w2</span> : <a class="idref" href="iris.heap_lang.lang.html#heap_lang.val"><span class="id" title="inductive">val</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="iris.heap_lang.lang.html#heap_lang.val_is_unboxed"><span class="id" title="definition">val_is_unboxed</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#w1"><span class="id" title="variable">w1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="iris.bi.interface.html#b7d65d242d889c3e37aca6013a51bfad"><span class="id" title="notation">⊢</span></a> <a class="idref" href="iris.program_logic.atomic.html#9d3d76104a52001d4b635576eb96f514"><span class="id" title="notation">&lt;&lt;&lt;</span></a> <a class="idref" href="iris.program_logic.atomic.html#9d3d76104a52001d4b635576eb96f514"><span class="id" title="notation">∀</span></a> <span class="id" title="var">v</span><a class="idref" href="iris.program_logic.atomic.html#9d3d76104a52001d4b635576eb96f514"><span class="id" title="notation">,</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#mapsto"><span class="id" title="method">mapsto</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#l"><span class="id" title="variable">l</span></a> 1 <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="iris.program_logic.atomic.html#9d3d76104a52001d4b635576eb96f514"><span class="id" title="notation">&gt;&gt;&gt;</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#cmpxchg"><span class="id" title="method">cmpxchg</span></a> <a class="idref" href="iris.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="iris.heap_lang.lib.atomic_heap.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#w1"><span class="id" title="variable">w1</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#w2"><span class="id" title="variable">w2</span></a> <a class="idref" href="iris.program_logic.atomic.html#9d3d76104a52001d4b635576eb96f514"><span class="id" title="notation">@</span></a> <a class="idref" href="../html-stdpp/stdpp.base.html#6c0a583aa94fbbce6fcf0f655cf1cbb7"><span class="id" title="notation">⊤</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="iris.program_logic.atomic.html#9d3d76104a52001d4b635576eb96f514"><span class="id" title="notation">&lt;&lt;&lt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.ssr.ssreflect.html#201058f4aa915cdea9258bc97aa9ee97"><span class="id" title="notation">if</span></a> <a class="idref" href="../html-stdpp/stdpp.base.html#decide"><span class="id" title="definition">decide</span></a> (<a class="idref" href="iris.heap_lang.lib.atomic_heap.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#w1"><span class="id" title="variable">w1</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.ssr.ssreflect.html#201058f4aa915cdea9258bc97aa9ee97"><span class="id" title="notation">then</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#mapsto"><span class="id" title="method">mapsto</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#l"><span class="id" title="variable">l</span></a> 1 <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#w2"><span class="id" title="variable">w2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.ssr.ssreflect.html#201058f4aa915cdea9258bc97aa9ee97"><span class="id" title="notation">else</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#mapsto"><span class="id" title="method">mapsto</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#l"><span class="id" title="variable">l</span></a> 1 <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#v"><span class="id" title="variable">v</span></a><a class="idref" href="iris.program_logic.atomic.html#9d3d76104a52001d4b635576eb96f514"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="iris.program_logic.atomic.html#9d3d76104a52001d4b635576eb96f514"><span class="id" title="notation">RET</span></a> <a class="idref" href="iris.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="iris.heap_lang.lib.atomic_heap.html#v"><span class="id" title="variable">v</span></a><a class="idref" href="iris.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <a class="idref" href="iris.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.ssr.ssreflect.html#201058f4aa915cdea9258bc97aa9ee97"><span class="id" title="notation">if</span></a> <a class="idref" href="../html-stdpp/stdpp.base.html#decide"><span class="id" title="definition">decide</span></a> (<a class="idref" href="iris.heap_lang.lib.atomic_heap.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#w1"><span class="id" title="variable">w1</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.ssr.ssreflect.html#201058f4aa915cdea9258bc97aa9ee97"><span class="id" title="notation">then</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.ssr.ssreflect.html#201058f4aa915cdea9258bc97aa9ee97"><span class="id" title="notation">else</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><a class="idref" href="iris.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">)</span></a> <a class="idref" href="iris.program_logic.atomic.html#9d3d76104a52001d4b635576eb96f514"><span class="id" title="notation">&gt;&gt;&gt;</span></a>;<br/>
}.<br/>
<span class="id" title="var">Arguments</span> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#atomic_heap"><span class="id" title="class">atomic_heap</span></a> <span class="id" title="var">_</span> {<span class="id" title="var">_</span>}.<br/>

<br/>
</div>

<div class="doc">
Notation for heap primitives, in a module so you can import it separately. 
</div>
<div class="code">
<span class="id" title="keyword">Module</span> <a name="notation"><span class="id" title="module">notation</span></a>.<br/>
<span class="id" title="keyword">Notation</span> <a name="c29330f110b7d515c205834f39414168"><span class="id" title="notation">&quot;</span></a>l ↦{ q } v" := (<a class="idref" href="iris.heap_lang.lib.atomic_heap.html#mapsto"><span class="id" title="method">mapsto</span></a> <span class="id" title="var">l</span> <span class="id" title="var">q</span> <span class="id" title="var">v</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 20, <span class="id" title="var">q</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 50, <span class="id" title="var">format</span> "l  ↦{ q }  v") : <span class="id" title="var">bi_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a name="38903c5e3a2176fcf6119ef028c07d11"><span class="id" title="notation">&quot;</span></a>l ↦ v" := (<a class="idref" href="iris.heap_lang.lib.atomic_heap.html#mapsto"><span class="id" title="method">mapsto</span></a> <span class="id" title="var">l</span> 1 <span class="id" title="var">v</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 20) : <span class="id" title="var">bi_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a name="49c018b40280222d4daae7397319a893"><span class="id" title="notation">&quot;</span></a>l ↦{ q } -" := (<a class="idref" href="iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">∃</span></a> <span class="id" title="var">v</span><a class="idref" href="iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">,</span></a> <span class="id" title="var">l</span> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#c29330f110b7d515c205834f39414168"><span class="id" title="notation">↦{</span></a><span class="id" title="var">q</span><a class="idref" href="iris.heap_lang.lib.atomic_heap.html#c29330f110b7d515c205834f39414168"><span class="id" title="notation">}</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#v"><span class="id" title="variable">v</span></a>)%<span class="id" title="var">I</span><br/>
&nbsp;&nbsp;(<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 20, <span class="id" title="var">q</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 50, <span class="id" title="var">format</span> "l  ↦{ q }  -") : <span class="id" title="var">bi_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a name="c986af5ff67f3a528c1a7b2efaf37e14"><span class="id" title="notation">&quot;</span></a>l ↦ -" := (<span class="id" title="var">l</span> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#49c018b40280222d4daae7397319a893"><span class="id" title="notation">↦{</span></a>1<a class="idref" href="iris.heap_lang.lib.atomic_heap.html#49c018b40280222d4daae7397319a893"><span class="id" title="notation">}</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#49c018b40280222d4daae7397319a893"><span class="id" title="notation">-</span></a>)%<span class="id" title="var">I</span> (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 20) : <span class="id" title="var">bi_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a name="c12c3b36ba060da6577f8b41bd8e2b52"><span class="id" title="notation">&quot;</span></a>'ref' e" := (<a class="idref" href="iris.heap_lang.lib.atomic_heap.html#alloc"><span class="id" title="method">alloc</span></a> <span class="id" title="var">e</span>) : <span class="id" title="var">expr_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a name="f1a50235b4a74144e06b5544f8b6bc99"><span class="id" title="notation">&quot;</span></a>! e" := (<a class="idref" href="iris.heap_lang.lib.atomic_heap.html#load"><span class="id" title="method">load</span></a> <span class="id" title="var">e</span>) : <span class="id" title="var">expr_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a name="1e1b9f926934eee481e97c171f436dc1"><span class="id" title="notation">&quot;</span></a>e1 &lt;- e2" := (<a class="idref" href="iris.heap_lang.lib.atomic_heap.html#store"><span class="id" title="method">store</span></a> <span class="id" title="var">e1</span> <span class="id" title="var">e2</span>) : <span class="id" title="var">expr_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a name="notation.CAS"><span class="id" title="abbreviation">CAS</span></a> <span class="id" title="var">e1</span> <span class="id" title="var">e2</span> <span class="id" title="var">e3</span> := (<a class="idref" href="iris.heap_lang.lang.html#heap_lang.Snd"><span class="id" title="constructor">Snd</span></a> (<a class="idref" href="iris.heap_lang.lib.atomic_heap.html#cmpxchg"><span class="id" title="method">cmpxchg</span></a> <span class="id" title="var">e1</span> <span class="id" title="var">e2</span> <span class="id" title="var">e3</span>)).<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#notation"><span class="id" title="module">notation</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a name="derived"><span class="id" title="section">derived</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{!<a class="idref" href="iris.heap_lang.lifting.html#heapG"><span class="id" title="class">heapG</span></a> <span class="id" title="var">Σ</span>, !<a class="idref" href="iris.heap_lang.lib.atomic_heap.html#atomic_heap"><span class="id" title="class">atomic_heap</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#e15c0eb40e61adefe95778c26e7840f6"><span class="id" title="variable">Σ</span></a>}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Import</span> <span class="id" title="var">notation</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="cas_spec"><span class="id" title="lemma">cas_spec</span></a> (<span class="id" title="var">l</span> : <a class="idref" href="iris.heap_lang.locations.html#loc"><span class="id" title="record">loc</span></a>) (<span class="id" title="var">w1</span> <span class="id" title="var">w2</span> : <a class="idref" href="iris.heap_lang.lang.html#heap_lang.val"><span class="id" title="inductive">val</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="iris.heap_lang.lang.html#heap_lang.val_is_unboxed"><span class="id" title="definition">val_is_unboxed</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#w1"><span class="id" title="variable">w1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="iris.bi.interface.html#b7d65d242d889c3e37aca6013a51bfad"><span class="id" title="notation">⊢</span></a> <a class="idref" href="iris.program_logic.atomic.html#9d3d76104a52001d4b635576eb96f514"><span class="id" title="notation">&lt;&lt;&lt;</span></a> <a class="idref" href="iris.program_logic.atomic.html#9d3d76104a52001d4b635576eb96f514"><span class="id" title="notation">∀</span></a> <span class="id" title="var">v</span><a class="idref" href="iris.program_logic.atomic.html#9d3d76104a52001d4b635576eb96f514"><span class="id" title="notation">,</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#mapsto"><span class="id" title="method">mapsto</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#l"><span class="id" title="variable">l</span></a> 1 <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="iris.program_logic.atomic.html#9d3d76104a52001d4b635576eb96f514"><span class="id" title="notation">&gt;&gt;&gt;</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#CAS"><span class="id" title="abbreviation">CAS</span></a> <a class="idref" href="iris.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="iris.heap_lang.lib.atomic_heap.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#w1"><span class="id" title="variable">w1</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#w2"><span class="id" title="variable">w2</span></a> <a class="idref" href="iris.program_logic.atomic.html#9d3d76104a52001d4b635576eb96f514"><span class="id" title="notation">@</span></a> <a class="idref" href="../html-stdpp/stdpp.base.html#6c0a583aa94fbbce6fcf0f655cf1cbb7"><span class="id" title="notation">⊤</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="iris.program_logic.atomic.html#9d3d76104a52001d4b635576eb96f514"><span class="id" title="notation">&lt;&lt;&lt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.ssr.ssreflect.html#201058f4aa915cdea9258bc97aa9ee97"><span class="id" title="notation">if</span></a> <a class="idref" href="../html-stdpp/stdpp.base.html#decide"><span class="id" title="definition">decide</span></a> (<a class="idref" href="iris.heap_lang.lib.atomic_heap.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#w1"><span class="id" title="variable">w1</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.ssr.ssreflect.html#201058f4aa915cdea9258bc97aa9ee97"><span class="id" title="notation">then</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#mapsto"><span class="id" title="method">mapsto</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#l"><span class="id" title="variable">l</span></a> 1 <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#w2"><span class="id" title="variable">w2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.ssr.ssreflect.html#201058f4aa915cdea9258bc97aa9ee97"><span class="id" title="notation">else</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#mapsto"><span class="id" title="method">mapsto</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#l"><span class="id" title="variable">l</span></a> 1 <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#v"><span class="id" title="variable">v</span></a><a class="idref" href="iris.program_logic.atomic.html#9d3d76104a52001d4b635576eb96f514"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="iris.program_logic.atomic.html#9d3d76104a52001d4b635576eb96f514"><span class="id" title="notation">RET</span></a> <a class="idref" href="iris.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.ssr.ssreflect.html#201058f4aa915cdea9258bc97aa9ee97"><span class="id" title="notation">if</span></a> <a class="idref" href="../html-stdpp/stdpp.base.html#decide"><span class="id" title="definition">decide</span></a> (<a class="idref" href="iris.heap_lang.lib.atomic_heap.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#w1"><span class="id" title="variable">w1</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.ssr.ssreflect.html#201058f4aa915cdea9258bc97aa9ee97"><span class="id" title="notation">then</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.ssr.ssreflect.html#201058f4aa915cdea9258bc97aa9ee97"><span class="id" title="notation">else</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="iris.program_logic.atomic.html#9d3d76104a52001d4b635576eb96f514"><span class="id" title="notation">&gt;&gt;&gt;</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (? <span class="id" title="var">Φ</span>) "AU". <span class="id" title="var">awp_apply</span> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#cmpxchg_spec"><span class="id" title="method">cmpxchg_spec</span></a>; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="iris.bi.lib.atomic.html#aacc_aupd_commit"><span class="id" title="lemma">aacc_aupd_commit</span></a> <a class="idref" href="iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "AU"<a class="idref" href="iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">v</span>) "H↦". <span class="id" title="var">iAaccIntro</span> <span class="id" title="keyword">with</span> "H↦"; <span class="id" title="tactic">first</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "$ !&gt; HΦ !&gt;". <span class="id" title="var">wp_pures</span>. <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#derived"><span class="id" title="section">derived</span></a>.<br/>

<br/>
</div>

<div class="doc">
Proof that the primitive physical operations of heap_lang satisfy said interface. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a name="primitive_alloc"><span class="id" title="definition">primitive_alloc</span></a> : <a class="idref" href="iris.heap_lang.lang.html#heap_lang.val"><span class="id" title="inductive">val</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="iris.heap_lang.notation.html#704630d98f03f1fa6c74ab29b9831803"><span class="id" title="notation">λ</span></a><a class="idref" href="iris.heap_lang.notation.html#704630d98f03f1fa6c74ab29b9831803"><span class="id" title="notation">:</span></a> "v"<a class="idref" href="iris.heap_lang.notation.html#704630d98f03f1fa6c74ab29b9831803"><span class="id" title="notation">,</span></a> <a class="idref" href="iris.heap_lang.notation.html#c11666ed6ce5aadc11a8960dae69c19a"><span class="id" title="notation">ref</span></a> "v".<br/>
<span class="id" title="keyword">Definition</span> <a name="primitive_load"><span class="id" title="definition">primitive_load</span></a> : <a class="idref" href="iris.heap_lang.lang.html#heap_lang.val"><span class="id" title="inductive">val</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="iris.heap_lang.notation.html#704630d98f03f1fa6c74ab29b9831803"><span class="id" title="notation">λ</span></a><a class="idref" href="iris.heap_lang.notation.html#704630d98f03f1fa6c74ab29b9831803"><span class="id" title="notation">:</span></a> "l"<a class="idref" href="iris.heap_lang.notation.html#704630d98f03f1fa6c74ab29b9831803"><span class="id" title="notation">,</span></a> <a class="idref" href="iris.heap_lang.notation.html#569b74bc432a2b233b93ae1b45418e26"><span class="id" title="notation">!</span></a>"l".<br/>
<span class="id" title="keyword">Definition</span> <a name="primitive_store"><span class="id" title="definition">primitive_store</span></a> : <a class="idref" href="iris.heap_lang.lang.html#heap_lang.val"><span class="id" title="inductive">val</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="iris.heap_lang.notation.html#e649b1753bdf9a3d478633a8c7e61dc9"><span class="id" title="notation">λ</span></a><a class="idref" href="iris.heap_lang.notation.html#e649b1753bdf9a3d478633a8c7e61dc9"><span class="id" title="notation">:</span></a> "l" "x"<a class="idref" href="iris.heap_lang.notation.html#e649b1753bdf9a3d478633a8c7e61dc9"><span class="id" title="notation">,</span></a> "l" <a class="idref" href="iris.heap_lang.notation.html#c86a93f3678d40e29f281dd490cfc181"><span class="id" title="notation">&lt;-</span></a> "x".<br/>
<span class="id" title="keyword">Definition</span> <a name="primitive_cmpxchg"><span class="id" title="definition">primitive_cmpxchg</span></a> : <a class="idref" href="iris.heap_lang.lang.html#heap_lang.val"><span class="id" title="inductive">val</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="iris.heap_lang.notation.html#e649b1753bdf9a3d478633a8c7e61dc9"><span class="id" title="notation">λ</span></a><a class="idref" href="iris.heap_lang.notation.html#e649b1753bdf9a3d478633a8c7e61dc9"><span class="id" title="notation">:</span></a> "l" "e1" "e2"<a class="idref" href="iris.heap_lang.notation.html#e649b1753bdf9a3d478633a8c7e61dc9"><span class="id" title="notation">,</span></a> <a class="idref" href="iris.heap_lang.lang.html#heap_lang.CmpXchg"><span class="id" title="constructor">CmpXchg</span></a> "l" "e1" "e2".<br/>

<br/>
<span class="id" title="keyword">Section</span> <a name="proof"><span class="id" title="section">proof</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{!<a class="idref" href="iris.heap_lang.lifting.html#heapG"><span class="id" title="class">heapG</span></a> <span class="id" title="var">Σ</span>}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="primitive_alloc_spec"><span class="id" title="lemma">primitive_alloc_spec</span></a> (<span class="id" title="var">v</span> : <a class="idref" href="iris.heap_lang.lang.html#heap_lang.val"><span class="id" title="inductive">val</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="iris.bi.weakestpre.html#46f028f989b7c77928a3da60193fc921"><span class="id" title="notation">{{{</span></a> <a class="idref" href="iris.bi.interface.html#1fb20ec9249c1b9a628d0af33d4b6be7"><span class="id" title="notation">True</span></a> <a class="idref" href="iris.bi.weakestpre.html#46f028f989b7c77928a3da60193fc921"><span class="id" title="notation">}}}</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#primitive_alloc"><span class="id" title="definition">primitive_alloc</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="iris.bi.weakestpre.html#46f028f989b7c77928a3da60193fc921"><span class="id" title="notation">{{{</span></a> <span class="id" title="var">l</span><a class="idref" href="iris.bi.weakestpre.html#46f028f989b7c77928a3da60193fc921"><span class="id" title="notation">,</span></a> <a class="idref" href="iris.bi.weakestpre.html#46f028f989b7c77928a3da60193fc921"><span class="id" title="notation">RET</span></a> <a class="idref" href="iris.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="iris.heap_lang.lib.atomic_heap.html#l"><span class="id" title="variable">l</span></a><a class="idref" href="iris.bi.weakestpre.html#46f028f989b7c77928a3da60193fc921"><span class="id" title="notation">;</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="iris.heap_lang.lifting.html#db9bde1508f348dd1f9d24e9d4ead804"><span class="id" title="notation">↦</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="iris.bi.weakestpre.html#46f028f989b7c77928a3da60193fc921"><span class="id" title="notation">}}}</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">Φ</span>) "_ HΦ". <span class="id" title="var">wp_lam</span>. <span class="id" title="var">wp_alloc</span> <span class="id" title="var">l</span>. <span class="id" title="var">iApply</span> "HΦ". <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="primitive_load_spec"><span class="id" title="lemma">primitive_load_spec</span></a> (<span class="id" title="var">l</span> : <a class="idref" href="iris.heap_lang.locations.html#loc"><span class="id" title="record">loc</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="iris.bi.interface.html#b7d65d242d889c3e37aca6013a51bfad"><span class="id" title="notation">⊢</span></a> <a class="idref" href="iris.program_logic.atomic.html#9d3d76104a52001d4b635576eb96f514"><span class="id" title="notation">&lt;&lt;&lt;</span></a> <a class="idref" href="iris.program_logic.atomic.html#9d3d76104a52001d4b635576eb96f514"><span class="id" title="notation">∀</span></a> <a class="idref" href="iris.program_logic.atomic.html#9d3d76104a52001d4b635576eb96f514"><span class="id" title="notation">(</span></a><span class="id" title="var">v</span> : <a class="idref" href="iris.heap_lang.lang.html#heap_lang.val"><span class="id" title="inductive">val</span></a>) <span class="id" title="var">q</span><a class="idref" href="iris.program_logic.atomic.html#9d3d76104a52001d4b635576eb96f514"><span class="id" title="notation">,</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="iris.heap_lang.lifting.html#cef1a1f68ad9f7c43249f50e8ee3ceae"><span class="id" title="notation">↦{</span></a><a class="idref" href="iris.heap_lang.lib.atomic_heap.html#q"><span class="id" title="variable">q</span></a><a class="idref" href="iris.heap_lang.lifting.html#cef1a1f68ad9f7c43249f50e8ee3ceae"><span class="id" title="notation">}</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="iris.program_logic.atomic.html#9d3d76104a52001d4b635576eb96f514"><span class="id" title="notation">&gt;&gt;&gt;</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#primitive_load"><span class="id" title="definition">primitive_load</span></a> <a class="idref" href="iris.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="iris.heap_lang.lib.atomic_heap.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="iris.program_logic.atomic.html#9d3d76104a52001d4b635576eb96f514"><span class="id" title="notation">@</span></a> <a class="idref" href="../html-stdpp/stdpp.base.html#6c0a583aa94fbbce6fcf0f655cf1cbb7"><span class="id" title="notation">⊤</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="iris.program_logic.atomic.html#9d3d76104a52001d4b635576eb96f514"><span class="id" title="notation">&lt;&lt;&lt;</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="iris.heap_lang.lifting.html#cef1a1f68ad9f7c43249f50e8ee3ceae"><span class="id" title="notation">↦{</span></a><a class="idref" href="iris.heap_lang.lib.atomic_heap.html#q"><span class="id" title="variable">q</span></a><a class="idref" href="iris.heap_lang.lifting.html#cef1a1f68ad9f7c43249f50e8ee3ceae"><span class="id" title="notation">}</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#v"><span class="id" title="variable">v</span></a><a class="idref" href="iris.program_logic.atomic.html#9d3d76104a52001d4b635576eb96f514"><span class="id" title="notation">,</span></a> <a class="idref" href="iris.program_logic.atomic.html#9d3d76104a52001d4b635576eb96f514"><span class="id" title="notation">RET</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="iris.program_logic.atomic.html#9d3d76104a52001d4b635576eb96f514"><span class="id" title="notation">&gt;&gt;&gt;</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">Φ</span>) "AU". <span class="id" title="var">wp_lam</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> "AU" <span class="id" title="keyword">as</span> (<span class="id" title="var">v</span> <span class="id" title="var">q</span>) "[H↦ [_ Hclose]]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_load</span>. <span class="id" title="var">iMod</span> <a class="idref" href="iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"Hclose" <a class="idref" href="iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "H↦"<a class="idref" href="iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "HΦ". <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="primitive_store_spec"><span class="id" title="lemma">primitive_store_spec</span></a> (<span class="id" title="var">l</span> : <a class="idref" href="iris.heap_lang.locations.html#loc"><span class="id" title="record">loc</span></a>) (<span class="id" title="var">w</span> : <a class="idref" href="iris.heap_lang.lang.html#heap_lang.val"><span class="id" title="inductive">val</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="iris.bi.interface.html#b7d65d242d889c3e37aca6013a51bfad"><span class="id" title="notation">⊢</span></a> <a class="idref" href="iris.program_logic.atomic.html#9d3d76104a52001d4b635576eb96f514"><span class="id" title="notation">&lt;&lt;&lt;</span></a> <a class="idref" href="iris.program_logic.atomic.html#9d3d76104a52001d4b635576eb96f514"><span class="id" title="notation">∀</span></a> <span class="id" title="var">v</span><a class="idref" href="iris.program_logic.atomic.html#9d3d76104a52001d4b635576eb96f514"><span class="id" title="notation">,</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="iris.heap_lang.lifting.html#db9bde1508f348dd1f9d24e9d4ead804"><span class="id" title="notation">↦</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="iris.program_logic.atomic.html#9d3d76104a52001d4b635576eb96f514"><span class="id" title="notation">&gt;&gt;&gt;</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#primitive_store"><span class="id" title="definition">primitive_store</span></a> <a class="idref" href="iris.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="iris.heap_lang.lib.atomic_heap.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#w"><span class="id" title="variable">w</span></a> <a class="idref" href="iris.program_logic.atomic.html#9d3d76104a52001d4b635576eb96f514"><span class="id" title="notation">@</span></a> <a class="idref" href="../html-stdpp/stdpp.base.html#6c0a583aa94fbbce6fcf0f655cf1cbb7"><span class="id" title="notation">⊤</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="iris.program_logic.atomic.html#9d3d76104a52001d4b635576eb96f514"><span class="id" title="notation">&lt;&lt;&lt;</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="iris.heap_lang.lifting.html#db9bde1508f348dd1f9d24e9d4ead804"><span class="id" title="notation">↦</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#w"><span class="id" title="variable">w</span></a><a class="idref" href="iris.program_logic.atomic.html#9d3d76104a52001d4b635576eb96f514"><span class="id" title="notation">,</span></a> <a class="idref" href="iris.program_logic.atomic.html#9d3d76104a52001d4b635576eb96f514"><span class="id" title="notation">RET</span></a> <a class="idref" href="iris.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="iris.heap_lang.notation.html#3127c6bc552ca21a494fc6e3474a507d"><span class="id" title="notation">()</span></a> <a class="idref" href="iris.program_logic.atomic.html#9d3d76104a52001d4b635576eb96f514"><span class="id" title="notation">&gt;&gt;&gt;</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (<span class="id" title="var">Φ</span>) "AU". <span class="id" title="var">wp_lam</span>. <span class="id" title="var">wp_let</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> "AU" <span class="id" title="keyword">as</span> (<span class="id" title="var">v</span>) "[H↦ [_ Hclose]]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">wp_store</span>. <span class="id" title="var">iMod</span> <a class="idref" href="iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"Hclose" <a class="idref" href="iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "H↦"<a class="idref" href="iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "HΦ". <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="primitive_cmpxchg_spec"><span class="id" title="lemma">primitive_cmpxchg_spec</span></a> (<span class="id" title="var">l</span> : <a class="idref" href="iris.heap_lang.locations.html#loc"><span class="id" title="record">loc</span></a>) (<span class="id" title="var">w1</span> <span class="id" title="var">w2</span> : <a class="idref" href="iris.heap_lang.lang.html#heap_lang.val"><span class="id" title="inductive">val</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="iris.heap_lang.lang.html#heap_lang.val_is_unboxed"><span class="id" title="definition">val_is_unboxed</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#w1"><span class="id" title="variable">w1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="iris.bi.interface.html#b7d65d242d889c3e37aca6013a51bfad"><span class="id" title="notation">⊢</span></a> <a class="idref" href="iris.program_logic.atomic.html#9d3d76104a52001d4b635576eb96f514"><span class="id" title="notation">&lt;&lt;&lt;</span></a> <a class="idref" href="iris.program_logic.atomic.html#9d3d76104a52001d4b635576eb96f514"><span class="id" title="notation">∀</span></a> <a class="idref" href="iris.program_logic.atomic.html#9d3d76104a52001d4b635576eb96f514"><span class="id" title="notation">(</span></a><span class="id" title="var">v</span> : <a class="idref" href="iris.heap_lang.lang.html#heap_lang.val"><span class="id" title="inductive">val</span></a><a class="idref" href="iris.program_logic.atomic.html#9d3d76104a52001d4b635576eb96f514"><span class="id" title="notation">),</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="iris.heap_lang.lifting.html#db9bde1508f348dd1f9d24e9d4ead804"><span class="id" title="notation">↦</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="iris.program_logic.atomic.html#9d3d76104a52001d4b635576eb96f514"><span class="id" title="notation">&gt;&gt;&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="iris.heap_lang.lib.atomic_heap.html#primitive_cmpxchg"><span class="id" title="definition">primitive_cmpxchg</span></a> <a class="idref" href="iris.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="iris.heap_lang.lib.atomic_heap.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#w1"><span class="id" title="variable">w1</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#w2"><span class="id" title="variable">w2</span></a> <a class="idref" href="iris.program_logic.atomic.html#9d3d76104a52001d4b635576eb96f514"><span class="id" title="notation">@</span></a> <a class="idref" href="../html-stdpp/stdpp.base.html#6c0a583aa94fbbce6fcf0f655cf1cbb7"><span class="id" title="notation">⊤</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="iris.program_logic.atomic.html#9d3d76104a52001d4b635576eb96f514"><span class="id" title="notation">&lt;&lt;&lt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.ssr.ssreflect.html#201058f4aa915cdea9258bc97aa9ee97"><span class="id" title="notation">if</span></a> <a class="idref" href="../html-stdpp/stdpp.base.html#decide"><span class="id" title="definition">decide</span></a> (<a class="idref" href="iris.heap_lang.lib.atomic_heap.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#w1"><span class="id" title="variable">w1</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.ssr.ssreflect.html#201058f4aa915cdea9258bc97aa9ee97"><span class="id" title="notation">then</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="iris.heap_lang.lifting.html#db9bde1508f348dd1f9d24e9d4ead804"><span class="id" title="notation">↦</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#w2"><span class="id" title="variable">w2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.ssr.ssreflect.html#201058f4aa915cdea9258bc97aa9ee97"><span class="id" title="notation">else</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="iris.heap_lang.lifting.html#db9bde1508f348dd1f9d24e9d4ead804"><span class="id" title="notation">↦</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#v"><span class="id" title="variable">v</span></a><a class="idref" href="iris.program_logic.atomic.html#9d3d76104a52001d4b635576eb96f514"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="iris.program_logic.atomic.html#9d3d76104a52001d4b635576eb96f514"><span class="id" title="notation">RET</span></a> <a class="idref" href="iris.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">(</span></a><a class="idref" href="iris.heap_lang.lib.atomic_heap.html#v"><span class="id" title="variable">v</span></a><a class="idref" href="iris.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">,</span></a> <a class="idref" href="iris.heap_lang.notation.html#66e8f9d9f9894a066beff0d1c67d3c77"><span class="id" title="notation">#</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.ssr.ssreflect.html#201058f4aa915cdea9258bc97aa9ee97"><span class="id" title="notation">if</span></a> <a class="idref" href="../html-stdpp/stdpp.base.html#decide"><span class="id" title="definition">decide</span></a> (<a class="idref" href="iris.heap_lang.lib.atomic_heap.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#w1"><span class="id" title="variable">w1</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.ssr.ssreflect.html#201058f4aa915cdea9258bc97aa9ee97"><span class="id" title="notation">then</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.ssr.ssreflect.html#201058f4aa915cdea9258bc97aa9ee97"><span class="id" title="notation">else</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><a class="idref" href="iris.heap_lang.notation.html#cc14470b8443804ba405fa710525256d"><span class="id" title="notation">)</span></a> <a class="idref" href="iris.program_logic.atomic.html#9d3d76104a52001d4b635576eb96f514"><span class="id" title="notation">&gt;&gt;&gt;</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> (? <span class="id" title="var">Φ</span>) "AU". <span class="id" title="var">wp_lam</span>. <span class="id" title="var">wp_pures</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> "AU" <span class="id" title="keyword">as</span> (<span class="id" title="var">v</span>) "[H↦ [_ Hclose]]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="../html-stdpp/stdpp.base.html#decide"><span class="id" title="definition">decide</span></a> (<span class="id" title="var">v</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">w1</span>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">Heq</span>|<span class="id" title="var">Hne</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="var">wp_cmpxchg_suc</span>|<span class="id" title="var">wp_cmpxchg_fail</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"Hclose" <a class="idref" href="iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "H↦"<a class="idref" href="iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "HΦ"; <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#proof"><span class="id" title="section">proof</span></a>.<br/>

<br/>
<span class="comment">(*&nbsp;NOT&nbsp;an&nbsp;instance&nbsp;because&nbsp;users&nbsp;should&nbsp;choose&nbsp;explicitly&nbsp;to&nbsp;use&nbsp;it<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(using&nbsp;<span class="inlinecode"><span class="id" title="var">Explicit</span></span> <span class="inlinecode"><span class="id" title="keyword">Instance</span></span>).&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <a name="primitive_atomic_heap"><span class="id" title="definition">primitive_atomic_heap</span></a> `{!<a class="idref" href="iris.heap_lang.lifting.html#heapG"><span class="id" title="class">heapG</span></a> <span class="id" title="var">Σ</span>} : <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#atomic_heap"><span class="id" title="class">atomic_heap</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#e15c0eb40e61adefe95778c26e7840f6"><span class="id" title="variable">Σ</span></a> :=<br/>
&nbsp;&nbsp;{| <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#AtomicHeap"><span class="id" title="constructor">alloc_spec</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#AtomicHeap"><span class="id" title="constructor">:=</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#AtomicHeap"><span class="id" title="constructor">primitive_alloc_spec</span></a><a class="idref" href="iris.heap_lang.lib.atomic_heap.html#AtomicHeap"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="iris.heap_lang.lib.atomic_heap.html#AtomicHeap"><span class="id" title="constructor">load_spec</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#AtomicHeap"><span class="id" title="constructor">:=</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#AtomicHeap"><span class="id" title="constructor">primitive_load_spec</span></a><a class="idref" href="iris.heap_lang.lib.atomic_heap.html#AtomicHeap"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="iris.heap_lang.lib.atomic_heap.html#AtomicHeap"><span class="id" title="constructor">store_spec</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#AtomicHeap"><span class="id" title="constructor">:=</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#AtomicHeap"><span class="id" title="constructor">primitive_store_spec</span></a><a class="idref" href="iris.heap_lang.lib.atomic_heap.html#AtomicHeap"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="iris.heap_lang.lib.atomic_heap.html#AtomicHeap"><span class="id" title="constructor">cmpxchg_spec</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#AtomicHeap"><span class="id" title="constructor">:=</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#AtomicHeap"><span class="id" title="constructor">primitive_cmpxchg_spec</span></a><a class="idref" href="iris.heap_lang.lib.atomic_heap.html#AtomicHeap"><span class="id" title="constructor">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="iris.heap_lang.lib.atomic_heap.html#AtomicHeap"><span class="id" title="constructor">mapsto_agree</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#AtomicHeap"><span class="id" title="constructor">:=</span></a> <a class="idref" href="iris.heap_lang.lib.atomic_heap.html#AtomicHeap"><span class="id" title="constructor">gen_heap.mapsto_agree</span></a>  |}.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
