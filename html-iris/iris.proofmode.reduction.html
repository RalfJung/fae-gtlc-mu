<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="../overview.html">Project Page</a>
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">iris.proofmode.reduction</h1>

<div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="var">iris.bi</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="iris.bi.bi.html#"><span class="id" title="library">bi</span></a> <a class="idref" href="iris.bi.telescopes.html#"><span class="id" title="library">telescopes</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">iris.proofmode</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="iris.proofmode.base.html#"><span class="id" title="library">base</span></a> <a class="idref" href="iris.proofmode.environments.html#"><span class="id" title="library">environments</span></a>.<br/>

<br/>
</div>

<div class="doc">
Called by all tactics to perform computation to lookup items in the
    context.  We avoid reducing anything user-visible here to make sure we
    do not reduce e.g. before unification happens in <span class="inlinecode"><span class="id" title="var">iApply</span></span>.
</div>
<div class="code">
<span class="id" title="var">Declare</span> <span class="id" title="var">Reduction</span> <span class="id" title="var">pm_eval</span> := <span class="id" title="tactic">cbv</span> [<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;base&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="var">base.negb</span> <span class="id" title="var">base.beq</span><br/>
&nbsp;&nbsp;<span class="id" title="var">base.Pos_succ</span> <span class="id" title="var">base.ascii_beq</span> <span class="id" title="var">base.string_beq</span> <span class="id" title="var">base.positive_beq</span> <span class="id" title="var">base.ident_beq</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;environments&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="var">env_lookup</span> <span class="id" title="var">env_lookup_delete</span> <span class="id" title="var">env_delete</span> <span class="id" title="var">env_app</span> <span class="id" title="var">env_replace</span><br/>
&nbsp;&nbsp;<span class="id" title="var">env_dom</span> <span class="id" title="var">env_intuitionistic</span> <span class="id" title="var">env_spatial</span> <span class="id" title="var">env_counter</span> <span class="id" title="var">env_spatial_is_nil</span> <span class="id" title="var">envs_dom</span><br/>
&nbsp;&nbsp;<span class="id" title="var">envs_lookup</span> <span class="id" title="var">envs_lookup_delete</span> <span class="id" title="var">envs_delete</span> <span class="id" title="var">envs_snoc</span> <span class="id" title="var">envs_app</span><br/>
&nbsp;&nbsp;<span class="id" title="var">envs_simple_replace</span> <span class="id" title="var">envs_replace</span> <span class="id" title="var">envs_split</span><br/>
&nbsp;&nbsp;<span class="id" title="var">envs_clear_spatial</span> <span class="id" title="var">envs_clear_intuitionistic</span> <span class="id" title="var">envs_incr_counter</span><br/>
&nbsp;&nbsp;<span class="id" title="var">envs_split_go</span> <span class="id" title="var">envs_split</span><br/>
&nbsp;&nbsp;<span class="id" title="var">env_to_prop_go</span> <span class="id" title="var">env_to_prop</span> <span class="id" title="var">env_to_prop_and_go</span> <span class="id" title="var">env_to_prop_and</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;PM&nbsp;list&nbsp;and&nbsp;option&nbsp;functions&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="var">pm_app</span> <span class="id" title="var">pm_option_bind</span> <span class="id" title="var">pm_from_option</span> <span class="id" title="var">pm_option_fun</span><br/>
].<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">pm_eval</span> <span class="id" title="var">t</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eval</span> <span class="id" title="var">pm_eval</span> <span class="id" title="tactic">in</span> <span class="id" title="var">t</span>.<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">pm_reduce</span> :=<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Use&nbsp;<span class="inlinecode"><span class="id" title="var">convert_concl_no_check</span></span>&nbsp;instead&nbsp;of&nbsp;<span class="inlinecode"><span class="id" title="tactic">change</span></span>&nbsp;to&nbsp;avoid&nbsp;performing&nbsp;the<br/>
&nbsp;&nbsp;conversion&nbsp;check&nbsp;twice.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> |- ?<span class="id" title="var">u</span> =&gt; <span class="id" title="keyword">let</span> <span class="id" title="var">v</span> := <span class="id" title="var">pm_eval</span> <span class="id" title="var">u</span> <span class="id" title="tactic">in</span> <span class="id" title="var">convert_concl_no_check</span> <span class="id" title="var">v</span> <span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">pm_reflexivity</span> := <span class="id" title="var">pm_reduce</span>; <span class="id" title="tactic">exact</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>.<br/>

<br/>
</div>

<div class="doc">
Called by many tactics for redexes that are created by instantiation.
    This cannot create any envs redexes so we just do the cbn part. 
</div>
<div class="code">
<span class="id" title="var">Declare</span> <span class="id" title="var">Reduction</span> <span class="id" title="var">pm_prettify</span> := <span class="id" title="var">cbn</span> [<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;telescope&nbsp;combinators&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="var">tele_fold</span> <span class="id" title="var">tele_bind</span> <span class="id" title="var">tele_app</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;BI&nbsp;connectives&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="var">bi_persistently_if</span> <span class="id" title="var">bi_affinely_if</span> <span class="id" title="var">bi_absorbingly_if</span> <span class="id" title="var">bi_intuitionistically_if</span><br/>
&nbsp;&nbsp;<span class="id" title="var">bi_wandM</span> <span class="id" title="var">sbi_laterN</span><br/>
&nbsp;&nbsp;<span class="id" title="var">bi_tforall</span> <span class="id" title="var">bi_texist</span><br/>
].<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">pm_prettify</span> :=<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Use&nbsp;<span class="inlinecode"><span class="id" title="var">convert_concl_no_check</span></span>&nbsp;instead&nbsp;of&nbsp;<span class="inlinecode"><span class="id" title="tactic">change</span></span>&nbsp;to&nbsp;avoid&nbsp;performing&nbsp;the<br/>
&nbsp;&nbsp;conversion&nbsp;check&nbsp;twice.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> |- ?<span class="id" title="var">u</span> =&gt; <span class="id" title="keyword">let</span> <span class="id" title="var">v</span> := <span class="id" title="tactic">eval</span> <span class="id" title="var">pm_prettify</span> <span class="id" title="tactic">in</span> <span class="id" title="var">u</span> <span class="id" title="tactic">in</span> <span class="id" title="var">convert_concl_no_check</span> <span class="id" title="var">v</span> <span class="id" title="keyword">end</span>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
