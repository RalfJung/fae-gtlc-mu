<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="../overview.html">Project Page</a>
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">iris.bi.lib.counterexamples</h1>

<div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="var">iris.bi</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <a class="idref" href="iris.bi.bi.html#"><span class="id" title="library">bi</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">iris.proofmode</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="iris.proofmode.tactics.html#"><span class="id" title="library">tactics</span></a>.<br/>
<span class="id" title="keyword">Set</span> <span class="id" title="var">Default</span> <span class="id" title="keyword">Proof</span> <span class="id" title="var">Using</span> "Type*".<br/>

<br/>
</div>

<div class="doc">
This proves that we need the ▷ in a "Saved Proposition" construction with
name-dependent allocation. 
</div>
<div class="code">
<span class="id" title="keyword">Module</span> <a name="savedprop"><span class="id" title="module">savedprop</span></a>. <span class="id" title="keyword">Section</span> <a name="savedprop.savedprop"><span class="id" title="section">savedprop</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a class="idref" href="iris.bi.derived_connectives.html#BiAffine"><span class="id" title="class">BiAffine</span></a> <span class="id" title="var">PROP</span>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <a name="5dc7e3716258debaa55582f1f7a1340d"><span class="id" title="notation">&quot;</span></a>¬ P" := (<a class="idref" href="iris.bi.derived_connectives.html#ca36a4dbd976785c580c311a32a8423e"><span class="id" title="notation">□</span></a> <a class="idref" href="iris.bi.derived_connectives.html#ca36a4dbd976785c580c311a32a8423e"><span class="id" title="notation">(</span></a><span class="id" title="var">P</span> <a class="idref" href="iris.bi.interface.html#ccc2ee11d66b7edfaefcea20ebd986b5"><span class="id" title="notation">→</span></a> <a class="idref" href="iris.bi.interface.html#b2ee2124ec247e9a6763a34086c13c4b"><span class="id" title="notation">False</span></a><a class="idref" href="iris.bi.derived_connectives.html#ca36a4dbd976785c580c311a32a8423e"><span class="id" title="notation">)</span></a>)%<span class="id" title="var">I</span> : <span class="id" title="var">bi_scope</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Types</span> <span class="id" title="var">P</span> : <a class="idref" href="iris.bi.lib.counterexamples.html#savedprop.savedprop.PROP"><span class="id" title="variable">PROP</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> (<span class="id" title="var">bupd</span> : <a class="idref" href="iris.bi.lib.counterexamples.html#savedprop.savedprop.PROP"><span class="id" title="variable">PROP</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#savedprop.savedprop.PROP"><span class="id" title="variable">PROP</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <a name="e15c9f0495cd849605b2603d5637bf56"><span class="id" title="notation">&quot;</span></a>|==&gt; Q" := (<a class="idref" href="iris.bi.lib.counterexamples.html#savedprop.savedprop.bupd"><span class="id" title="variable">bupd</span></a> <span class="id" title="var">Q</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 99, <span class="id" title="var">Q</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 200, <span class="id" title="var">format</span> "|==&gt;  Q") : <span class="id" title="var">bi_scope</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Hypothesis</span> <a name="savedprop.savedprop.bupd_intro"><span class="id" title="variable">bupd_intro</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <span class="id" title="var">P</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="iris.bi.interface.html#e55eb026c3f0434cd18ddc04e5d7c1ac"><span class="id" title="notation">⊢</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#e15c9f0495cd849605b2603d5637bf56"><span class="id" title="notation">|==&gt;</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Hypothesis</span> <a name="savedprop.savedprop.bupd_mono"><span class="id" title="variable">bupd_mono</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <span class="id" title="var">P</span> <span class="id" title="var">Q</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">(</span></a><a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="iris.bi.interface.html#e55eb026c3f0434cd18ddc04e5d7c1ac"><span class="id" title="notation">⊢</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#Q"><span class="id" title="variable">Q</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="iris.bi.interface.html#e55eb026c3f0434cd18ddc04e5d7c1ac"><span class="id" title="notation">(</span></a><a class="idref" href="iris.bi.lib.counterexamples.html#e15c9f0495cd849605b2603d5637bf56"><span class="id" title="notation">|==&gt;</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a><a class="idref" href="iris.bi.interface.html#e55eb026c3f0434cd18ddc04e5d7c1ac"><span class="id" title="notation">)</span></a> <a class="idref" href="iris.bi.interface.html#e55eb026c3f0434cd18ddc04e5d7c1ac"><span class="id" title="notation">⊢</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#e15c9f0495cd849605b2603d5637bf56"><span class="id" title="notation">|==&gt;</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#Q"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Hypothesis</span> <a name="savedprop.savedprop.bupd_trans"><span class="id" title="variable">bupd_trans</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <span class="id" title="var">P</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="iris.bi.interface.html#e55eb026c3f0434cd18ddc04e5d7c1ac"><span class="id" title="notation">(</span></a><a class="idref" href="iris.bi.lib.counterexamples.html#e15c9f0495cd849605b2603d5637bf56"><span class="id" title="notation">|==&gt;</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#e15c9f0495cd849605b2603d5637bf56"><span class="id" title="notation">|==&gt;</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a><a class="idref" href="iris.bi.interface.html#e55eb026c3f0434cd18ddc04e5d7c1ac"><span class="id" title="notation">)</span></a> <a class="idref" href="iris.bi.interface.html#e55eb026c3f0434cd18ddc04e5d7c1ac"><span class="id" title="notation">⊢</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#e15c9f0495cd849605b2603d5637bf56"><span class="id" title="notation">|==&gt;</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Hypothesis</span> <a name="savedprop.savedprop.bupd_frame_r"><span class="id" title="variable">bupd_frame_r</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <span class="id" title="var">P</span> <span class="id" title="var">R</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">(</span></a><a class="idref" href="iris.bi.lib.counterexamples.html#e15c9f0495cd849605b2603d5637bf56"><span class="id" title="notation">|==&gt;</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a><a class="idref" href="iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">)</span></a> <a class="idref" href="iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#R"><span class="id" title="variable">R</span></a> <a class="idref" href="iris.bi.interface.html#e55eb026c3f0434cd18ddc04e5d7c1ac"><span class="id" title="notation">⊢</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#e15c9f0495cd849605b2603d5637bf56"><span class="id" title="notation">|==&gt;</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#e15c9f0495cd849605b2603d5637bf56"><span class="id" title="notation">(</span></a><a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#R"><span class="id" title="variable">R</span></a><a class="idref" href="iris.bi.lib.counterexamples.html#e15c9f0495cd849605b2603d5637bf56"><span class="id" title="notation">)</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> (<span class="id" title="var">ident</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">saved</span> : <a class="idref" href="iris.bi.lib.counterexamples.html#ident"><span class="id" title="variable">ident</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#savedprop.savedprop.PROP"><span class="id" title="variable">PROP</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#savedprop.savedprop.PROP"><span class="id" title="variable">PROP</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Hypothesis</span> <a name="savedprop.savedprop.sprop_persistent"><span class="id" title="variable">sprop_persistent</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <span class="id" title="var">i</span> <span class="id" title="var">P</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="iris.bi.derived_connectives.html#Persistent"><span class="id" title="class">Persistent</span></a> (<a class="idref" href="iris.bi.lib.counterexamples.html#savedprop.savedprop.saved"><span class="id" title="variable">saved</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Hypothesis</span> <a name="savedprop.savedprop.sprop_alloc_dep"><span class="id" title="variable">sprop_alloc_dep</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">(</span></a><span class="id" title="var">P</span> : <a class="idref" href="iris.bi.lib.counterexamples.html#savedprop.savedprop.ident"><span class="id" title="variable">ident</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#savedprop.savedprop.PROP"><span class="id" title="variable">PROP</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">),</span></a> <a class="idref" href="iris.bi.interface.html#b7d65d242d889c3e37aca6013a51bfad"><span class="id" title="notation">⊢</span></a> <a class="idref" href="iris.bi.interface.html#b7d65d242d889c3e37aca6013a51bfad"><span class="id" title="notation">(</span></a><a class="idref" href="iris.bi.lib.counterexamples.html#e15c9f0495cd849605b2603d5637bf56"><span class="id" title="notation">|==&gt;</span></a> <a class="idref" href="iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">∃</span></a> <span class="id" title="var">i</span><a class="idref" href="iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">,</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#savedprop.savedprop.saved"><span class="id" title="variable">saved</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#i"><span class="id" title="variable">i</span></a> (<a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#i"><span class="id" title="variable">i</span></a>)<a class="idref" href="iris.bi.interface.html#b7d65d242d889c3e37aca6013a51bfad"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Hypothesis</span> <a name="savedprop.savedprop.sprop_agree"><span class="id" title="variable">sprop_agree</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <span class="id" title="var">i</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#savedprop.savedprop.saved"><span class="id" title="variable">saved</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="iris.bi.interface.html#285322c305ec6868ebb70cbafa909038"><span class="id" title="notation">∧</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#savedprop.savedprop.saved"><span class="id" title="variable">saved</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#Q"><span class="id" title="variable">Q</span></a> <a class="idref" href="iris.bi.interface.html#e55eb026c3f0434cd18ddc04e5d7c1ac"><span class="id" title="notation">⊢</span></a> <a class="idref" href="iris.bi.derived_connectives.html#ca36a4dbd976785c580c311a32a8423e"><span class="id" title="notation">□</span></a> <a class="idref" href="iris.bi.derived_connectives.html#ca36a4dbd976785c580c311a32a8423e"><span class="id" title="notation">(</span></a><a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="iris.bi.derived_connectives.html#859482b5c217a104a6cae1e16d97eaef"><span class="id" title="notation">↔</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#Q"><span class="id" title="variable">Q</span></a><a class="idref" href="iris.bi.derived_connectives.html#ca36a4dbd976785c580c311a32a8423e"><span class="id" title="notation">)</span></a>.<br/>

<br/>
</div>

<div class="doc">
We assume that we cannot update to false. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Hypothesis</span> <a name="savedprop.savedprop.consistency"><span class="id" title="variable">consistency</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬(</span></a><a class="idref" href="iris.bi.interface.html#b7d65d242d889c3e37aca6013a51bfad"><span class="id" title="notation">⊢</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#e15c9f0495cd849605b2603d5637bf56"><span class="id" title="notation">|==&gt;</span></a> <a class="idref" href="iris.bi.interface.html#b2ee2124ec247e9a6763a34086c13c4b"><span class="id" title="notation">False</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">)</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Instance</span> <a name="savedprop.bupd_mono'"><span class="id" title="instance">bupd_mono'</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="iris.bi.interface.html#483c3ba497d1de9dae43a4b1098eeeea"><span class="id" title="notation">(⊢)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="iris.bi.interface.html#483c3ba497d1de9dae43a4b1098eeeea"><span class="id" title="notation">(⊢)</span></a>) <a class="idref" href="iris.bi.lib.counterexamples.html#savedprop.savedprop.bupd"><span class="id" title="variable">bupd</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span> ?. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="iris.bi.lib.counterexamples.html#savedprop.savedprop.bupd_mono"><span class="id" title="variable">bupd_mono</span></a>. <span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Instance</span> <a name="savedprop.elim_modal_bupd"><span class="id" title="instance">elim_modal_bupd</span></a> <span class="id" title="var">p</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span> : <a class="idref" href="iris.proofmode.classes.html#ElimModal"><span class="id" title="class">ElimModal</span></a> <a class="idref" href="../html-stdpp/stdpp.base.html#e2da2dc5adb39aa5394d64f0045c62a4"><span class="id" title="notation">True</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> (<a class="idref" href="iris.bi.lib.counterexamples.html#e15c9f0495cd849605b2603d5637bf56"><span class="id" title="notation">|==&gt;</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a>) <a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a> (<a class="idref" href="iris.bi.lib.counterexamples.html#e15c9f0495cd849605b2603d5637bf56"><span class="id" title="notation">|==&gt;</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#Q"><span class="id" title="variable">Q</span></a>) (<a class="idref" href="iris.bi.lib.counterexamples.html#e15c9f0495cd849605b2603d5637bf56"><span class="id" title="notation">|==&gt;</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#Q"><span class="id" title="variable">Q</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> /<a class="idref" href="iris.proofmode.classes.html#ElimModal"><span class="id" title="class">ElimModal</span></a> <a class="idref" href="iris.bi.derived_laws_bi.html#bi.intuitionistically_if_elim"><span class="id" title="lemma">bi.intuitionistically_if_elim</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="iris.bi.lib.counterexamples.html#savedprop.savedprop.bupd_frame_r"><span class="id" title="variable">bupd_frame_r</span></a> <a class="idref" href="iris.bi.derived_laws_bi.html#bi.wand_elim_r"><span class="id" title="lemma">bi.wand_elim_r</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#savedprop.savedprop.bupd_trans"><span class="id" title="variable">bupd_trans</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
A bad recursive reference: "Assertion with name <span class="inlinecode"><a class="idref" href="iris.proofmode.monpred.html#i"><span class="id" title="variable">i</span></a></span> does not hold" 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="savedprop.A"><span class="id" title="definition">A</span></a> (<span class="id" title="var">i</span> : <a class="idref" href="iris.bi.lib.counterexamples.html#savedprop.savedprop.ident"><span class="id" title="variable">ident</span></a>) : <a class="idref" href="iris.bi.lib.counterexamples.html#savedprop.savedprop.PROP"><span class="id" title="variable">PROP</span></a> := (<a class="idref" href="iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">∃</span></a> <span class="id" title="var">P</span><a class="idref" href="iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">,</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#5dc7e3716258debaa55582f1f7a1340d"><span class="id" title="notation">¬</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#savedprop.savedprop.saved"><span class="id" title="variable">saved</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a>)%<span class="id" title="var">I</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="savedprop.A_alloc"><span class="id" title="lemma">A_alloc</span></a> : <a class="idref" href="iris.bi.interface.html#b7d65d242d889c3e37aca6013a51bfad"><span class="id" title="notation">⊢</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#e15c9f0495cd849605b2603d5637bf56"><span class="id" title="notation">|==&gt;</span></a> <a class="idref" href="iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">∃</span></a> <span class="id" title="var">i</span><a class="idref" href="iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">,</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#savedprop.savedprop.saved"><span class="id" title="variable">saved</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#i"><span class="id" title="variable">i</span></a> (<a class="idref" href="iris.bi.lib.counterexamples.html#savedprop.A"><span class="id" title="definition">A</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#i"><span class="id" title="variable">i</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="iris.bi.lib.counterexamples.html#savedprop.savedprop.sprop_alloc_dep"><span class="id" title="variable">sprop_alloc_dep</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="savedprop.saved_NA"><span class="id" title="lemma">saved_NA</span></a> <span class="id" title="var">i</span> : <a class="idref" href="iris.bi.lib.counterexamples.html#savedprop.savedprop.saved"><span class="id" title="variable">saved</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#i"><span class="id" title="variable">i</span></a> (<a class="idref" href="iris.bi.lib.counterexamples.html#savedprop.A"><span class="id" title="definition">A</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#i"><span class="id" title="variable">i</span></a>) <a class="idref" href="iris.bi.interface.html#e55eb026c3f0434cd18ddc04e5d7c1ac"><span class="id" title="notation">⊢</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#5dc7e3716258debaa55582f1f7a1340d"><span class="id" title="notation">¬</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#savedprop.A"><span class="id" title="definition">A</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#i"><span class="id" title="variable">i</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "#Hs !&gt; #HA". <span class="id" title="var">iPoseProof</span> "HA" <span class="id" title="keyword">as</span> "HA'".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "HA'" <span class="id" title="keyword">as</span> (<span class="id" title="var">P</span>) "[#HNP HsP]". <span class="id" title="var">iApply</span> "HNP".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <a class="idref" href="iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="iris.bi.lib.counterexamples.html#savedprop.savedprop.sprop_agree"><span class="id" title="variable">sprop_agree</span></a> <span class="id" title="var">i</span> <span class="id" title="var">P</span> (<a class="idref" href="iris.bi.lib.counterexamples.html#savedprop.A"><span class="id" title="definition">A</span></a> <span class="id" title="var">i</span>) <a class="idref" href="iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[]"<a class="idref" href="iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "#[_ HP]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "HP". <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="savedprop.saved_A"><span class="id" title="lemma">saved_A</span></a> <span class="id" title="var">i</span> : <a class="idref" href="iris.bi.lib.counterexamples.html#savedprop.savedprop.saved"><span class="id" title="variable">saved</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#i"><span class="id" title="variable">i</span></a> (<a class="idref" href="iris.bi.lib.counterexamples.html#savedprop.A"><span class="id" title="definition">A</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#i"><span class="id" title="variable">i</span></a>) <a class="idref" href="iris.bi.interface.html#e55eb026c3f0434cd18ddc04e5d7c1ac"><span class="id" title="notation">⊢</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#savedprop.A"><span class="id" title="definition">A</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#i"><span class="id" title="variable">i</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "#Hs". <span class="id" title="var">iExists</span> (<a class="idref" href="iris.bi.lib.counterexamples.html#savedprop.A"><span class="id" title="definition">A</span></a> <span class="id" title="var">i</span>). <span class="id" title="var">iFrame</span> "#".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> <a class="idref" href="iris.bi.lib.counterexamples.html#savedprop.saved_NA"><span class="id" title="lemma">saved_NA</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="savedprop.contradiction"><span class="id" title="lemma">contradiction</span></a> : <a class="idref" href="../html-stdpp/stdpp.base.html#c355ddcd7bc517c0d78bdc33e3c6747d"><span class="id" title="notation">False</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="keyword">All</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="iris.bi.lib.counterexamples.html#savedprop.savedprop.consistency"><span class="id" title="variable">consistency</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="iris.bi.lib.counterexamples.html#savedprop.A_alloc"><span class="id" title="lemma">A_alloc</span></a> <span class="id" title="keyword">as</span> (<span class="id" title="var">i</span>) "#H".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iPoseProof</span> <a class="idref" href="iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="iris.bi.lib.counterexamples.html#savedprop.saved_NA"><span class="id" title="lemma">saved_NA</span></a> <a class="idref" href="iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "H"<a class="idref" href="iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "HN".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="iris.bi.lib.counterexamples.html#savedprop.savedprop.bupd_intro"><span class="id" title="variable">bupd_intro</span></a>. <span class="id" title="var">iApply</span> "HN". <span class="id" title="var">iApply</span> <a class="idref" href="iris.bi.lib.counterexamples.html#savedprop.saved_A"><span class="id" title="lemma">saved_A</span></a>. <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="iris.bi.lib.counterexamples.html#savedprop.savedprop"><span class="id" title="section">savedprop</span></a>. <span class="id" title="keyword">End</span> <a class="idref" href="iris.bi.lib.counterexamples.html#savedprop"><span class="id" title="module">savedprop</span></a>.<br/>

<br/>
</div>

<div class="doc">
This proves that we need the ▷ when opening invariants. 
</div>
<div class="code">
<span class="id" title="keyword">Module</span> <a name="inv"><span class="id" title="module">inv</span></a>. <span class="id" title="keyword">Section</span> <a name="inv.inv"><span class="id" title="section">inv</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a class="idref" href="iris.bi.derived_connectives.html#BiAffine"><span class="id" title="class">BiAffine</span></a> <span class="id" title="var">PROP</span>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Types</span> <span class="id" title="var">P</span> : <a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.PROP"><span class="id" title="variable">PROP</span></a>.<br/>

<br/>
</div>

<div class="doc">
Assumptions  We have the update modality (two classes: empty/full mask) 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <a name="inv.mask"><span class="id" title="inductive">mask</span></a> := <a name="inv.M0"><span class="id" title="constructor">M0</span></a> | <a name="inv.M1"><span class="id" title="constructor">M1</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> (<span class="id" title="var">fupd</span> : <a class="idref" href="iris.bi.lib.counterexamples.html#inv.mask"><span class="id" title="inductive">mask</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.PROP"><span class="id" title="variable">PROP</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.PROP"><span class="id" title="variable">PROP</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="var">Arguments</span> <span class="id" title="var">fupd</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>%<span class="id" title="var">I</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Hypothesis</span> <a name="inv.inv.fupd_intro"><span class="id" title="variable">fupd_intro</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <span class="id" title="var">E</span> <span class="id" title="var">P</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="iris.bi.interface.html#e55eb026c3f0434cd18ddc04e5d7c1ac"><span class="id" title="notation">⊢</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.fupd"><span class="id" title="variable">fupd</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Hypothesis</span> <a name="inv.inv.fupd_mono"><span class="id" title="variable">fupd_mono</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <span class="id" title="var">E</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">(</span></a><a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="iris.bi.interface.html#e55eb026c3f0434cd18ddc04e5d7c1ac"><span class="id" title="notation">⊢</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#Q"><span class="id" title="variable">Q</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.fupd"><span class="id" title="variable">fupd</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="iris.bi.interface.html#e55eb026c3f0434cd18ddc04e5d7c1ac"><span class="id" title="notation">⊢</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.fupd"><span class="id" title="variable">fupd</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#Q"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Hypothesis</span> <a name="inv.inv.fupd_fupd"><span class="id" title="variable">fupd_fupd</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <span class="id" title="var">E</span> <span class="id" title="var">P</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.fupd"><span class="id" title="variable">fupd</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#E"><span class="id" title="variable">E</span></a> (<a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.fupd"><span class="id" title="variable">fupd</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a>) <a class="idref" href="iris.bi.interface.html#e55eb026c3f0434cd18ddc04e5d7c1ac"><span class="id" title="notation">⊢</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.fupd"><span class="id" title="variable">fupd</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Hypothesis</span> <a name="inv.inv.fupd_frame_l"><span class="id" title="variable">fupd_frame_l</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <span class="id" title="var">E</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.fupd"><span class="id" title="variable">fupd</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#Q"><span class="id" title="variable">Q</span></a> <a class="idref" href="iris.bi.interface.html#e55eb026c3f0434cd18ddc04e5d7c1ac"><span class="id" title="notation">⊢</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.fupd"><span class="id" title="variable">fupd</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#E"><span class="id" title="variable">E</span></a> (<a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#Q"><span class="id" title="variable">Q</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Hypothesis</span> <a name="inv.inv.fupd_mask_mono"><span class="id" title="variable">fupd_mask_mono</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <span class="id" title="var">P</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.fupd"><span class="id" title="variable">fupd</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.M0"><span class="id" title="constructor">M0</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="iris.bi.interface.html#e55eb026c3f0434cd18ddc04e5d7c1ac"><span class="id" title="notation">⊢</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.fupd"><span class="id" title="variable">fupd</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.M1"><span class="id" title="constructor">M1</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a>.<br/>

<br/>
</div>

<div class="doc">
We have invariants 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> (<span class="id" title="var">name</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">inv</span> : <a class="idref" href="iris.bi.lib.counterexamples.html#name"><span class="id" title="variable">name</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.PROP"><span class="id" title="variable">PROP</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.PROP"><span class="id" title="variable">PROP</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="var">Arguments</span> <span class="id" title="var">inv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>%<span class="id" title="var">I</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Hypothesis</span> <a name="inv.inv.inv_persistent"><span class="id" title="variable">inv_persistent</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <span class="id" title="var">i</span> <span class="id" title="var">P</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="iris.bi.derived_connectives.html#Persistent"><span class="id" title="class">Persistent</span></a> (<a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.inv"><span class="id" title="variable">inv</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Hypothesis</span> <a name="inv.inv.inv_alloc"><span class="id" title="variable">inv_alloc</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <span class="id" title="var">P</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="iris.bi.interface.html#e55eb026c3f0434cd18ddc04e5d7c1ac"><span class="id" title="notation">⊢</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.fupd"><span class="id" title="variable">fupd</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.M1"><span class="id" title="constructor">M1</span></a> (<a class="idref" href="iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">∃</span></a> <span class="id" title="var">i</span><a class="idref" href="iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">,</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.inv"><span class="id" title="variable">inv</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Hypothesis</span> <a name="inv.inv.inv_fupd"><span class="id" title="variable">inv_fupd</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <span class="id" title="var">i</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span> <span class="id" title="var">R</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">(</span></a><a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#Q"><span class="id" title="variable">Q</span></a> <a class="idref" href="iris.bi.interface.html#e55eb026c3f0434cd18ddc04e5d7c1ac"><span class="id" title="notation">⊢</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.fupd"><span class="id" title="variable">fupd</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.M0"><span class="id" title="constructor">M0</span></a> (<a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#R"><span class="id" title="variable">R</span></a>)<a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">(</span></a><a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.inv"><span class="id" title="variable">inv</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#Q"><span class="id" title="variable">Q</span></a> <a class="idref" href="iris.bi.interface.html#e55eb026c3f0434cd18ddc04e5d7c1ac"><span class="id" title="notation">⊢</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.fupd"><span class="id" title="variable">fupd</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.M1"><span class="id" title="constructor">M1</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#R"><span class="id" title="variable">R</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">)</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;We&nbsp;have&nbsp;tokens&nbsp;for&nbsp;a&nbsp;little&nbsp;"two-state&nbsp;STS":&nbsp;<span class="inlinecode"><span class="id" title="var">start</span></span>&nbsp;-&gt;&nbsp;<span class="inlinecode"><span class="id" title="var">finish</span></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;state.&nbsp;<span class="inlinecode"><span class="id" title="var">start</span></span>&nbsp;also&nbsp;asserts&nbsp;the&nbsp;exact&nbsp;state;&nbsp;it&nbsp;is&nbsp;only&nbsp;ever&nbsp;owned&nbsp;by&nbsp;the<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;invariant.&nbsp;&nbsp;<span class="inlinecode"><span class="id" title="var">finished</span></span>&nbsp;is&nbsp;duplicable.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Posssible&nbsp;implementations&nbsp;of&nbsp;these&nbsp;axioms:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Using&nbsp;the&nbsp;STS&nbsp;monoid&nbsp;of&nbsp;a&nbsp;two-state&nbsp;STS,&nbsp;where&nbsp;<span class="inlinecode"><span class="id" title="var">start</span></span>&nbsp;is&nbsp;the<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;authoritative&nbsp;saying&nbsp;the&nbsp;state&nbsp;is&nbsp;exactly&nbsp;<span class="inlinecode"><span class="id" title="var">start</span></span>,&nbsp;and&nbsp;<span class="inlinecode"><span class="id" title="var">finish</span></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;is&nbsp;the&nbsp;"we&nbsp;are&nbsp;at&nbsp;least&nbsp;in&nbsp;state&nbsp;<span class="inlinecode"><span class="id" title="var">finish</span></span>"&nbsp;typically&nbsp;owned&nbsp;by&nbsp;threads.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Ex&nbsp;()&nbsp;+_#&nbsp;()<br/>
&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> (<span class="id" title="var">gname</span> : <span class="id" title="keyword">Type</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> (<span class="id" title="var">start</span> <span class="id" title="var">finished</span> : <a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.gname"><span class="id" title="variable">gname</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.PROP"><span class="id" title="variable">PROP</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Hypothesis</span> <a name="inv.inv.sts_alloc"><span class="id" title="variable">sts_alloc</span></a> : <a class="idref" href="iris.bi.interface.html#b7d65d242d889c3e37aca6013a51bfad"><span class="id" title="notation">⊢</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.fupd"><span class="id" title="variable">fupd</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.M0"><span class="id" title="constructor">M0</span></a> (<a class="idref" href="iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">∃</span></a> <span class="id" title="var">γ</span><a class="idref" href="iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">,</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.start"><span class="id" title="variable">start</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#b0e5ed29efd576246de3282fa163293b"><span class="id" title="variable">γ</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Hypotheses</span> <a name="inv.inv.start_finish"><span class="id" title="variable">start_finish</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <span class="id" title="var">γ</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.start"><span class="id" title="variable">start</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#b0e5ed29efd576246de3282fa163293b"><span class="id" title="variable">γ</span></a> <a class="idref" href="iris.bi.interface.html#e55eb026c3f0434cd18ddc04e5d7c1ac"><span class="id" title="notation">⊢</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.fupd"><span class="id" title="variable">fupd</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.M0"><span class="id" title="constructor">M0</span></a> (<a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.finished"><span class="id" title="variable">finished</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#b0e5ed29efd576246de3282fa163293b"><span class="id" title="variable">γ</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Hypothesis</span> <a name="inv.inv.finished_not_start"><span class="id" title="variable">finished_not_start</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <span class="id" title="var">γ</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.start"><span class="id" title="variable">start</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#b0e5ed29efd576246de3282fa163293b"><span class="id" title="variable">γ</span></a> <a class="idref" href="iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.finished"><span class="id" title="variable">finished</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#b0e5ed29efd576246de3282fa163293b"><span class="id" title="variable">γ</span></a> <a class="idref" href="iris.bi.interface.html#e55eb026c3f0434cd18ddc04e5d7c1ac"><span class="id" title="notation">⊢</span></a> <a class="idref" href="iris.bi.interface.html#b2ee2124ec247e9a6763a34086c13c4b"><span class="id" title="notation">False</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Hypothesis</span> <a name="inv.inv.finished_dup"><span class="id" title="variable">finished_dup</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <span class="id" title="var">γ</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.finished"><span class="id" title="variable">finished</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#b0e5ed29efd576246de3282fa163293b"><span class="id" title="variable">γ</span></a> <a class="idref" href="iris.bi.interface.html#e55eb026c3f0434cd18ddc04e5d7c1ac"><span class="id" title="notation">⊢</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.finished"><span class="id" title="variable">finished</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#b0e5ed29efd576246de3282fa163293b"><span class="id" title="variable">γ</span></a> <a class="idref" href="iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.finished"><span class="id" title="variable">finished</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#b0e5ed29efd576246de3282fa163293b"><span class="id" title="variable">γ</span></a>.<br/>

<br/>
</div>

<div class="doc">
We assume that we cannot update to false. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Hypothesis</span> <a name="inv.inv.consistency"><span class="id" title="variable">consistency</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">¬</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">(</span></a><a class="idref" href="iris.bi.interface.html#b7d65d242d889c3e37aca6013a51bfad"><span class="id" title="notation">⊢</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.fupd"><span class="id" title="variable">fupd</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.M1"><span class="id" title="constructor">M1</span></a> <a class="idref" href="iris.bi.interface.html#b2ee2124ec247e9a6763a34086c13c4b"><span class="id" title="notation">False</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#b02645851bc60f28087c4c8d90376442"><span class="id" title="notation">)</span></a>.<br/>

<br/>
</div>

<div class="doc">
Some general lemmas and proof mode compatibility. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="inv.inv_fupd'"><span class="id" title="lemma">inv_fupd'</span></a> <span class="id" title="var">i</span> <span class="id" title="var">P</span> <span class="id" title="var">R</span> : <a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.inv"><span class="id" title="variable">inv</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a> <a class="idref" href="iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">(</span></a><a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="iris.bi.interface.html#6e96398fec71e244af9dd75e40876ca6"><span class="id" title="notation">-∗</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.fupd"><span class="id" title="variable">fupd</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.M0"><span class="id" title="constructor">M0</span></a> (<a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.fupd"><span class="id" title="variable">fupd</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.M1"><span class="id" title="constructor">M1</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#R"><span class="id" title="variable">R</span></a>)<a class="idref" href="iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">)</span></a> <a class="idref" href="iris.bi.interface.html#e55eb026c3f0434cd18ddc04e5d7c1ac"><span class="id" title="notation">⊢</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.fupd"><span class="id" title="variable">fupd</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.M1"><span class="id" title="constructor">M1</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#R"><span class="id" title="variable">R</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "(#HiP &amp; HP)". <span class="id" title="var">iApply</span> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.fupd_fupd"><span class="id" title="variable">fupd_fupd</span></a>. <span class="id" title="var">iApply</span> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.inv_fupd"><span class="id" title="variable">inv_fupd</span></a>; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iSplit</span>; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>. <span class="id" title="var">iExact</span> "HP". }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "(HP &amp; HPw)". <span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> "HPw".<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Instance</span> <a name="inv.fupd_mono'"><span class="id" title="instance">fupd_mono'</span></a> <span class="id" title="var">E</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="iris.bi.interface.html#483c3ba497d1de9dae43a4b1098eeeea"><span class="id" title="notation">(⊢)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="iris.bi.interface.html#483c3ba497d1de9dae43a4b1098eeeea"><span class="id" title="notation">(⊢)</span></a>) (<a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.fupd"><span class="id" title="variable">fupd</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#E"><span class="id" title="variable">E</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span> ?. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.fupd_mono"><span class="id" title="variable">fupd_mono</span></a>. <span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Instance</span> <a name="inv.fupd_proper"><span class="id" title="instance">fupd_proper</span></a> <span class="id" title="var">E</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="iris.bi.interface.html#27fb92169ca7e7a729c109d9cd068719"><span class="id" title="notation">(⊣⊢)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="iris.bi.interface.html#27fb92169ca7e7a729c109d9cd068719"><span class="id" title="notation">(⊣⊢)</span></a>) (<a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.fupd"><span class="id" title="variable">fupd</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#E"><span class="id" title="variable">E</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span>; <span class="id" title="tactic">rewrite</span> !<a class="idref" href="iris.bi.interface.html#bi.equiv_spec"><span class="id" title="lemma">bi.equiv_spec</span></a>=&gt; -[??]; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.fupd_mono"><span class="id" title="variable">fupd_mono</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="inv.fupd_frame_r"><span class="id" title="lemma">fupd_frame_r</span></a> <span class="id" title="var">E</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span> : <a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.fupd"><span class="id" title="variable">fupd</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#Q"><span class="id" title="variable">Q</span></a> <a class="idref" href="iris.bi.interface.html#e55eb026c3f0434cd18ddc04e5d7c1ac"><span class="id" title="notation">⊢</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.fupd"><span class="id" title="variable">fupd</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#E"><span class="id" title="variable">E</span></a> (<a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#Q"><span class="id" title="variable">Q</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="../html-stdpp/stdpp.base.html#comm"><span class="id" title="definition">comm</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.fupd_frame_l"><span class="id" title="variable">fupd_frame_l</span></a> <a class="idref" href="../html-stdpp/stdpp.base.html#comm"><span class="id" title="definition">comm</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Global Instance</span> <a name="inv.elim_fupd_fupd"><span class="id" title="instance">elim_fupd_fupd</span></a> <span class="id" title="var">p</span> <span class="id" title="var">E</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="iris.proofmode.classes.html#ElimModal"><span class="id" title="class">ElimModal</span></a> <a class="idref" href="../html-stdpp/stdpp.base.html#e2da2dc5adb39aa5394d64f0045c62a4"><span class="id" title="notation">True</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> (<a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.fupd"><span class="id" title="variable">fupd</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a>) <a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a> (<a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.fupd"><span class="id" title="variable">fupd</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#Q"><span class="id" title="variable">Q</span></a>) (<a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.fupd"><span class="id" title="variable">fupd</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#Q"><span class="id" title="variable">Q</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> /<a class="idref" href="iris.proofmode.classes.html#ElimModal"><span class="id" title="class">ElimModal</span></a> <a class="idref" href="iris.bi.derived_laws_bi.html#bi.intuitionistically_if_elim"><span class="id" title="lemma">bi.intuitionistically_if_elim</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="iris.bi.lib.counterexamples.html#inv.fupd_frame_r"><span class="id" title="lemma">fupd_frame_r</span></a> <a class="idref" href="iris.bi.derived_laws_bi.html#bi.wand_elim_r"><span class="id" title="lemma">bi.wand_elim_r</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.fupd_fupd"><span class="id" title="variable">fupd_fupd</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Global Instance</span> <a name="inv.elim_fupd0_fupd1"><span class="id" title="instance">elim_fupd0_fupd1</span></a> <span class="id" title="var">p</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="iris.proofmode.classes.html#ElimModal"><span class="id" title="class">ElimModal</span></a> <a class="idref" href="../html-stdpp/stdpp.base.html#e2da2dc5adb39aa5394d64f0045c62a4"><span class="id" title="notation">True</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> (<a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.fupd"><span class="id" title="variable">fupd</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.M0"><span class="id" title="constructor">M0</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a>) <a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a> (<a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.fupd"><span class="id" title="variable">fupd</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.M1"><span class="id" title="constructor">M1</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#Q"><span class="id" title="variable">Q</span></a>) (<a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.fupd"><span class="id" title="variable">fupd</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.M1"><span class="id" title="constructor">M1</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#Q"><span class="id" title="variable">Q</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> /<a class="idref" href="iris.proofmode.classes.html#ElimModal"><span class="id" title="class">ElimModal</span></a> <a class="idref" href="iris.bi.derived_laws_bi.html#bi.intuitionistically_if_elim"><span class="id" title="lemma">bi.intuitionistically_if_elim</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="iris.bi.lib.counterexamples.html#inv.fupd_frame_r"><span class="id" title="lemma">fupd_frame_r</span></a> <a class="idref" href="iris.bi.derived_laws_bi.html#bi.wand_elim_r"><span class="id" title="lemma">bi.wand_elim_r</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.fupd_mask_mono"><span class="id" title="variable">fupd_mask_mono</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.fupd_fupd"><span class="id" title="variable">fupd_fupd</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Global Instance</span> <a name="inv.exists_split_fupd0"><span class="id" title="instance">exists_split_fupd0</span></a> {<span class="id" title="var">A</span>} <span class="id" title="var">E</span> <span class="id" title="var">P</span> (<span class="id" title="var">Φ</span> : <a class="idref" href="iris.bi.lib.counterexamples.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.PROP"><span class="id" title="variable">PROP</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="iris.proofmode.classes.html#FromExist"><span class="id" title="class">FromExist</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#0a86c68449f31709b242a8cc62019df8"><span class="id" title="variable">Φ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="iris.proofmode.classes.html#FromExist"><span class="id" title="class">FromExist</span></a> (<a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.fupd"><span class="id" title="variable">fupd</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a>) (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.fupd"><span class="id" title="variable">fupd</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#E"><span class="id" title="variable">E</span></a> (<a class="idref" href="iris.bi.lib.counterexamples.html#0a86c68449f31709b242a8cc62019df8"><span class="id" title="variable">Φ</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#a"><span class="id" title="variable">a</span></a>)).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="iris.proofmode.classes.html#FromExist"><span class="id" title="class">FromExist</span></a>=&gt;<span class="id" title="var">HP</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="iris.bi.interface.html#bi.exist_elim"><span class="id" title="lemma">bi.exist_elim</span></a>=&gt; <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.fupd_mono"><span class="id" title="variable">fupd_mono</span></a>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> -<span class="id" title="var">HP</span> -(<a class="idref" href="iris.bi.interface.html#bi.exist_intro"><span class="id" title="lemma">bi.exist_intro</span></a> <span class="id" title="var">a</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Now to the actual counterexample. We start with a weird form of saved propositions. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="inv.saved"><span class="id" title="definition">saved</span></a> (<span class="id" title="var">γ</span> : <a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.gname"><span class="id" title="variable">gname</span></a>) (<span class="id" title="var">P</span> : <a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.PROP"><span class="id" title="variable">PROP</span></a>) : <a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.PROP"><span class="id" title="variable">PROP</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">∃</span></a> <span class="id" title="var">i</span><a class="idref" href="iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">,</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.inv"><span class="id" title="variable">inv</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#i"><span class="id" title="variable">i</span></a> (<a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.start"><span class="id" title="variable">start</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#b0e5ed29efd576246de3282fa163293b"><span class="id" title="variable">γ</span></a> <a class="idref" href="iris.bi.interface.html#df8727fb8673700193f111b03d29db4e"><span class="id" title="notation">∨</span></a> <a class="idref" href="iris.bi.interface.html#df8727fb8673700193f111b03d29db4e"><span class="id" title="notation">(</span></a><a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.finished"><span class="id" title="variable">finished</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#b0e5ed29efd576246de3282fa163293b"><span class="id" title="variable">γ</span></a> <a class="idref" href="iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a> <a class="idref" href="iris.bi.derived_connectives.html#ca36a4dbd976785c580c311a32a8423e"><span class="id" title="notation">□</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a><a class="idref" href="iris.bi.interface.html#df8727fb8673700193f111b03d29db4e"><span class="id" title="notation">)</span></a>))%<span class="id" title="var">I</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Global Instance</span> <a name="inv.saved_persistent"><span class="id" title="instance">saved_persistent</span></a> <span class="id" title="var">γ</span> <span class="id" title="var">P</span> : <a class="idref" href="iris.bi.derived_connectives.html#Persistent"><span class="id" title="class">Persistent</span></a> (<a class="idref" href="iris.bi.lib.counterexamples.html#inv.saved"><span class="id" title="definition">saved</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#b0e5ed29efd576246de3282fa163293b"><span class="id" title="variable">γ</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a>) := <span class="id" title="var">_</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="inv.saved_alloc"><span class="id" title="lemma">saved_alloc</span></a> (<span class="id" title="var">P</span> : <a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.gname"><span class="id" title="variable">gname</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.PROP"><span class="id" title="variable">PROP</span></a>) : <a class="idref" href="iris.bi.interface.html#b7d65d242d889c3e37aca6013a51bfad"><span class="id" title="notation">⊢</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.fupd"><span class="id" title="variable">fupd</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.M1"><span class="id" title="constructor">M1</span></a> (<a class="idref" href="iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">∃</span></a> <span class="id" title="var">γ</span><a class="idref" href="iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">,</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.saved"><span class="id" title="definition">saved</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#b0e5ed29efd576246de3282fa163293b"><span class="id" title="variable">γ</span></a> (<a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#b0e5ed29efd576246de3282fa163293b"><span class="id" title="variable">γ</span></a>)).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "". <span class="id" title="var">iMod</span> (<a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.sts_alloc"><span class="id" title="variable">sts_alloc</span></a>) <span class="id" title="keyword">as</span> (<span class="id" title="var">γ</span>) "Hs".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.inv_alloc"><span class="id" title="variable">inv_alloc</span></a> (<a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.start"><span class="id" title="variable">start</span></a> <span class="id" title="var">γ</span> <a class="idref" href="iris.bi.interface.html#df8727fb8673700193f111b03d29db4e"><span class="id" title="notation">∨</span></a> <a class="idref" href="iris.bi.interface.html#df8727fb8673700193f111b03d29db4e"><span class="id" title="notation">(</span></a><a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.finished"><span class="id" title="variable">finished</span></a> <span class="id" title="var">γ</span> <a class="idref" href="iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a> <a class="idref" href="iris.bi.derived_connectives.html#ca36a4dbd976785c580c311a32a8423e"><span class="id" title="notation">□</span></a> <a class="idref" href="iris.bi.derived_connectives.html#ca36a4dbd976785c580c311a32a8423e"><span class="id" title="notation">(</span></a><span class="id" title="var">P</span> <span class="id" title="var">γ</span><a class="idref" href="iris.bi.derived_connectives.html#ca36a4dbd976785c580c311a32a8423e"><span class="id" title="notation">)</span></a><a class="idref" href="iris.bi.interface.html#df8727fb8673700193f111b03d29db4e"><span class="id" title="notation">)</span></a>)%<span class="id" title="var">I</span> <a class="idref" href="iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[Hs]"<a class="idref" href="iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> (<span class="id" title="var">i</span>) "#Hi".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.fupd_intro"><span class="id" title="variable">fupd_intro</span></a>. <span class="id" title="tactic">by</span> <span class="id" title="var">iExists</span> <span class="id" title="var">γ</span>, <span class="id" title="var">i</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="inv.saved_cast"><span class="id" title="lemma">saved_cast</span></a> <span class="id" title="var">γ</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span> : <a class="idref" href="iris.bi.lib.counterexamples.html#inv.saved"><span class="id" title="definition">saved</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#b0e5ed29efd576246de3282fa163293b"><span class="id" title="variable">γ</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.saved"><span class="id" title="definition">saved</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#b0e5ed29efd576246de3282fa163293b"><span class="id" title="variable">γ</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#Q"><span class="id" title="variable">Q</span></a> <a class="idref" href="iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a> <a class="idref" href="iris.bi.derived_connectives.html#ca36a4dbd976785c580c311a32a8423e"><span class="id" title="notation">□</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="iris.bi.interface.html#e55eb026c3f0434cd18ddc04e5d7c1ac"><span class="id" title="notation">⊢</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.fupd"><span class="id" title="variable">fupd</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.M1"><span class="id" title="constructor">M1</span></a> (<a class="idref" href="iris.bi.derived_connectives.html#ca36a4dbd976785c580c311a32a8423e"><span class="id" title="notation">□</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#Q"><span class="id" title="variable">Q</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "(#HsP &amp; #HsQ &amp; #HP)". <span class="id" title="var">iDestruct</span> "HsP" <span class="id" title="keyword">as</span> (<span class="id" title="var">i</span>) "HiP".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> (<a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv_fupd'"><span class="id" title="lemma">inv_fupd'</span></a> <span class="id" title="var">i</span>). <span class="id" title="var">iSplit</span>; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "HaP". <span class="id" title="var">iAssert</span> (<a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.fupd"><span class="id" title="variable">fupd</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.M0"><span class="id" title="constructor">M0</span></a> (<a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.finished"><span class="id" title="variable">finished</span></a> <span class="id" title="var">γ</span>)) <span class="id" title="keyword">with</span> "[HaP]" <span class="id" title="keyword">as</span> "&gt; Hf".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iDestruct</span> "HaP" <span class="id" title="keyword">as</span> "[Hs | [Hf _]]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.start_finish"><span class="id" title="variable">start_finish</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.fupd_intro"><span class="id" title="variable">fupd_intro</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <a class="idref" href="iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.finished_dup"><span class="id" title="variable">finished_dup</span></a> <a class="idref" href="iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Hf"<a class="idref" href="iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "[Hf Hf']".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.fupd_intro"><span class="id" title="variable">fupd_intro</span></a>. <span class="id" title="var">iSplitL</span> "Hf'"; <span class="id" title="tactic">first</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Step&nbsp;2:&nbsp;Open&nbsp;the&nbsp;Q-invariant.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iClear</span> (<span class="id" title="var">i</span>) "HiP ". <span class="id" title="var">iDestruct</span> "HsQ" <span class="id" title="keyword">as</span> (<span class="id" title="var">i</span>) "HiQ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> (<a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv_fupd'"><span class="id" title="lemma">inv_fupd'</span></a> <span class="id" title="var">i</span>). <span class="id" title="var">iSplit</span>; <span class="id" title="tactic">first</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "[HaQ | [_ #HQ]]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iExFalso</span>. <span class="id" title="var">iApply</span> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.finished_not_start"><span class="id" title="variable">finished_not_start</span></a>. <span class="id" title="tactic">by</span> <span class="id" title="var">iFrame</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.fupd_intro"><span class="id" title="variable">fupd_intro</span></a>. <span class="id" title="var">iSplitL</span> "Hf".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">iRight</span>. <span class="id" title="tactic">by</span> <span class="id" title="var">iFrame</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.fupd_intro"><span class="id" title="variable">fupd_intro</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
And now we tie a bad knot. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <a name="a6c04521eb50e0155c6de3b83d9f2139"><span class="id" title="notation">&quot;</span></a>¬ P" := (<a class="idref" href="iris.bi.derived_connectives.html#ca36a4dbd976785c580c311a32a8423e"><span class="id" title="notation">□</span></a> <a class="idref" href="iris.bi.derived_connectives.html#ca36a4dbd976785c580c311a32a8423e"><span class="id" title="notation">(</span></a><span class="id" title="var">P</span> <a class="idref" href="iris.bi.interface.html#6e96398fec71e244af9dd75e40876ca6"><span class="id" title="notation">-∗</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.fupd"><span class="id" title="variable">fupd</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.M1"><span class="id" title="constructor">M1</span></a> <a class="idref" href="iris.bi.interface.html#b2ee2124ec247e9a6763a34086c13c4b"><span class="id" title="notation">False</span></a><a class="idref" href="iris.bi.derived_connectives.html#ca36a4dbd976785c580c311a32a8423e"><span class="id" title="notation">)</span></a>)%<span class="id" title="var">I</span> : <span class="id" title="var">bi_scope</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="inv.A"><span class="id" title="definition">A</span></a> <span class="id" title="var">i</span> : <a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.PROP"><span class="id" title="variable">PROP</span></a> := (<a class="idref" href="iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">∃</span></a> <span class="id" title="var">P</span><a class="idref" href="iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">,</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#a6c04521eb50e0155c6de3b83d9f2139"><span class="id" title="notation">¬</span></a><a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.saved"><span class="id" title="definition">saved</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a>)%<span class="id" title="var">I</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Global Instance</span> <a name="inv.A_persistent"><span class="id" title="instance">A_persistent</span></a> <span class="id" title="var">i</span> : <a class="idref" href="iris.bi.derived_connectives.html#Persistent"><span class="id" title="class">Persistent</span></a> (<a class="idref" href="iris.bi.lib.counterexamples.html#inv.A"><span class="id" title="definition">A</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#i"><span class="id" title="variable">i</span></a>) := <span class="id" title="var">_</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="inv.A_alloc"><span class="id" title="lemma">A_alloc</span></a> : <a class="idref" href="iris.bi.interface.html#b7d65d242d889c3e37aca6013a51bfad"><span class="id" title="notation">⊢</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.fupd"><span class="id" title="variable">fupd</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.M1"><span class="id" title="constructor">M1</span></a> (<a class="idref" href="iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">∃</span></a> <span class="id" title="var">i</span><a class="idref" href="iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">,</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.saved"><span class="id" title="definition">saved</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#i"><span class="id" title="variable">i</span></a> (<a class="idref" href="iris.bi.lib.counterexamples.html#inv.A"><span class="id" title="definition">A</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#i"><span class="id" title="variable">i</span></a>)).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.saved_alloc"><span class="id" title="lemma">saved_alloc</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="inv.saved_NA"><span class="id" title="lemma">saved_NA</span></a> <span class="id" title="var">i</span> : <a class="idref" href="iris.bi.lib.counterexamples.html#inv.saved"><span class="id" title="definition">saved</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#i"><span class="id" title="variable">i</span></a> (<a class="idref" href="iris.bi.lib.counterexamples.html#inv.A"><span class="id" title="definition">A</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#i"><span class="id" title="variable">i</span></a>) <a class="idref" href="iris.bi.interface.html#e55eb026c3f0434cd18ddc04e5d7c1ac"><span class="id" title="notation">⊢</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#a6c04521eb50e0155c6de3b83d9f2139"><span class="id" title="notation">¬</span></a><a class="idref" href="iris.bi.lib.counterexamples.html#inv.A"><span class="id" title="definition">A</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#i"><span class="id" title="variable">i</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "#Hi !&gt; #HA". <span class="id" title="var">iPoseProof</span> "HA" <span class="id" title="keyword">as</span> "HA'".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> "HA'" <span class="id" title="keyword">as</span> (<span class="id" title="var">P</span>) "#[HNP Hi']".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="iris.bi.lib.counterexamples.html#inv.saved_cast"><span class="id" title="lemma">saved_cast</span></a> <span class="id" title="var">i</span> (<a class="idref" href="iris.bi.lib.counterexamples.html#inv.A"><span class="id" title="definition">A</span></a> <span class="id" title="var">i</span>) <span class="id" title="var">P</span> <a class="idref" href="iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "[]"<a class="idref" href="iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "HP".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> "HNP".<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="inv.saved_A"><span class="id" title="lemma">saved_A</span></a> <span class="id" title="var">i</span> : <a class="idref" href="iris.bi.lib.counterexamples.html#inv.saved"><span class="id" title="definition">saved</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#i"><span class="id" title="variable">i</span></a> (<a class="idref" href="iris.bi.lib.counterexamples.html#inv.A"><span class="id" title="definition">A</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#i"><span class="id" title="variable">i</span></a>) <a class="idref" href="iris.bi.interface.html#e55eb026c3f0434cd18ddc04e5d7c1ac"><span class="id" title="notation">⊢</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.A"><span class="id" title="definition">A</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#i"><span class="id" title="variable">i</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "#Hi". <span class="id" title="var">iExists</span> (<a class="idref" href="iris.bi.lib.counterexamples.html#inv.A"><span class="id" title="definition">A</span></a> <span class="id" title="var">i</span>). <span class="id" title="var">iFrame</span> "#".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.saved_NA"><span class="id" title="lemma">saved_NA</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="inv.contradiction"><span class="id" title="lemma">contradiction</span></a> : <a class="idref" href="../html-stdpp/stdpp.base.html#c355ddcd7bc517c0d78bdc33e3c6747d"><span class="id" title="notation">False</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="keyword">All</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv.consistency"><span class="id" title="variable">consistency</span></a>. <span class="id" title="var">iIntros</span> "".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.A_alloc"><span class="id" title="lemma">A_alloc</span></a> <span class="id" title="keyword">as</span> (<span class="id" title="var">i</span>) "#H".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iPoseProof</span> <a class="idref" href="iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="iris.bi.lib.counterexamples.html#inv.saved_NA"><span class="id" title="lemma">saved_NA</span></a> <a class="idref" href="iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "H"<a class="idref" href="iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "HN".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "HN". <span class="id" title="var">iApply</span> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.saved_A"><span class="id" title="lemma">saved_A</span></a>. <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="iris.bi.lib.counterexamples.html#inv.inv"><span class="id" title="section">inv</span></a>. <span class="id" title="keyword">End</span> <a class="idref" href="iris.bi.lib.counterexamples.html#inv"><span class="id" title="module">inv</span></a>.<br/>

<br/>
</div>

<div class="doc">
This proves that if we have linear impredicative invariants, we can still
drop arbitrary resources (i.e., we can "defeat" linearity).
Variant 1: we assume a strong invariant creation lemma that lets us create
invariants in the "open" state. 
</div>
<div class="code">
<span class="id" title="keyword">Module</span> <a name="linear1"><span class="id" title="module">linear1</span></a>. <span class="id" title="keyword">Section</span> <a name="linear1.linear1"><span class="id" title="section">linear1</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<span class="id" title="var">PROP</span>: <a class="idref" href="iris.bi.interface.html#sbi"><span class="id" title="record">sbi</span></a>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Types</span> <span class="id" title="var">P</span> : <a class="idref" href="iris.bi.lib.counterexamples.html#linear1.linear1.PROP"><span class="id" title="variable">PROP</span></a>.<br/>

<br/>
</div>

<div class="doc">
Assumptions.  We have the mask-changing update modality (two classes: empty/full mask) 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <a name="linear1.mask"><span class="id" title="inductive">mask</span></a> := <a name="linear1.M0"><span class="id" title="constructor">M0</span></a> | <a name="linear1.M1"><span class="id" title="constructor">M1</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> (<span class="id" title="var">fupd</span> : <a class="idref" href="iris.bi.lib.counterexamples.html#linear1.mask"><span class="id" title="inductive">mask</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#linear1.mask"><span class="id" title="inductive">mask</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#linear1.linear1.PROP"><span class="id" title="variable">PROP</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#linear1.linear1.PROP"><span class="id" title="variable">PROP</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="var">Arguments</span> <span class="id" title="var">fupd</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>%<span class="id" title="var">I</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Hypothesis</span> <a name="linear1.linear1.fupd_intro"><span class="id" title="variable">fupd_intro</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <span class="id" title="var">E</span> <span class="id" title="var">P</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="iris.bi.interface.html#e55eb026c3f0434cd18ddc04e5d7c1ac"><span class="id" title="notation">⊢</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#linear1.linear1.fupd"><span class="id" title="variable">fupd</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Hypothesis</span> <a name="linear1.linear1.fupd_mono"><span class="id" title="variable">fupd_mono</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">(</span></a><a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="iris.bi.interface.html#e55eb026c3f0434cd18ddc04e5d7c1ac"><span class="id" title="notation">⊢</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#Q"><span class="id" title="variable">Q</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#linear1.linear1.fupd"><span class="id" title="variable">fupd</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#E1"><span class="id" title="variable">E1</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#E2"><span class="id" title="variable">E2</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="iris.bi.interface.html#e55eb026c3f0434cd18ddc04e5d7c1ac"><span class="id" title="notation">⊢</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#linear1.linear1.fupd"><span class="id" title="variable">fupd</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#E1"><span class="id" title="variable">E1</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#E2"><span class="id" title="variable">E2</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#Q"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Hypothesis</span> <a name="linear1.linear1.fupd_fupd"><span class="id" title="variable">fupd_fupd</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span> <span class="id" title="var">E3</span> <span class="id" title="var">P</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#linear1.linear1.fupd"><span class="id" title="variable">fupd</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#E1"><span class="id" title="variable">E1</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#E2"><span class="id" title="variable">E2</span></a> (<a class="idref" href="iris.bi.lib.counterexamples.html#linear1.linear1.fupd"><span class="id" title="variable">fupd</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#E2"><span class="id" title="variable">E2</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#E3"><span class="id" title="variable">E3</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a>) <a class="idref" href="iris.bi.interface.html#e55eb026c3f0434cd18ddc04e5d7c1ac"><span class="id" title="notation">⊢</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#linear1.linear1.fupd"><span class="id" title="variable">fupd</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#E1"><span class="id" title="variable">E1</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#E3"><span class="id" title="variable">E3</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Hypothesis</span> <a name="linear1.linear1.fupd_frame_l"><span class="id" title="variable">fupd_frame_l</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#linear1.linear1.fupd"><span class="id" title="variable">fupd</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#E1"><span class="id" title="variable">E1</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#E2"><span class="id" title="variable">E2</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#Q"><span class="id" title="variable">Q</span></a> <a class="idref" href="iris.bi.interface.html#e55eb026c3f0434cd18ddc04e5d7c1ac"><span class="id" title="notation">⊢</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#linear1.linear1.fupd"><span class="id" title="variable">fupd</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#E1"><span class="id" title="variable">E1</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#E2"><span class="id" title="variable">E2</span></a> (<a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#Q"><span class="id" title="variable">Q</span></a>).<br/>

<br/>
</div>

<div class="doc">
We have cancelable invariants. (Really they would have fractions at
  <span class="inlinecode"><a class="idref" href="iris.base_logic.lib.cancelable_invariants.html#cinv_own"><span class="id" title="definition">cinv_own</span></a></span> but we do not need that. They would also have a name matching
  the <span class="inlinecode"><a class="idref" href="iris.bi.lib.counterexamples.html#linear2.mask"><span class="id" title="inductive">mask</span></a></span> type, but we do not need that either.) 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> (<span class="id" title="var">gname</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">cinv</span> : <a class="idref" href="iris.bi.lib.counterexamples.html#gname"><span class="id" title="variable">gname</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#linear1.linear1.PROP"><span class="id" title="variable">PROP</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#linear1.linear1.PROP"><span class="id" title="variable">PROP</span></a>) (<span class="id" title="var">cinv_own</span> : <a class="idref" href="iris.bi.lib.counterexamples.html#gname"><span class="id" title="variable">gname</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#linear1.linear1.PROP"><span class="id" title="variable">PROP</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Hypothesis</span> <a name="linear1.linear1.cinv_alloc_open"><span class="id" title="variable">cinv_alloc_open</span></a> :  <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <span class="id" title="var">P</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="iris.bi.interface.html#b7d65d242d889c3e37aca6013a51bfad"><span class="id" title="notation">⊢</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#linear1.linear1.fupd"><span class="id" title="variable">fupd</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#linear1.M1"><span class="id" title="constructor">M1</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#linear1.M0"><span class="id" title="constructor">M0</span></a> (<a class="idref" href="iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">∃</span></a> <span class="id" title="var">γ</span><a class="idref" href="iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">,</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#linear1.linear1.cinv"><span class="id" title="variable">cinv</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#b0e5ed29efd576246de3282fa163293b"><span class="id" title="variable">γ</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#linear1.linear1.cinv_own"><span class="id" title="variable">cinv_own</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#b0e5ed29efd576246de3282fa163293b"><span class="id" title="variable">γ</span></a> <a class="idref" href="iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a> <a class="idref" href="iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">(</span></a><a class="idref" href="iris.bi.interface.html#1ab064278224e8da215d0768a08713fe"><span class="id" title="notation">▷</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="iris.bi.interface.html#6e96398fec71e244af9dd75e40876ca6"><span class="id" title="notation">-∗</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#linear1.linear1.fupd"><span class="id" title="variable">fupd</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#linear1.M0"><span class="id" title="constructor">M0</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#linear1.M1"><span class="id" title="constructor">M1</span></a> <a class="idref" href="iris.bi.interface.html#8df71acffaf065fb9ed35fb4f412b070"><span class="id" title="notation">emp</span></a><a class="idref" href="iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">)</span></a>).<br/>

<br/>
</div>

<div class="doc">
Some general lemmas and proof mode compatibility. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Instance</span> <a name="linear1.fupd_mono'"><span class="id" title="instance">fupd_mono'</span></a> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="iris.bi.interface.html#483c3ba497d1de9dae43a4b1098eeeea"><span class="id" title="notation">(⊢)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="iris.bi.interface.html#483c3ba497d1de9dae43a4b1098eeeea"><span class="id" title="notation">(⊢)</span></a>) (<a class="idref" href="iris.bi.lib.counterexamples.html#linear1.linear1.fupd"><span class="id" title="variable">fupd</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#E1"><span class="id" title="variable">E1</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#E2"><span class="id" title="variable">E2</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span> ?. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="iris.bi.lib.counterexamples.html#linear1.linear1.fupd_mono"><span class="id" title="variable">fupd_mono</span></a>. <span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Instance</span> <a name="linear1.fupd_proper"><span class="id" title="instance">fupd_proper</span></a> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="iris.bi.interface.html#27fb92169ca7e7a729c109d9cd068719"><span class="id" title="notation">(⊣⊢)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="iris.bi.interface.html#27fb92169ca7e7a729c109d9cd068719"><span class="id" title="notation">(⊣⊢)</span></a>) (<a class="idref" href="iris.bi.lib.counterexamples.html#linear1.linear1.fupd"><span class="id" title="variable">fupd</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#E1"><span class="id" title="variable">E1</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#E2"><span class="id" title="variable">E2</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span>; <span class="id" title="tactic">rewrite</span> !<a class="idref" href="iris.bi.interface.html#bi.equiv_spec"><span class="id" title="lemma">bi.equiv_spec</span></a>=&gt; -[??]; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="iris.bi.lib.counterexamples.html#linear1.linear1.fupd_mono"><span class="id" title="variable">fupd_mono</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="linear1.fupd_frame_r"><span class="id" title="lemma">fupd_frame_r</span></a> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span> : <a class="idref" href="iris.bi.lib.counterexamples.html#linear1.linear1.fupd"><span class="id" title="variable">fupd</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#E1"><span class="id" title="variable">E1</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#E2"><span class="id" title="variable">E2</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#Q"><span class="id" title="variable">Q</span></a> <a class="idref" href="iris.bi.interface.html#e55eb026c3f0434cd18ddc04e5d7c1ac"><span class="id" title="notation">⊢</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#linear1.linear1.fupd"><span class="id" title="variable">fupd</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#E1"><span class="id" title="variable">E1</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#E2"><span class="id" title="variable">E2</span></a> (<a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#Q"><span class="id" title="variable">Q</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="../html-stdpp/stdpp.base.html#comm"><span class="id" title="definition">comm</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#linear1.linear1.fupd_frame_l"><span class="id" title="variable">fupd_frame_l</span></a> <a class="idref" href="../html-stdpp/stdpp.base.html#comm"><span class="id" title="definition">comm</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Global Instance</span> <a name="linear1.elim_fupd_fupd"><span class="id" title="instance">elim_fupd_fupd</span></a> <span class="id" title="var">p</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span> <span class="id" title="var">E3</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="iris.proofmode.classes.html#ElimModal"><span class="id" title="class">ElimModal</span></a> <a class="idref" href="../html-stdpp/stdpp.base.html#e2da2dc5adb39aa5394d64f0045c62a4"><span class="id" title="notation">True</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> (<a class="idref" href="iris.bi.lib.counterexamples.html#linear1.linear1.fupd"><span class="id" title="variable">fupd</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#E1"><span class="id" title="variable">E1</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#E2"><span class="id" title="variable">E2</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a>) <a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a> (<a class="idref" href="iris.bi.lib.counterexamples.html#linear1.linear1.fupd"><span class="id" title="variable">fupd</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#E1"><span class="id" title="variable">E1</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#E3"><span class="id" title="variable">E3</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#Q"><span class="id" title="variable">Q</span></a>) (<a class="idref" href="iris.bi.lib.counterexamples.html#linear1.linear1.fupd"><span class="id" title="variable">fupd</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#E2"><span class="id" title="variable">E2</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#E3"><span class="id" title="variable">E3</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#Q"><span class="id" title="variable">Q</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> /<a class="idref" href="iris.proofmode.classes.html#ElimModal"><span class="id" title="class">ElimModal</span></a> <a class="idref" href="iris.bi.derived_laws_bi.html#bi.intuitionistically_if_elim"><span class="id" title="lemma">bi.intuitionistically_if_elim</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="iris.bi.lib.counterexamples.html#linear1.fupd_frame_r"><span class="id" title="lemma">fupd_frame_r</span></a> <a class="idref" href="iris.bi.derived_laws_bi.html#bi.wand_elim_r"><span class="id" title="lemma">bi.wand_elim_r</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#linear1.linear1.fupd_fupd"><span class="id" title="variable">fupd_fupd</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Counterexample: now we can make any resource disappear. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="linear1.leak"><span class="id" title="lemma">leak</span></a> <span class="id" title="var">P</span> : <a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="iris.bi.interface.html#0f70793a7efc24c230ef5e3a6ac95b68"><span class="id" title="notation">-∗</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#linear1.linear1.fupd"><span class="id" title="variable">fupd</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#linear1.M1"><span class="id" title="constructor">M1</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#linear1.M1"><span class="id" title="constructor">M1</span></a> <a class="idref" href="iris.bi.interface.html#8df71acffaf065fb9ed35fb4f412b070"><span class="id" title="notation">emp</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "HP".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">INV</span> := (<a class="idref" href="iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">∃</span></a> <span class="id" title="var">γ</span> <span class="id" title="var">Q</span><a class="idref" href="iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">,</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#linear1.linear1.cinv"><span class="id" title="variable">cinv</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#b0e5ed29efd576246de3282fa163293b"><span class="id" title="variable">γ</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#Q"><span class="id" title="variable">Q</span></a> <a class="idref" href="iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#linear1.linear1.cinv_own"><span class="id" title="variable">cinv_own</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#b0e5ed29efd576246de3282fa163293b"><span class="id" title="variable">γ</span></a> <a class="idref" href="iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a> <span class="id" title="var">P</span>)%<span class="id" title="var">I</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> (<a class="idref" href="iris.bi.lib.counterexamples.html#linear1.linear1.cinv_alloc_open"><span class="id" title="variable">cinv_alloc_open</span></a> <span class="id" title="var">INV</span>) <span class="id" title="keyword">as</span> (<span class="id" title="var">γ</span>) "(Hinv &amp; Htok &amp; Hclose)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "Hclose". <span class="id" title="var">iNext</span>. <span class="id" title="var">iExists</span> <span class="id" title="var">γ</span>, <span class="id" title="var">_</span>. <span class="id" title="var">iFrame</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="iris.bi.lib.counterexamples.html#linear1.linear1"><span class="id" title="section">linear1</span></a>. <span class="id" title="keyword">End</span> <a class="idref" href="iris.bi.lib.counterexamples.html#linear1"><span class="id" title="module">linear1</span></a>.<br/>

<br/>
</div>

<div class="doc">
This proves that if we have linear impredicative invariants, we can still
drop arbitrary resources (i.e., we can "defeat" linearity).
Variant 2: maybe the strong invariant creation lemma (variant 1 above) is a bit
too obvious, so here we just assume that the invariant can depend on the chosen
<span class="inlinecode"><a class="idref" href="iris.proofmode.monpred.html#b0e5ed29efd576246de3282fa163293b"><span class="id" title="variable">γ</span></a></span>.  Moreover, we also have an accessor that gives back the invariant token
immediately, not just after the invariant got closed again.

<div class="paragraph"> </div>

The assumptions here match the proof rules in Iron, save for the side-condition
that the invariant must be "uniform".  In particular, <span class="inlinecode"><a class="idref" href="iris.base_logic.lib.cancelable_invariants.html#cinv_alloc"><span class="id" title="lemma">cinv_alloc</span></a></span> delays
handing out the <span class="inlinecode"><a class="idref" href="iris.base_logic.lib.cancelable_invariants.html#cinv_own"><span class="id" title="definition">cinv_own</span></a></span> token until after the invariant has been created so
that this can match Iron by picking <span class="inlinecode"><a class="idref" href="iris.base_logic.lib.cancelable_invariants.html#cinv_own"><span class="id" title="definition">cinv_own</span></a></span> <span class="inlinecode"><a class="idref" href="iris.proofmode.monpred.html#b0e5ed29efd576246de3282fa163293b"><span class="id" title="variable">γ</span></a></span> <span class="inlinecode">:=</span> <span class="inlinecode"><span class="id" title="var">fcinv_own</span></span> <span class="inlinecode"><a class="idref" href="iris.proofmode.monpred.html#b0e5ed29efd576246de3282fa163293b"><span class="id" title="variable">γ</span></a></span> <span class="inlinecode">1</span> <span class="inlinecode">∗</span>
<span class="inlinecode"><span class="id" title="var">fcinv_cancel_own</span></span> <span class="inlinecode"><a class="idref" href="iris.proofmode.monpred.html#b0e5ed29efd576246de3282fa163293b"><span class="id" title="variable">γ</span></a></span> <span class="inlinecode">1</span>. This means <span class="inlinecode"><a class="idref" href="iris.base_logic.lib.cancelable_invariants.html#cinv_own"><span class="id" title="definition">cinv_own</span></a></span> is not "uniform" in Iron terms,
which is why Iron does not suffer from this contradiction.

<div class="paragraph"> </div>

This also loosely matches VST's locks with stored resource invariants.
There, the stronger variant of the "unlock" rule (see Aquinas Hobor's PhD thesis
"Oracle Semantics", §4.7, p. 88) also permits putting the token of a lock
entirely into that lock.

</div>
<div class="code">
<span class="id" title="keyword">Module</span> <a name="linear2"><span class="id" title="module">linear2</span></a>. <span class="id" title="keyword">Section</span> <a name="linear2.linear2"><span class="id" title="section">linear2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<span class="id" title="var">PROP</span>: <a class="idref" href="iris.bi.interface.html#sbi"><span class="id" title="record">sbi</span></a>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Types</span> <span class="id" title="var">P</span> : <a class="idref" href="iris.bi.lib.counterexamples.html#linear2.linear2.PROP"><span class="id" title="variable">PROP</span></a>.<br/>

<br/>
</div>

<div class="doc">
Assumptions.  We have the mask-changing update modality (two classes: empty/full mask) 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <a name="linear2.mask"><span class="id" title="inductive">mask</span></a> := <a name="linear2.M0"><span class="id" title="constructor">M0</span></a> | <a name="linear2.M1"><span class="id" title="constructor">M1</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> (<span class="id" title="var">fupd</span> : <a class="idref" href="iris.bi.lib.counterexamples.html#linear2.mask"><span class="id" title="inductive">mask</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#linear2.mask"><span class="id" title="inductive">mask</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#linear2.linear2.PROP"><span class="id" title="variable">PROP</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#linear2.linear2.PROP"><span class="id" title="variable">PROP</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="var">Arguments</span> <span class="id" title="var">fupd</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>%<span class="id" title="var">I</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Hypothesis</span> <a name="linear2.linear2.fupd_intro"><span class="id" title="variable">fupd_intro</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <span class="id" title="var">E</span> <span class="id" title="var">P</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="iris.bi.interface.html#e55eb026c3f0434cd18ddc04e5d7c1ac"><span class="id" title="notation">⊢</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#linear2.linear2.fupd"><span class="id" title="variable">fupd</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Hypothesis</span> <a name="linear2.linear2.fupd_mono"><span class="id" title="variable">fupd_mono</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">(</span></a><a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="iris.bi.interface.html#e55eb026c3f0434cd18ddc04e5d7c1ac"><span class="id" title="notation">⊢</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#Q"><span class="id" title="variable">Q</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#linear2.linear2.fupd"><span class="id" title="variable">fupd</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#E1"><span class="id" title="variable">E1</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#E2"><span class="id" title="variable">E2</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="iris.bi.interface.html#e55eb026c3f0434cd18ddc04e5d7c1ac"><span class="id" title="notation">⊢</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#linear2.linear2.fupd"><span class="id" title="variable">fupd</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#E1"><span class="id" title="variable">E1</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#E2"><span class="id" title="variable">E2</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#Q"><span class="id" title="variable">Q</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Hypothesis</span> <a name="linear2.linear2.fupd_fupd"><span class="id" title="variable">fupd_fupd</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span> <span class="id" title="var">E3</span> <span class="id" title="var">P</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#linear2.linear2.fupd"><span class="id" title="variable">fupd</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#E1"><span class="id" title="variable">E1</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#E2"><span class="id" title="variable">E2</span></a> (<a class="idref" href="iris.bi.lib.counterexamples.html#linear2.linear2.fupd"><span class="id" title="variable">fupd</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#E2"><span class="id" title="variable">E2</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#E3"><span class="id" title="variable">E3</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a>) <a class="idref" href="iris.bi.interface.html#e55eb026c3f0434cd18ddc04e5d7c1ac"><span class="id" title="notation">⊢</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#linear2.linear2.fupd"><span class="id" title="variable">fupd</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#E1"><span class="id" title="variable">E1</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#E3"><span class="id" title="variable">E3</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Hypothesis</span> <a name="linear2.linear2.fupd_frame_l"><span class="id" title="variable">fupd_frame_l</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#linear2.linear2.fupd"><span class="id" title="variable">fupd</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#E1"><span class="id" title="variable">E1</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#E2"><span class="id" title="variable">E2</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#Q"><span class="id" title="variable">Q</span></a> <a class="idref" href="iris.bi.interface.html#e55eb026c3f0434cd18ddc04e5d7c1ac"><span class="id" title="notation">⊢</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#linear2.linear2.fupd"><span class="id" title="variable">fupd</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#E1"><span class="id" title="variable">E1</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#E2"><span class="id" title="variable">E2</span></a> (<a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#Q"><span class="id" title="variable">Q</span></a>).<br/>

<br/>
</div>

<div class="doc">
We have cancelable invariants. (Really they would have fractions at
  <span class="inlinecode"><a class="idref" href="iris.base_logic.lib.cancelable_invariants.html#cinv_own"><span class="id" title="definition">cinv_own</span></a></span> but we do not need that. They would also have a name matching
  the <span class="inlinecode"><a class="idref" href="iris.bi.lib.counterexamples.html#linear2.mask"><span class="id" title="inductive">mask</span></a></span> type, but we do not need that either.) 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> (<span class="id" title="var">gname</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">cinv</span> : <a class="idref" href="iris.bi.lib.counterexamples.html#gname"><span class="id" title="variable">gname</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#linear2.linear2.PROP"><span class="id" title="variable">PROP</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#linear2.linear2.PROP"><span class="id" title="variable">PROP</span></a>) (<span class="id" title="var">cinv_own</span> : <a class="idref" href="iris.bi.lib.counterexamples.html#gname"><span class="id" title="variable">gname</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#linear2.linear2.PROP"><span class="id" title="variable">PROP</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Hypothesis</span> <a name="linear2.linear2.cinv_alloc"><span class="id" title="variable">cinv_alloc</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <span class="id" title="var">E</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="iris.bi.interface.html#b7d65d242d889c3e37aca6013a51bfad"><span class="id" title="notation">⊢</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#linear2.linear2.fupd"><span class="id" title="variable">fupd</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#E"><span class="id" title="variable">E</span></a> (<a class="idref" href="iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">∃</span></a> <span class="id" title="var">γ</span><a class="idref" href="iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">,</span></a> <a class="idref" href="iris.bi.interface.html#3737660a6294eb9f7af6df17be5eb5a3"><span class="id" title="notation">∀</span></a> <span class="id" title="var">P</span><a class="idref" href="iris.bi.interface.html#3737660a6294eb9f7af6df17be5eb5a3"><span class="id" title="notation">,</span></a> <a class="idref" href="iris.bi.interface.html#1ab064278224e8da215d0768a08713fe"><span class="id" title="notation">▷</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="iris.bi.interface.html#6e96398fec71e244af9dd75e40876ca6"><span class="id" title="notation">-∗</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#linear2.linear2.fupd"><span class="id" title="variable">fupd</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#E"><span class="id" title="variable">E</span></a> (<a class="idref" href="iris.bi.lib.counterexamples.html#linear2.linear2.cinv"><span class="id" title="variable">cinv</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#b0e5ed29efd576246de3282fa163293b"><span class="id" title="variable">γ</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#linear2.linear2.cinv_own"><span class="id" title="variable">cinv_own</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#b0e5ed29efd576246de3282fa163293b"><span class="id" title="variable">γ</span></a>)).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Hypothesis</span> <a name="linear2.linear2.cinv_acc"><span class="id" title="variable">cinv_acc</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <span class="id" title="var">P</span> <span class="id" title="var">γ</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="iris.bi.lib.counterexamples.html#linear2.linear2.cinv"><span class="id" title="variable">cinv</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#b0e5ed29efd576246de3282fa163293b"><span class="id" title="variable">γ</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="iris.bi.interface.html#0f70793a7efc24c230ef5e3a6ac95b68"><span class="id" title="notation">-∗</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#linear2.linear2.cinv_own"><span class="id" title="variable">cinv_own</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#b0e5ed29efd576246de3282fa163293b"><span class="id" title="variable">γ</span></a> <a class="idref" href="iris.bi.interface.html#6e96398fec71e244af9dd75e40876ca6"><span class="id" title="notation">-∗</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#linear2.linear2.fupd"><span class="id" title="variable">fupd</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#linear2.M1"><span class="id" title="constructor">M1</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#linear2.M0"><span class="id" title="constructor">M0</span></a> (<a class="idref" href="iris.bi.interface.html#1ab064278224e8da215d0768a08713fe"><span class="id" title="notation">▷</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#linear2.linear2.cinv_own"><span class="id" title="variable">cinv_own</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#b0e5ed29efd576246de3282fa163293b"><span class="id" title="variable">γ</span></a> <a class="idref" href="iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a> <a class="idref" href="iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">(</span></a><a class="idref" href="iris.bi.interface.html#1ab064278224e8da215d0768a08713fe"><span class="id" title="notation">▷</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="iris.bi.interface.html#6e96398fec71e244af9dd75e40876ca6"><span class="id" title="notation">-∗</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#linear2.linear2.fupd"><span class="id" title="variable">fupd</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#linear2.M0"><span class="id" title="constructor">M0</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#linear2.M1"><span class="id" title="constructor">M1</span></a> <a class="idref" href="iris.bi.interface.html#8df71acffaf065fb9ed35fb4f412b070"><span class="id" title="notation">emp</span></a><a class="idref" href="iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">)</span></a>).<br/>

<br/>
</div>

<div class="doc">
Some general lemmas and proof mode compatibility. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Instance</span> <a name="linear2.fupd_mono'"><span class="id" title="instance">fupd_mono'</span></a> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="iris.bi.interface.html#483c3ba497d1de9dae43a4b1098eeeea"><span class="id" title="notation">(⊢)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="iris.bi.interface.html#483c3ba497d1de9dae43a4b1098eeeea"><span class="id" title="notation">(⊢)</span></a>) (<a class="idref" href="iris.bi.lib.counterexamples.html#linear2.linear2.fupd"><span class="id" title="variable">fupd</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#E1"><span class="id" title="variable">E1</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#E2"><span class="id" title="variable">E2</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span> ?. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="iris.bi.lib.counterexamples.html#linear2.linear2.fupd_mono"><span class="id" title="variable">fupd_mono</span></a>. <span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Instance</span> <a name="linear2.fupd_proper"><span class="id" title="instance">fupd_proper</span></a> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="iris.bi.interface.html#27fb92169ca7e7a729c109d9cd068719"><span class="id" title="notation">(⊣⊢)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="iris.bi.interface.html#27fb92169ca7e7a729c109d9cd068719"><span class="id" title="notation">(⊣⊢)</span></a>) (<a class="idref" href="iris.bi.lib.counterexamples.html#linear2.linear2.fupd"><span class="id" title="variable">fupd</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#E1"><span class="id" title="variable">E1</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#E2"><span class="id" title="variable">E2</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span>; <span class="id" title="tactic">rewrite</span> !<a class="idref" href="iris.bi.interface.html#bi.equiv_spec"><span class="id" title="lemma">bi.equiv_spec</span></a>=&gt; -[??]; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="iris.bi.lib.counterexamples.html#linear2.linear2.fupd_mono"><span class="id" title="variable">fupd_mono</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="linear2.fupd_frame_r"><span class="id" title="lemma">fupd_frame_r</span></a> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span> : <a class="idref" href="iris.bi.lib.counterexamples.html#linear2.linear2.fupd"><span class="id" title="variable">fupd</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#E1"><span class="id" title="variable">E1</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#E2"><span class="id" title="variable">E2</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#Q"><span class="id" title="variable">Q</span></a> <a class="idref" href="iris.bi.interface.html#e55eb026c3f0434cd18ddc04e5d7c1ac"><span class="id" title="notation">⊢</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#linear2.linear2.fupd"><span class="id" title="variable">fupd</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#E1"><span class="id" title="variable">E1</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#E2"><span class="id" title="variable">E2</span></a> (<a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="iris.bi.interface.html#17a7b93bfefac02a752836d54e5bc9da"><span class="id" title="notation">∗</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#Q"><span class="id" title="variable">Q</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="../html-stdpp/stdpp.base.html#comm"><span class="id" title="definition">comm</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#linear2.linear2.fupd_frame_l"><span class="id" title="variable">fupd_frame_l</span></a> <a class="idref" href="../html-stdpp/stdpp.base.html#comm"><span class="id" title="definition">comm</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Global Instance</span> <a name="linear2.elim_fupd_fupd"><span class="id" title="instance">elim_fupd_fupd</span></a> <span class="id" title="var">p</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span> <span class="id" title="var">E3</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="iris.proofmode.classes.html#ElimModal"><span class="id" title="class">ElimModal</span></a> <a class="idref" href="../html-stdpp/stdpp.base.html#e2da2dc5adb39aa5394d64f0045c62a4"><span class="id" title="notation">True</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> (<a class="idref" href="iris.bi.lib.counterexamples.html#linear2.linear2.fupd"><span class="id" title="variable">fupd</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#E1"><span class="id" title="variable">E1</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#E2"><span class="id" title="variable">E2</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a>) <a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a> (<a class="idref" href="iris.bi.lib.counterexamples.html#linear2.linear2.fupd"><span class="id" title="variable">fupd</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#E1"><span class="id" title="variable">E1</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#E3"><span class="id" title="variable">E3</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#Q"><span class="id" title="variable">Q</span></a>) (<a class="idref" href="iris.bi.lib.counterexamples.html#linear2.linear2.fupd"><span class="id" title="variable">fupd</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#E2"><span class="id" title="variable">E2</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#E3"><span class="id" title="variable">E3</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#Q"><span class="id" title="variable">Q</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> /<a class="idref" href="iris.proofmode.classes.html#ElimModal"><span class="id" title="class">ElimModal</span></a> <a class="idref" href="iris.bi.derived_laws_bi.html#bi.intuitionistically_if_elim"><span class="id" title="lemma">bi.intuitionistically_if_elim</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="iris.bi.lib.counterexamples.html#linear2.fupd_frame_r"><span class="id" title="lemma">fupd_frame_r</span></a> <a class="idref" href="iris.bi.derived_laws_bi.html#bi.wand_elim_r"><span class="id" title="lemma">bi.wand_elim_r</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#linear2.linear2.fupd_fupd"><span class="id" title="variable">fupd_fupd</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Counterexample: now we can make any resource disappear. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="linear2.leak"><span class="id" title="lemma">leak</span></a> <span class="id" title="var">P</span> : <a class="idref" href="iris.bi.lib.counterexamples.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="iris.bi.interface.html#0f70793a7efc24c230ef5e3a6ac95b68"><span class="id" title="notation">-∗</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#linear2.linear2.fupd"><span class="id" title="variable">fupd</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#linear2.M1"><span class="id" title="constructor">M1</span></a> <a class="idref" href="iris.bi.lib.counterexamples.html#linear2.M1"><span class="id" title="constructor">M1</span></a> <a class="idref" href="iris.bi.interface.html#8df71acffaf065fb9ed35fb4f412b070"><span class="id" title="notation">emp</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "HP".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="iris.bi.lib.counterexamples.html#linear2.linear2.cinv_alloc"><span class="id" title="variable">cinv_alloc</span></a> <span class="id" title="keyword">as</span> (<span class="id" title="var">γ</span>) "Hmkinv".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">(</span></a>"Hmkinv" <a class="idref" href="iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">$!</span></a> <a class="idref" href="iris.bi.interface.html#1fb20ec9249c1b9a628d0af33d4b6be7"><span class="id" title="notation">True</span></a>%<span class="id" title="var">I</span> <a class="idref" href="iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">with</span></a> "[//]"<a class="idref" href="iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "[Hinv Htok]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="iris.bi.lib.counterexamples.html#linear2.linear2.cinv_acc"><span class="id" title="variable">cinv_acc</span></a> <a class="idref" href="iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Hinv Htok"<a class="idref" href="iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "(Htrue &amp; Htok &amp; Hclose)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> "Hclose". <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="iris.bi.lib.counterexamples.html#linear2.linear2"><span class="id" title="section">linear2</span></a>. <span class="id" title="keyword">End</span> <a class="idref" href="iris.bi.lib.counterexamples.html#linear2"><span class="id" title="module">linear2</span></a>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
