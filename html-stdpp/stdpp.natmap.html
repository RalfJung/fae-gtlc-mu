<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="../overview.html">Project Page</a>
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">stdpp.natmap</h1>

<div class="code">
</div>

<div class="doc">
This files implements a type <span class="inlinecode"><a class="idref" href="stdpp.natmap.html#natmap"><span class="id" title="record">natmap</span></a></span> <span class="inlinecode"><a class="idref" href="stdpp.vector.html#A"><span class="id" title="variable">A</span></a></span> of finite maps whose keys range
over Coq's data type of unary natural numbers <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a></span>. The implementation equips
a list with a proof of canonicity. 
</div>
<div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="var">stdpp</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="stdpp.fin_maps.html#"><span class="id" title="library">fin_maps</span></a> <a class="idref" href="stdpp.mapset.html#"><span class="id" title="library">mapset</span></a>.<br/>
<span class="id" title="keyword">Set</span> <span class="id" title="var">Default</span> <span class="id" title="keyword">Proof</span> <span class="id" title="var">Using</span> "Type".<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a name="natmap_raw"><span class="id" title="abbreviation">natmap_raw</span></a> <span class="id" title="var">A</span> := (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <span class="id" title="var">A</span>)).<br/>
<span class="id" title="keyword">Definition</span> <a name="natmap_wf"><span class="id" title="definition">natmap_wf</span></a> {<span class="id" title="var">A</span>} (<span class="id" title="var">l</span> : <a class="idref" href="stdpp.natmap.html#natmap_raw"><span class="id" title="abbreviation">natmap_raw</span></a> <a class="idref" href="stdpp.natmap.html#A"><span class="id" title="variable">A</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="stdpp.list.html#last"><span class="id" title="definition">last</span></a> <a class="idref" href="stdpp.natmap.html#l"><span class="id" title="variable">l</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <a class="idref" href="stdpp.base.html#e2da2dc5adb39aa5394d64f0045c62a4"><span class="id" title="notation">True</span></a> | <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">x</span> =&gt; <a class="idref" href="stdpp.option.html#is_Some"><span class="id" title="definition">is_Some</span></a> <span class="id" title="var">x</span> <span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Instance</span> <a name="natmap_wf_pi"><span class="id" title="instance">natmap_wf_pi</span></a> {<span class="id" title="var">A</span>} (<span class="id" title="var">l</span> : <a class="idref" href="stdpp.natmap.html#natmap_raw"><span class="id" title="abbreviation">natmap_raw</span></a> <a class="idref" href="stdpp.natmap.html#A"><span class="id" title="variable">A</span></a>) : <a class="idref" href="stdpp.base.html#ProofIrrel"><span class="id" title="class">ProofIrrel</span></a> (<a class="idref" href="stdpp.natmap.html#natmap_wf"><span class="id" title="definition">natmap_wf</span></a> <a class="idref" href="stdpp.natmap.html#l"><span class="id" title="variable">l</span></a>).<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="stdpp.natmap.html#natmap_wf"><span class="id" title="definition">natmap_wf</span></a>. <span class="id" title="var">case_match</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">_</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="natmap_wf_inv"><span class="id" title="lemma">natmap_wf_inv</span></a> {<span class="id" title="var">A</span>} (<span class="id" title="var">o</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="stdpp.natmap.html#A"><span class="id" title="variable">A</span></a>) (<span class="id" title="var">l</span> : <a class="idref" href="stdpp.natmap.html#natmap_raw"><span class="id" title="abbreviation">natmap_raw</span></a> <a class="idref" href="stdpp.natmap.html#A"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="stdpp.natmap.html#natmap_wf"><span class="id" title="definition">natmap_wf</span></a> (<a class="idref" href="stdpp.natmap.html#o"><span class="id" title="variable">o</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="stdpp.natmap.html#l"><span class="id" title="variable">l</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="stdpp.natmap.html#natmap_wf"><span class="id" title="definition">natmap_wf</span></a> <a class="idref" href="stdpp.natmap.html#l"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Lemma</span> <a name="natmap_wf_lookup"><span class="id" title="lemma">natmap_wf_lookup</span></a> {<span class="id" title="var">A</span>} (<span class="id" title="var">l</span> : <a class="idref" href="stdpp.natmap.html#natmap_raw"><span class="id" title="abbreviation">natmap_raw</span></a> <a class="idref" href="stdpp.natmap.html#A"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="stdpp.natmap.html#natmap_wf"><span class="id" title="definition">natmap_wf</span></a> <a class="idref" href="stdpp.natmap.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="stdpp.natmap.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <span class="id" title="var">i</span> <span class="id" title="var">x</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="stdpp.base.html#mjoin"><span class="id" title="definition">mjoin</span></a> (<a class="idref" href="stdpp.natmap.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="stdpp.natmap.html#i"><span class="id" title="variable">i</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="stdpp.natmap.html#x"><span class="id" title="variable">x</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hwf</span> <span class="id" title="var">Hl</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> [|[<span class="id" title="var">x</span>|] <span class="id" title="var">l</span> <span class="id" title="var">IH</span>]; <span class="id" title="tactic">simpl</span>; [<span class="id" title="var">done</span>| |].<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">exists</span> 0. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">IH</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">i</span>&amp;<span class="id" title="var">x</span>&amp;?); <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="stdpp.natmap.html#natmap_wf_inv"><span class="id" title="lemma">natmap_wf_inv</span></a>; [|<span class="id" title="tactic">by</span> <span class="id" title="tactic">exists</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">i</span>), <span class="id" title="var">x</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> -&gt;. <span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hwf</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Record</span> <a name="natmap"><span class="id" title="record">natmap</span></a> (<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>) : <span class="id" title="keyword">Type</span> := <a name="NatMap"><span class="id" title="constructor">NatMap</span></a> {<br/>
&nbsp;&nbsp;<a name="natmap_car"><span class="id" title="projection">natmap_car</span></a> : <a class="idref" href="stdpp.natmap.html#natmap_raw"><span class="id" title="abbreviation">natmap_raw</span></a> <a class="idref" href="stdpp.natmap.html#A"><span class="id" title="variable">A</span></a>;<br/>
&nbsp;&nbsp;<a name="natmap_prf"><span class="id" title="projection">natmap_prf</span></a> : <a class="idref" href="stdpp.natmap.html#natmap_wf"><span class="id" title="definition">natmap_wf</span></a> <a class="idref" href="stdpp.natmap.html#natmap_car"><span class="id" title="method">natmap_car</span></a><br/>
}.<br/>
<span class="id" title="var">Arguments</span> <a class="idref" href="stdpp.natmap.html#NatMap"><span class="id" title="constructor">NatMap</span></a> {<span class="id" title="var">_</span>} <span class="id" title="var">_</span> <span class="id" title="var">_</span> : <span class="id" title="tactic">assert</span>.<br/>
<span class="id" title="var">Arguments</span> <a class="idref" href="stdpp.natmap.html#natmap_car"><span class="id" title="projection">natmap_car</span></a> {<span class="id" title="var">_</span>} <span class="id" title="var">_</span> : <span class="id" title="tactic">assert</span>.<br/>
<span class="id" title="var">Arguments</span> <a class="idref" href="stdpp.natmap.html#natmap_prf"><span class="id" title="projection">natmap_prf</span></a> {<span class="id" title="var">_</span>} <span class="id" title="var">_</span> : <span class="id" title="tactic">assert</span>.<br/>
<span class="id" title="keyword">Lemma</span> <a name="natmap_eq"><span class="id" title="lemma">natmap_eq</span></a> {<span class="id" title="var">A</span>} (<span class="id" title="var">m1</span> <span class="id" title="var">m2</span> : <a class="idref" href="stdpp.natmap.html#natmap"><span class="id" title="record">natmap</span></a> <a class="idref" href="stdpp.natmap.html#A"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="stdpp.natmap.html#m1"><span class="id" title="variable">m1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="stdpp.natmap.html#m2"><span class="id" title="variable">m2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#d9d5c539a07c7350478e89358d1fe520"><span class="id" title="notation">↔</span></a> <a class="idref" href="stdpp.natmap.html#natmap_car"><span class="id" title="projection">natmap_car</span></a> <a class="idref" href="stdpp.natmap.html#m1"><span class="id" title="variable">m1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="stdpp.natmap.html#natmap_car"><span class="id" title="projection">natmap_car</span></a> <a class="idref" href="stdpp.natmap.html#m2"><span class="id" title="variable">m2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [<span class="id" title="tactic">by</span> <span class="id" title="tactic">intros</span> -&gt;|<span class="id" title="tactic">intros</span>]; <span class="id" title="tactic">destruct</span> <span class="id" title="var">m1</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">t1</span> ?], <span class="id" title="var">m2</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">t2</span> ?].<br/>
&nbsp;&nbsp;<span class="id" title="var">simplify_eq</span>/=; <span class="id" title="tactic">f_equal</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="stdpp.base.html#proof_irrel"><span class="id" title="definition">proof_irrel</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Global Instance</span> <a name="natmap_eq_dec"><span class="id" title="instance">natmap_eq_dec</span></a> `{<a class="idref" href="stdpp.base.html#EqDecision"><span class="id" title="abbreviation">EqDecision</span></a> <span class="id" title="var">A</span>} : <a class="idref" href="stdpp.base.html#EqDecision"><span class="id" title="abbreviation">EqDecision</span></a> (<a class="idref" href="stdpp.natmap.html#natmap"><span class="id" title="record">natmap</span></a> <a class="idref" href="stdpp.natmap.html#A"><span class="id" title="variable">A</span></a>) := <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <span class="id" title="var">m1</span> <span class="id" title="var">m2</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="stdpp.base.html#decide"><span class="id" title="definition">decide</span></a> (<a class="idref" href="stdpp.natmap.html#natmap_car"><span class="id" title="projection">natmap_car</span></a> <a class="idref" href="stdpp.natmap.html#m1"><span class="id" title="variable">m1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="stdpp.natmap.html#natmap_car"><span class="id" title="projection">natmap_car</span></a> <a class="idref" href="stdpp.natmap.html#m2"><span class="id" title="variable">m2</span></a>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Specif.html#left"><span class="id" title="constructor">left</span></a> <span class="id" title="var">H</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Specif.html#left"><span class="id" title="constructor">left</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#proj2"><span class="id" title="lemma">proj2</span></a> (<a class="idref" href="stdpp.natmap.html#natmap_eq"><span class="id" title="lemma">natmap_eq</span></a> <a class="idref" href="stdpp.natmap.html#m1"><span class="id" title="variable">m1</span></a> <a class="idref" href="stdpp.natmap.html#m2"><span class="id" title="variable">m2</span></a>) <span class="id" title="var">H</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Specif.html#right"><span class="id" title="constructor">right</span></a> <span class="id" title="var">H</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Specif.html#right"><span class="id" title="constructor">right</span></a> (<span class="id" title="var">H</span> <a class="idref" href="stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">∘</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#proj1"><span class="id" title="lemma">proj1</span></a> (<a class="idref" href="stdpp.natmap.html#natmap_eq"><span class="id" title="lemma">natmap_eq</span></a> <a class="idref" href="stdpp.natmap.html#m1"><span class="id" title="variable">m1</span></a> <a class="idref" href="stdpp.natmap.html#m2"><span class="id" title="variable">m2</span></a>))<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Instance</span> <a name="natmap_empty"><span class="id" title="instance">natmap_empty</span></a> {<span class="id" title="var">A</span>} : <a class="idref" href="stdpp.base.html#Empty"><span class="id" title="class">Empty</span></a> (<a class="idref" href="stdpp.natmap.html#natmap"><span class="id" title="record">natmap</span></a> <a class="idref" href="stdpp.natmap.html#A"><span class="id" title="variable">A</span></a>) := <a class="idref" href="stdpp.natmap.html#NatMap"><span class="id" title="constructor">NatMap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#I"><span class="id" title="constructor">I</span></a>.<br/>
<span class="id" title="keyword">Instance</span> <a name="natmap_lookup"><span class="id" title="instance">natmap_lookup</span></a> {<span class="id" title="var">A</span>} : <a class="idref" href="stdpp.base.html#Lookup"><span class="id" title="class">Lookup</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="stdpp.natmap.html#A"><span class="id" title="variable">A</span></a> (<a class="idref" href="stdpp.natmap.html#natmap"><span class="id" title="record">natmap</span></a> <a class="idref" href="stdpp.natmap.html#A"><span class="id" title="variable">A</span></a>) := <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <span class="id" title="var">i</span> <span class="id" title="var">m</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<span class="id" title="var">l</span>,<span class="id" title="var">_</span>) := <a class="idref" href="stdpp.natmap.html#m"><span class="id" title="variable">m</span></a> <span class="id" title="tactic">in</span> <a class="idref" href="stdpp.base.html#mjoin"><span class="id" title="definition">mjoin</span></a> (<a class="idref" href="stdpp.natmap.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="stdpp.natmap.html#i"><span class="id" title="variable">i</span></a>).<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a name="natmap_singleton_raw"><span class="id" title="definition">natmap_singleton_raw</span></a> {<span class="id" title="var">A</span>} (<span class="id" title="var">i</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<span class="id" title="var">x</span> : <a class="idref" href="stdpp.natmap.html#A"><span class="id" title="variable">A</span></a>) : <a class="idref" href="stdpp.natmap.html#natmap_raw"><span class="id" title="abbreviation">natmap_raw</span></a> <a class="idref" href="stdpp.natmap.html#A"><span class="id" title="variable">A</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="stdpp.natmap.html#i"><span class="id" title="variable">i</span></a> <span class="id" title="keyword">with</span> 0 =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="stdpp.natmap.html#x"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">i</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="stdpp.natmap.html#natmap_singleton_raw"><span class="id" title="definition">natmap_singleton_raw</span></a> <a class="idref" href="stdpp.natmap.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="stdpp.natmap.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Lemma</span> <a name="natmap_singleton_wf"><span class="id" title="lemma">natmap_singleton_wf</span></a> {<span class="id" title="var">A</span>} (<span class="id" title="var">i</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<span class="id" title="var">x</span> : <a class="idref" href="stdpp.natmap.html#A"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="stdpp.natmap.html#natmap_wf"><span class="id" title="definition">natmap_wf</span></a> (<a class="idref" href="stdpp.natmap.html#natmap_singleton_raw"><span class="id" title="definition">natmap_singleton_raw</span></a> <a class="idref" href="stdpp.natmap.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="stdpp.natmap.html#x"><span class="id" title="variable">x</span></a>).<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="stdpp.natmap.html#natmap_wf"><span class="id" title="definition">natmap_wf</span></a>. <span class="id" title="tactic">induction</span> <span class="id" title="var">i</span> <span class="id" title="keyword">as</span> [|[]]; <span class="id" title="var">simplify_eq</span>/=; <span class="id" title="tactic">eauto</span>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Lemma</span> <a name="natmap_lookup_singleton_raw"><span class="id" title="lemma">natmap_lookup_singleton_raw</span></a> {<span class="id" title="var">A</span>} (<span class="id" title="var">i</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<span class="id" title="var">x</span> : <a class="idref" href="stdpp.natmap.html#A"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="stdpp.base.html#mjoin"><span class="id" title="definition">mjoin</span></a> (<a class="idref" href="stdpp.natmap.html#natmap_singleton_raw"><span class="id" title="definition">natmap_singleton_raw</span></a> <a class="idref" href="stdpp.natmap.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="stdpp.natmap.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="stdpp.natmap.html#i"><span class="id" title="variable">i</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="stdpp.natmap.html#x"><span class="id" title="variable">x</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">i</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Lemma</span> <a name="natmap_lookup_singleton_raw_ne"><span class="id" title="lemma">natmap_lookup_singleton_raw_ne</span></a> {<span class="id" title="var">A</span>} (<span class="id" title="var">i</span> <span class="id" title="var">j</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<span class="id" title="var">x</span> : <a class="idref" href="stdpp.natmap.html#A"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="stdpp.natmap.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="stdpp.natmap.html#j"><span class="id" title="variable">j</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="stdpp.base.html#mjoin"><span class="id" title="definition">mjoin</span></a> (<a class="idref" href="stdpp.natmap.html#natmap_singleton_raw"><span class="id" title="definition">natmap_singleton_raw</span></a> <a class="idref" href="stdpp.natmap.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="stdpp.natmap.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="stdpp.natmap.html#j"><span class="id" title="variable">j</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">revert</span> <span class="id" title="var">j</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">i</span>; <span class="id" title="tactic">intros</span> [|?]; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">congruence</span>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Hint Rewrite</span> @<a class="idref" href="stdpp.natmap.html#natmap_lookup_singleton_raw"><span class="id" title="lemma">natmap_lookup_singleton_raw</span></a> : <span class="id" title="var">natmap</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="natmap_cons_canon"><span class="id" title="definition">natmap_cons_canon</span></a> {<span class="id" title="var">A</span>} (<span class="id" title="var">o</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="stdpp.natmap.html#A"><span class="id" title="variable">A</span></a>) (<span class="id" title="var">l</span> : <a class="idref" href="stdpp.natmap.html#natmap_raw"><span class="id" title="abbreviation">natmap_raw</span></a> <a class="idref" href="stdpp.natmap.html#A"><span class="id" title="variable">A</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="stdpp.natmap.html#o"><span class="id" title="variable">o</span></a>, <a class="idref" href="stdpp.natmap.html#l"><span class="id" title="variable">l</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> | <span class="id" title="var">_</span>, <span class="id" title="var">_</span> =&gt; <a class="idref" href="stdpp.natmap.html#o"><span class="id" title="variable">o</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="stdpp.natmap.html#l"><span class="id" title="variable">l</span></a> <span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Lemma</span> <a name="natmap_cons_canon_wf"><span class="id" title="lemma">natmap_cons_canon_wf</span></a> {<span class="id" title="var">A</span>} (<span class="id" title="var">o</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="stdpp.natmap.html#A"><span class="id" title="variable">A</span></a>) (<span class="id" title="var">l</span> : <a class="idref" href="stdpp.natmap.html#natmap_raw"><span class="id" title="abbreviation">natmap_raw</span></a> <a class="idref" href="stdpp.natmap.html#A"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="stdpp.natmap.html#natmap_wf"><span class="id" title="definition">natmap_wf</span></a> <a class="idref" href="stdpp.natmap.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="stdpp.natmap.html#natmap_wf"><span class="id" title="definition">natmap_wf</span></a> (<a class="idref" href="stdpp.natmap.html#natmap_cons_canon"><span class="id" title="definition">natmap_cons_canon</span></a> <a class="idref" href="stdpp.natmap.html#o"><span class="id" title="variable">o</span></a> <a class="idref" href="stdpp.natmap.html#l"><span class="id" title="variable">l</span></a>).<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="stdpp.natmap.html#natmap_wf"><span class="id" title="definition">natmap_wf</span></a>, <a class="idref" href="stdpp.list.html#last"><span class="id" title="definition">last</span></a>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">o</span>, <span class="id" title="var">l</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Lemma</span> <a name="natmap_cons_canon_O"><span class="id" title="lemma">natmap_cons_canon_O</span></a> {<span class="id" title="var">A</span>} (<span class="id" title="var">o</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="stdpp.natmap.html#A"><span class="id" title="variable">A</span></a>) (<span class="id" title="var">l</span> : <a class="idref" href="stdpp.natmap.html#natmap_raw"><span class="id" title="abbreviation">natmap_raw</span></a> <a class="idref" href="stdpp.natmap.html#A"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="stdpp.base.html#mjoin"><span class="id" title="definition">mjoin</span></a> (<a class="idref" href="stdpp.natmap.html#natmap_cons_canon"><span class="id" title="definition">natmap_cons_canon</span></a> <a class="idref" href="stdpp.natmap.html#o"><span class="id" title="variable">o</span></a> <a class="idref" href="stdpp.natmap.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> 0) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="stdpp.natmap.html#o"><span class="id" title="variable">o</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">o</span>, <span class="id" title="var">l</span>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Lemma</span> <a name="natmap_cons_canon_S"><span class="id" title="lemma">natmap_cons_canon_S</span></a> {<span class="id" title="var">A</span>} (<span class="id" title="var">o</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="stdpp.natmap.html#A"><span class="id" title="variable">A</span></a>) (<span class="id" title="var">l</span> : <a class="idref" href="stdpp.natmap.html#natmap_raw"><span class="id" title="abbreviation">natmap_raw</span></a> <a class="idref" href="stdpp.natmap.html#A"><span class="id" title="variable">A</span></a>) <span class="id" title="var">i</span> :<br/>
&nbsp;&nbsp;<a class="idref" href="stdpp.natmap.html#natmap_cons_canon"><span class="id" title="definition">natmap_cons_canon</span></a> <a class="idref" href="stdpp.natmap.html#o"><span class="id" title="variable">o</span></a> <a class="idref" href="stdpp.natmap.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="stdpp.natmap.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="stdpp.natmap.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="stdpp.natmap.html#i"><span class="id" title="variable">i</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">o</span>, <span class="id" title="var">l</span>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Hint Rewrite</span> @<a class="idref" href="stdpp.natmap.html#natmap_cons_canon_O"><span class="id" title="lemma">natmap_cons_canon_O</span></a> @<a class="idref" href="stdpp.natmap.html#natmap_cons_canon_S"><span class="id" title="lemma">natmap_cons_canon_S</span></a> : <span class="id" title="var">natmap</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="natmap_alter_raw"><span class="id" title="definition">natmap_alter_raw</span></a> {<span class="id" title="var">A</span>} (<span class="id" title="var">f</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="stdpp.natmap.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="stdpp.natmap.html#A"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="stdpp.natmap.html#natmap_raw"><span class="id" title="abbreviation">natmap_raw</span></a> <a class="idref" href="stdpp.natmap.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="stdpp.natmap.html#natmap_raw"><span class="id" title="abbreviation">natmap_raw</span></a> <a class="idref" href="stdpp.natmap.html#A"><span class="id" title="variable">A</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fix</span> <span class="id" title="var">go</span> <span class="id" title="var">i</span> <span class="id" title="var">l</span> {<span class="id" title="keyword">struct</span> <span class="id" title="var">l</span>} :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="stdpp.natmap.html#l"><span class="id" title="variable">l</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="stdpp.natmap.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">x</span> =&gt; <a class="idref" href="stdpp.natmap.html#natmap_singleton_raw"><span class="id" title="definition">natmap_singleton_raw</span></a> <a class="idref" href="stdpp.natmap.html#i"><span class="id" title="variable">i</span></a> <span class="id" title="var">x</span> | <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">o</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <span class="id" title="var">l</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="stdpp.natmap.html#i"><span class="id" title="variable">i</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| 0 =&gt; <a class="idref" href="stdpp.natmap.html#natmap_cons_canon"><span class="id" title="definition">natmap_cons_canon</span></a> (<a class="idref" href="stdpp.natmap.html#f"><span class="id" title="variable">f</span></a> <span class="id" title="var">o</span>) <a class="idref" href="stdpp.natmap.html#l"><span class="id" title="variable">l</span></a> | <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">i</span> =&gt; <a class="idref" href="stdpp.natmap.html#natmap_cons_canon"><span class="id" title="definition">natmap_cons_canon</span></a> <span class="id" title="var">o</span> (<a class="idref" href="stdpp.natmap.html#go"><span class="id" title="variable">go</span></a> <a class="idref" href="stdpp.natmap.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="stdpp.natmap.html#l"><span class="id" title="variable">l</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Lemma</span> <a name="natmap_alter_wf"><span class="id" title="lemma">natmap_alter_wf</span></a> {<span class="id" title="var">A</span>} (<span class="id" title="var">f</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="stdpp.natmap.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="stdpp.natmap.html#A"><span class="id" title="variable">A</span></a>) <span class="id" title="var">i</span> <span class="id" title="var">l</span> :<br/>
&nbsp;&nbsp;<a class="idref" href="stdpp.natmap.html#natmap_wf"><span class="id" title="definition">natmap_wf</span></a> <a class="idref" href="stdpp.natmap.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="stdpp.natmap.html#natmap_wf"><span class="id" title="definition">natmap_wf</span></a> (<a class="idref" href="stdpp.natmap.html#natmap_alter_raw"><span class="id" title="definition">natmap_alter_raw</span></a> <a class="idref" href="stdpp.natmap.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="stdpp.natmap.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="stdpp.natmap.html#l"><span class="id" title="variable">l</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">i</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>; [<span class="id" title="tactic">intro</span> | <span class="id" title="tactic">intros</span> [|?]]; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">repeat</span> <span class="id" title="var">case_match</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="stdpp.natmap.html#natmap_singleton_wf"><span class="id" title="lemma">natmap_singleton_wf</span></a>, <a class="idref" href="stdpp.natmap.html#natmap_cons_canon_wf"><span class="id" title="lemma">natmap_cons_canon_wf</span></a>, <a class="idref" href="stdpp.natmap.html#natmap_wf_inv"><span class="id" title="lemma">natmap_wf_inv</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Instance</span> <a name="natmap_alter"><span class="id" title="instance">natmap_alter</span></a> {<span class="id" title="var">A</span>} : <a class="idref" href="stdpp.base.html#PartialAlter"><span class="id" title="class">PartialAlter</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="stdpp.natmap.html#A"><span class="id" title="variable">A</span></a> (<a class="idref" href="stdpp.natmap.html#natmap"><span class="id" title="record">natmap</span></a> <a class="idref" href="stdpp.natmap.html#A"><span class="id" title="variable">A</span></a>) := <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <span class="id" title="var">f</span> <span class="id" title="var">i</span> <span class="id" title="var">m</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<span class="id" title="var">l</span>,<span class="id" title="var">Hl</span>) := <a class="idref" href="stdpp.natmap.html#m"><span class="id" title="variable">m</span></a> <span class="id" title="tactic">in</span> <a class="idref" href="stdpp.natmap.html#NatMap"><span class="id" title="constructor">NatMap</span></a> <span class="id" title="var">_</span> (<a class="idref" href="stdpp.natmap.html#natmap_alter_wf"><span class="id" title="lemma">natmap_alter_wf</span></a> <a class="idref" href="stdpp.natmap.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="stdpp.natmap.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="stdpp.natmap.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="stdpp.natmap.html#Hl"><span class="id" title="variable">Hl</span></a>).<br/>
<span class="id" title="keyword">Lemma</span> <a name="natmap_lookup_alter_raw"><span class="id" title="lemma">natmap_lookup_alter_raw</span></a> {<span class="id" title="var">A</span>} (<span class="id" title="var">f</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="stdpp.natmap.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="stdpp.natmap.html#A"><span class="id" title="variable">A</span></a>) <span class="id" title="var">i</span> <span class="id" title="var">l</span> :<br/>
&nbsp;&nbsp;<a class="idref" href="stdpp.base.html#mjoin"><span class="id" title="definition">mjoin</span></a> (<a class="idref" href="stdpp.natmap.html#natmap_alter_raw"><span class="id" title="definition">natmap_alter_raw</span></a> <a class="idref" href="stdpp.natmap.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="stdpp.natmap.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="stdpp.natmap.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="stdpp.natmap.html#i"><span class="id" title="variable">i</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="stdpp.natmap.html#f"><span class="id" title="variable">f</span></a> (<a class="idref" href="stdpp.base.html#mjoin"><span class="id" title="definition">mjoin</span></a> (<a class="idref" href="stdpp.natmap.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="stdpp.natmap.html#i"><span class="id" title="variable">i</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">i</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">intros</span> [|?]; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">repeat</span> <span class="id" title="var">case_match</span>; <span class="id" title="tactic">simpl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">autorewrite</span> <span class="id" title="keyword">with</span> <span class="id" title="var">natmap</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Lemma</span> <a name="natmap_lookup_alter_raw_ne"><span class="id" title="lemma">natmap_lookup_alter_raw_ne</span></a> {<span class="id" title="var">A</span>} (<span class="id" title="var">f</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="stdpp.natmap.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="stdpp.natmap.html#A"><span class="id" title="variable">A</span></a>) <span class="id" title="var">i</span> <span class="id" title="var">j</span> <span class="id" title="var">l</span> :<br/>
&nbsp;&nbsp;<a class="idref" href="stdpp.natmap.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#eac9b9307401b34847f15ea69bb5957f"><span class="id" title="notation">≠</span></a> <a class="idref" href="stdpp.natmap.html#j"><span class="id" title="variable">j</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="stdpp.base.html#mjoin"><span class="id" title="definition">mjoin</span></a> (<a class="idref" href="stdpp.natmap.html#natmap_alter_raw"><span class="id" title="definition">natmap_alter_raw</span></a> <a class="idref" href="stdpp.natmap.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="stdpp.natmap.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="stdpp.natmap.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="stdpp.natmap.html#j"><span class="id" title="variable">j</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="stdpp.base.html#mjoin"><span class="id" title="definition">mjoin</span></a> (<a class="idref" href="stdpp.natmap.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="stdpp.natmap.html#j"><span class="id" title="variable">j</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">i</span> <span class="id" title="var">j</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">intros</span> [|?] [|?] ?; <span class="id" title="tactic">simpl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">case_match</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">autorewrite</span> <span class="id" title="keyword">with</span> <span class="id" title="var">natmap</span>; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="stdpp.natmap.html#natmap_lookup_singleton_raw_ne"><span class="id" title="lemma">natmap_lookup_singleton_raw_ne</span></a>; <span class="id" title="tactic">congruence</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="natmap_omap_raw"><span class="id" title="definition">natmap_omap_raw</span></a> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>} (<span class="id" title="var">f</span> : <a class="idref" href="stdpp.natmap.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="stdpp.natmap.html#B"><span class="id" title="variable">B</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="stdpp.natmap.html#natmap_raw"><span class="id" title="abbreviation">natmap_raw</span></a> <a class="idref" href="stdpp.natmap.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="stdpp.natmap.html#natmap_raw"><span class="id" title="abbreviation">natmap_raw</span></a> <a class="idref" href="stdpp.natmap.html#B"><span class="id" title="variable">B</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fix</span> <span class="id" title="var">go</span> <span class="id" title="var">l</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="stdpp.natmap.html#l"><span class="id" title="variable">l</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> | <span class="id" title="var">o</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <span class="id" title="var">l</span> =&gt; <a class="idref" href="stdpp.natmap.html#natmap_cons_canon"><span class="id" title="definition">natmap_cons_canon</span></a> (<span class="id" title="var">o</span> <a class="idref" href="stdpp.base.html#1ec27ecb4da8da3d3cbd85a2394dc835"><span class="id" title="notation">≫=</span></a> <a class="idref" href="stdpp.natmap.html#f"><span class="id" title="variable">f</span></a>) (<a class="idref" href="stdpp.natmap.html#go"><span class="id" title="variable">go</span></a> <a class="idref" href="stdpp.natmap.html#l"><span class="id" title="variable">l</span></a>) <span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Lemma</span> <a name="natmap_omap_raw_wf"><span class="id" title="lemma">natmap_omap_raw_wf</span></a> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>} (<span class="id" title="var">f</span> : <a class="idref" href="stdpp.natmap.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="stdpp.natmap.html#B"><span class="id" title="variable">B</span></a>) <span class="id" title="var">l</span> :<br/>
&nbsp;&nbsp;<a class="idref" href="stdpp.natmap.html#natmap_wf"><span class="id" title="definition">natmap_wf</span></a> <a class="idref" href="stdpp.natmap.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="stdpp.natmap.html#natmap_wf"><span class="id" title="definition">natmap_wf</span></a> (<a class="idref" href="stdpp.natmap.html#natmap_omap_raw"><span class="id" title="definition">natmap_omap_raw</span></a> <a class="idref" href="stdpp.natmap.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="stdpp.natmap.html#l"><span class="id" title="variable">l</span></a>).<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="stdpp.natmap.html#natmap_cons_canon_wf"><span class="id" title="lemma">natmap_cons_canon_wf</span></a>, <a class="idref" href="stdpp.natmap.html#natmap_wf_inv"><span class="id" title="lemma">natmap_wf_inv</span></a>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Lemma</span> <a name="natmap_lookup_omap_raw"><span class="id" title="lemma">natmap_lookup_omap_raw</span></a> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>} (<span class="id" title="var">f</span> : <a class="idref" href="stdpp.natmap.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="stdpp.natmap.html#B"><span class="id" title="variable">B</span></a>) <span class="id" title="var">l</span> <span class="id" title="var">i</span> :<br/>
&nbsp;&nbsp;<a class="idref" href="stdpp.base.html#mjoin"><span class="id" title="definition">mjoin</span></a> (<a class="idref" href="stdpp.natmap.html#natmap_omap_raw"><span class="id" title="definition">natmap_omap_raw</span></a> <a class="idref" href="stdpp.natmap.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="stdpp.natmap.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="stdpp.natmap.html#i"><span class="id" title="variable">i</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="stdpp.base.html#mjoin"><span class="id" title="definition">mjoin</span></a> (<a class="idref" href="stdpp.natmap.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="stdpp.natmap.html#i"><span class="id" title="variable">i</span></a>) <a class="idref" href="stdpp.base.html#1ec27ecb4da8da3d3cbd85a2394dc835"><span class="id" title="notation">≫=</span></a> <a class="idref" href="stdpp.natmap.html#f"><span class="id" title="variable">f</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">i</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">intros</span> [|?]; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">autorewrite</span> <span class="id" title="keyword">with</span> <span class="id" title="var">natmap</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Hint Rewrite</span> @<a class="idref" href="stdpp.natmap.html#natmap_lookup_omap_raw"><span class="id" title="lemma">natmap_lookup_omap_raw</span></a> : <span class="id" title="var">natmap</span>.<br/>
<span class="id" title="keyword">Global Instance</span> <a name="natmap_omap"><span class="id" title="instance">natmap_omap</span></a>: <a class="idref" href="stdpp.base.html#OMap"><span class="id" title="class">OMap</span></a> <a class="idref" href="stdpp.natmap.html#natmap"><span class="id" title="record">natmap</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">f</span> <span class="id" title="var">m</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<span class="id" title="var">l</span>,<span class="id" title="var">Hl</span>) := <a class="idref" href="stdpp.natmap.html#m"><span class="id" title="variable">m</span></a> <span class="id" title="tactic">in</span> <a class="idref" href="stdpp.natmap.html#NatMap"><span class="id" title="constructor">NatMap</span></a> <span class="id" title="var">_</span> (<a class="idref" href="stdpp.natmap.html#natmap_omap_raw_wf"><span class="id" title="lemma">natmap_omap_raw_wf</span></a> <a class="idref" href="stdpp.natmap.html#f"><span class="id" title="variable">f</span></a> <span class="id" title="var">_</span> <a class="idref" href="stdpp.natmap.html#Hl"><span class="id" title="variable">Hl</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="natmap_merge_raw"><span class="id" title="definition">natmap_merge_raw</span></a> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>} (<span class="id" title="var">f</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="stdpp.natmap.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="stdpp.natmap.html#B"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="stdpp.natmap.html#C"><span class="id" title="variable">C</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="stdpp.natmap.html#natmap_raw"><span class="id" title="abbreviation">natmap_raw</span></a> <a class="idref" href="stdpp.natmap.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="stdpp.natmap.html#natmap_raw"><span class="id" title="abbreviation">natmap_raw</span></a> <a class="idref" href="stdpp.natmap.html#B"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="stdpp.natmap.html#natmap_raw"><span class="id" title="abbreviation">natmap_raw</span></a> <a class="idref" href="stdpp.natmap.html#C"><span class="id" title="variable">C</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fix</span> <span class="id" title="var">go</span> <span class="id" title="var">l1</span> <span class="id" title="var">l2</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="stdpp.natmap.html#l1"><span class="id" title="variable">l1</span></a>, <a class="idref" href="stdpp.natmap.html#l2"><span class="id" title="variable">l2</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>, <span class="id" title="var">l2</span> =&gt; <a class="idref" href="stdpp.natmap.html#natmap_omap_raw"><span class="id" title="definition">natmap_omap_raw</span></a> (<a class="idref" href="stdpp.natmap.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">∘</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a>) <a class="idref" href="stdpp.natmap.html#l2"><span class="id" title="variable">l2</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="var">l1</span>, <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> =&gt; <a class="idref" href="stdpp.natmap.html#natmap_omap_raw"><span class="id" title="definition">natmap_omap_raw</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Program.Basics.html#flip"><span class="id" title="definition">flip</span></a> <a class="idref" href="stdpp.natmap.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="stdpp.base.html#e19728dcbe978af1a3e38759f2e5a8cc"><span class="id" title="notation">∘</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a>) <a class="idref" href="stdpp.natmap.html#l1"><span class="id" title="variable">l1</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="var">o1</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <span class="id" title="var">l1</span>, <span class="id" title="var">o2</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <span class="id" title="var">l2</span> =&gt; <a class="idref" href="stdpp.natmap.html#natmap_cons_canon"><span class="id" title="definition">natmap_cons_canon</span></a> (<a class="idref" href="stdpp.natmap.html#f"><span class="id" title="variable">f</span></a> <span class="id" title="var">o1</span> <span class="id" title="var">o2</span>) (<a class="idref" href="stdpp.natmap.html#go"><span class="id" title="variable">go</span></a> <a class="idref" href="stdpp.natmap.html#l1"><span class="id" title="variable">l1</span></a> <a class="idref" href="stdpp.natmap.html#l2"><span class="id" title="variable">l2</span></a>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Lemma</span> <a name="natmap_merge_wf"><span class="id" title="lemma">natmap_merge_wf</span></a> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>} (<span class="id" title="var">f</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="stdpp.natmap.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="stdpp.natmap.html#B"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="stdpp.natmap.html#C"><span class="id" title="variable">C</span></a>) <span class="id" title="var">l1</span> <span class="id" title="var">l2</span> :<br/>
&nbsp;&nbsp;<a class="idref" href="stdpp.natmap.html#natmap_wf"><span class="id" title="definition">natmap_wf</span></a> <a class="idref" href="stdpp.natmap.html#l1"><span class="id" title="variable">l1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="stdpp.natmap.html#natmap_wf"><span class="id" title="definition">natmap_wf</span></a> <a class="idref" href="stdpp.natmap.html#l2"><span class="id" title="variable">l2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="stdpp.natmap.html#natmap_wf"><span class="id" title="definition">natmap_wf</span></a> (<a class="idref" href="stdpp.natmap.html#natmap_merge_raw"><span class="id" title="definition">natmap_merge_raw</span></a> <a class="idref" href="stdpp.natmap.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="stdpp.natmap.html#l1"><span class="id" title="variable">l1</span></a> <a class="idref" href="stdpp.natmap.html#l2"><span class="id" title="variable">l2</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">l2</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">l1</span>; <span class="id" title="tactic">intros</span> [|??]; <span class="id" title="tactic">simpl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="stdpp.natmap.html#natmap_omap_raw_wf"><span class="id" title="lemma">natmap_omap_raw_wf</span></a>, <a class="idref" href="stdpp.natmap.html#natmap_cons_canon_wf"><span class="id" title="lemma">natmap_cons_canon_wf</span></a>, <a class="idref" href="stdpp.natmap.html#natmap_wf_inv"><span class="id" title="lemma">natmap_wf_inv</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Lemma</span> <a name="natmap_lookup_merge_raw"><span class="id" title="lemma">natmap_lookup_merge_raw</span></a> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>} (<span class="id" title="var">f</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="stdpp.natmap.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="stdpp.natmap.html#B"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="stdpp.natmap.html#C"><span class="id" title="variable">C</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">l1</span> <span class="id" title="var">l2</span> <span class="id" title="var">i</span> : <a class="idref" href="stdpp.natmap.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="stdpp.base.html#mjoin"><span class="id" title="definition">mjoin</span></a> (<a class="idref" href="stdpp.natmap.html#natmap_merge_raw"><span class="id" title="definition">natmap_merge_raw</span></a> <a class="idref" href="stdpp.natmap.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="stdpp.natmap.html#l1"><span class="id" title="variable">l1</span></a> <a class="idref" href="stdpp.natmap.html#l2"><span class="id" title="variable">l2</span></a> <a class="idref" href="stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="stdpp.natmap.html#i"><span class="id" title="variable">i</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="stdpp.natmap.html#f"><span class="id" title="variable">f</span></a> (<a class="idref" href="stdpp.base.html#mjoin"><span class="id" title="definition">mjoin</span></a> (<a class="idref" href="stdpp.natmap.html#l1"><span class="id" title="variable">l1</span></a> <a class="idref" href="stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="stdpp.natmap.html#i"><span class="id" title="variable">i</span></a>)) (<a class="idref" href="stdpp.base.html#mjoin"><span class="id" title="definition">mjoin</span></a> (<a class="idref" href="stdpp.natmap.html#l2"><span class="id" title="variable">l2</span></a> <a class="idref" href="stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="stdpp.natmap.html#i"><span class="id" title="variable">i</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">revert</span> <span class="id" title="var">i</span> <span class="id" title="var">l2</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">l1</span>; <span class="id" title="tactic">intros</span> [|?] [|??]; <span class="id" title="tactic">simpl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">autorewrite</span> <span class="id" title="keyword">with</span> <span class="id" title="var">natmap</span>; <span class="id" title="tactic">auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> |- <span class="id" title="keyword">context</span> [?<span class="id" title="var">o</span> <a class="idref" href="stdpp.base.html#1ec27ecb4da8da3d3cbd85a2394dc835"><span class="id" title="notation">≫=</span></a> <span class="id" title="var">_</span>] =&gt; <span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">o</span> <span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Instance</span> <a name="natmap_merge"><span class="id" title="instance">natmap_merge</span></a>: <a class="idref" href="stdpp.base.html#Merge"><span class="id" title="class">Merge</span></a> <a class="idref" href="stdpp.natmap.html#natmap"><span class="id" title="record">natmap</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">f</span> <span class="id" title="var">m1</span> <span class="id" title="var">m2</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<span class="id" title="var">l1</span>, <span class="id" title="var">Hl1</span>) := <a class="idref" href="stdpp.natmap.html#m1"><span class="id" title="variable">m1</span></a> <span class="id" title="tactic">in</span> <span class="id" title="keyword">let</span> (<span class="id" title="var">l2</span>, <span class="id" title="var">Hl2</span>) := <a class="idref" href="stdpp.natmap.html#m2"><span class="id" title="variable">m2</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="stdpp.natmap.html#NatMap"><span class="id" title="constructor">NatMap</span></a> (<a class="idref" href="stdpp.natmap.html#natmap_merge_raw"><span class="id" title="definition">natmap_merge_raw</span></a> <a class="idref" href="stdpp.natmap.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="stdpp.natmap.html#l1"><span class="id" title="variable">l1</span></a> <a class="idref" href="stdpp.natmap.html#l2"><span class="id" title="variable">l2</span></a>) (<a class="idref" href="stdpp.natmap.html#natmap_merge_wf"><span class="id" title="lemma">natmap_merge_wf</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="stdpp.natmap.html#Hl1"><span class="id" title="variable">Hl1</span></a> <a class="idref" href="stdpp.natmap.html#Hl2"><span class="id" title="variable">Hl2</span></a>).<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a name="natmap_to_list_raw"><span class="id" title="definition">natmap_to_list_raw</span></a> {<span class="id" title="var">A</span>} (<span class="id" title="var">i</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<span class="id" title="var">l</span> : <a class="idref" href="stdpp.natmap.html#natmap_raw"><span class="id" title="abbreviation">natmap_raw</span></a> <a class="idref" href="stdpp.natmap.html#A"><span class="id" title="variable">A</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="stdpp.natmap.html#A"><span class="id" title="variable">A</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="stdpp.natmap.html#l"><span class="id" title="variable">l</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <span class="id" title="var">l</span> =&gt; <a class="idref" href="stdpp.natmap.html#natmap_to_list_raw"><span class="id" title="definition">natmap_to_list_raw</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="stdpp.natmap.html#i"><span class="id" title="variable">i</span></a>) <a class="idref" href="stdpp.natmap.html#l"><span class="id" title="variable">l</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <span class="id" title="var">l</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="stdpp.natmap.html#i"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">x</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <a class="idref" href="stdpp.natmap.html#natmap_to_list_raw"><span class="id" title="definition">natmap_to_list_raw</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="stdpp.natmap.html#i"><span class="id" title="variable">i</span></a>) <a class="idref" href="stdpp.natmap.html#l"><span class="id" title="variable">l</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Lemma</span> <a name="natmap_elem_of_to_list_raw_aux"><span class="id" title="lemma">natmap_elem_of_to_list_raw_aux</span></a> {<span class="id" title="var">A</span>} <span class="id" title="var">j</span> (<span class="id" title="var">l</span> : <a class="idref" href="stdpp.natmap.html#natmap_raw"><span class="id" title="abbreviation">natmap_raw</span></a> <a class="idref" href="stdpp.natmap.html#A"><span class="id" title="variable">A</span></a>) <span class="id" title="var">i</span> <span class="id" title="var">x</span> :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="stdpp.natmap.html#i"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="stdpp.natmap.html#x"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="stdpp.natmap.html#natmap_to_list_raw"><span class="id" title="definition">natmap_to_list_raw</span></a> <a class="idref" href="stdpp.natmap.html#j"><span class="id" title="variable">j</span></a> <a class="idref" href="stdpp.natmap.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#d9d5c539a07c7350478e89358d1fe520"><span class="id" title="notation">↔</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <span class="id" title="var">i'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="stdpp.natmap.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="stdpp.natmap.html#i'"><span class="id" title="variable">i'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="stdpp.natmap.html#j"><span class="id" title="variable">j</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="stdpp.base.html#mjoin"><span class="id" title="definition">mjoin</span></a> (<a class="idref" href="stdpp.natmap.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="stdpp.natmap.html#i'"><span class="id" title="variable">i'</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="stdpp.natmap.html#x"><span class="id" title="variable">x</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">revert</span> <span class="id" title="var">j</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> [|[<span class="id" title="var">y</span>|] <span class="id" title="var">l</span> <span class="id" title="var">IH</span>]; <span class="id" title="tactic">intros</span> <span class="id" title="var">j</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="stdpp.list.html#elem_of_nil"><span class="id" title="lemma">elem_of_nil</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="stdpp.list.html#elem_of_cons"><span class="id" title="lemma">elem_of_cons</span></a>. <span class="id" title="tactic">intros</span> [?|?]; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">by</span> <span class="id" title="tactic">exists</span> 0.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">destruct</span> (<span class="id" title="var">IH</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">j</span>)) <span class="id" title="keyword">as</span> (<span class="id" title="var">i'</span>&amp;?&amp;?); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">i'</span>); <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">destruct</span> (<span class="id" title="var">IH</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">j</span>)) <span class="id" title="keyword">as</span> (<span class="id" title="var">i'</span>&amp;?&amp;?); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">i'</span>); <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> (<span class="id" title="var">i'</span>&amp;?&amp;<span class="id" title="var">Hi'</span>). <span class="id" title="tactic">subst</span>. <span class="id" title="var">revert</span> <span class="id" title="var">i'</span> <span class="id" title="var">j</span> <span class="id" title="var">Hi'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> [|[<span class="id" title="var">y</span>|] <span class="id" title="var">l</span> <span class="id" title="var">IH</span>]; <span class="id" title="tactic">intros</span> <span class="id" title="var">i</span> <span class="id" title="var">j</span> ?; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">i</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">i</span>]; <span class="id" title="var">simplify_eq</span>/=; [<span class="id" title="tactic">left</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">right</span>. <span class="id" title="tactic">rewrite</span> &lt;-<a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.add_succ_r"><span class="id" title="lemma">Nat.add_succ_r</span></a>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> (<span class="id" title="var">IH</span> <span class="id" title="var">i</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">j</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">i</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">i</span>]; <span class="id" title="var">simplify_eq</span>/=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;-<a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.add_succ_r"><span class="id" title="lemma">Nat.add_succ_r</span></a>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> (<span class="id" title="var">IH</span> <span class="id" title="var">i</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">j</span>)).<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Lemma</span> <a name="natmap_elem_of_to_list_raw"><span class="id" title="lemma">natmap_elem_of_to_list_raw</span></a> {<span class="id" title="var">A</span>} (<span class="id" title="var">l</span> : <a class="idref" href="stdpp.natmap.html#natmap_raw"><span class="id" title="abbreviation">natmap_raw</span></a> <a class="idref" href="stdpp.natmap.html#A"><span class="id" title="variable">A</span></a>) <span class="id" title="var">i</span> <span class="id" title="var">x</span> :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="stdpp.natmap.html#i"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="stdpp.natmap.html#x"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="stdpp.natmap.html#natmap_to_list_raw"><span class="id" title="definition">natmap_to_list_raw</span></a> 0 <a class="idref" href="stdpp.natmap.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#d9d5c539a07c7350478e89358d1fe520"><span class="id" title="notation">↔</span></a> <a class="idref" href="stdpp.base.html#mjoin"><span class="id" title="definition">mjoin</span></a> (<a class="idref" href="stdpp.natmap.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="stdpp.natmap.html#i"><span class="id" title="variable">i</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="stdpp.natmap.html#x"><span class="id" title="variable">x</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="stdpp.natmap.html#natmap_elem_of_to_list_raw_aux"><span class="id" title="lemma">natmap_elem_of_to_list_raw_aux</span></a>. <span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Numbers.Natural.Peano.NPeano.html#Nat.add_0_r"><span class="id" title="lemma">Nat.add_0_r</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">naive_solver</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Lemma</span> <a name="natmap_to_list_raw_nodup"><span class="id" title="lemma">natmap_to_list_raw_nodup</span></a> {<span class="id" title="var">A</span>} <span class="id" title="var">i</span> (<span class="id" title="var">l</span> : <a class="idref" href="stdpp.natmap.html#natmap_raw"><span class="id" title="abbreviation">natmap_raw</span></a> <a class="idref" href="stdpp.natmap.html#A"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="stdpp.base.html#NoDup"><span class="id" title="inductive">NoDup</span></a> (<a class="idref" href="stdpp.natmap.html#natmap_to_list_raw"><span class="id" title="definition">natmap_to_list_raw</span></a> <a class="idref" href="stdpp.natmap.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="stdpp.natmap.html#l"><span class="id" title="variable">l</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">i</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> [|[?|] ? <span class="id" title="var">IH</span>]; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="stdpp.natmap.html#natmap_elem_of_to_list_raw_aux"><span class="id" title="lemma">natmap_elem_of_to_list_raw_aux</span></a>. <span class="id" title="tactic">intros</span> (?&amp;?&amp;?). <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Instance</span> <a name="natmap_to_list"><span class="id" title="instance">natmap_to_list</span></a> {<span class="id" title="var">A</span>} : <a class="idref" href="stdpp.fin_maps.html#FinMapToList"><span class="id" title="class">FinMapToList</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="stdpp.natmap.html#A"><span class="id" title="variable">A</span></a> (<a class="idref" href="stdpp.natmap.html#natmap"><span class="id" title="record">natmap</span></a> <a class="idref" href="stdpp.natmap.html#A"><span class="id" title="variable">A</span></a>) := <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <span class="id" title="var">m</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<span class="id" title="var">l</span>,<span class="id" title="var">_</span>) := <a class="idref" href="stdpp.natmap.html#m"><span class="id" title="variable">m</span></a> <span class="id" title="tactic">in</span> <a class="idref" href="stdpp.natmap.html#natmap_to_list_raw"><span class="id" title="definition">natmap_to_list_raw</span></a> 0 <a class="idref" href="stdpp.natmap.html#l"><span class="id" title="variable">l</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="natmap_map_raw"><span class="id" title="definition">natmap_map_raw</span></a> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>} (<span class="id" title="var">f</span> : <a class="idref" href="stdpp.natmap.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="stdpp.natmap.html#B"><span class="id" title="variable">B</span></a>) : <a class="idref" href="stdpp.natmap.html#natmap_raw"><span class="id" title="abbreviation">natmap_raw</span></a> <a class="idref" href="stdpp.natmap.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="stdpp.natmap.html#natmap_raw"><span class="id" title="abbreviation">natmap_raw</span></a> <a class="idref" href="stdpp.natmap.html#B"><span class="id" title="variable">B</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="stdpp.base.html#fmap"><span class="id" title="definition">fmap</span></a> (<a class="idref" href="stdpp.base.html#fmap"><span class="id" title="definition">fmap</span></a> <a class="idref" href="stdpp.natmap.html#f"><span class="id" title="variable">f</span></a>).<br/>
<span class="id" title="keyword">Lemma</span> <a name="natmap_map_wf"><span class="id" title="lemma">natmap_map_wf</span></a> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>} (<span class="id" title="var">f</span> : <a class="idref" href="stdpp.natmap.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="stdpp.natmap.html#B"><span class="id" title="variable">B</span></a>) <span class="id" title="var">l</span> :<br/>
&nbsp;&nbsp;<a class="idref" href="stdpp.natmap.html#natmap_wf"><span class="id" title="definition">natmap_wf</span></a> <a class="idref" href="stdpp.natmap.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="stdpp.natmap.html#natmap_wf"><span class="id" title="definition">natmap_wf</span></a> (<a class="idref" href="stdpp.natmap.html#natmap_map_raw"><span class="id" title="definition">natmap_map_raw</span></a> <a class="idref" href="stdpp.natmap.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="stdpp.natmap.html#l"><span class="id" title="variable">l</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="stdpp.natmap.html#natmap_map_raw"><span class="id" title="definition">natmap_map_raw</span></a>, <a class="idref" href="stdpp.natmap.html#natmap_wf"><span class="id" title="definition">natmap_wf</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="stdpp.list.html#fmap_last"><span class="id" title="lemma">fmap_last</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="stdpp.list.html#last"><span class="id" title="definition">last</span></a> <span class="id" title="var">l</span>). <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="stdpp.option.html#fmap_is_Some"><span class="id" title="lemma">fmap_is_Some</span></a>. <span class="id" title="var">done</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Lemma</span> <a name="natmap_lookup_map_raw"><span class="id" title="lemma">natmap_lookup_map_raw</span></a> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>} (<span class="id" title="var">f</span> : <a class="idref" href="stdpp.natmap.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="stdpp.natmap.html#B"><span class="id" title="variable">B</span></a>) <span class="id" title="var">i</span> <span class="id" title="var">l</span> :<br/>
&nbsp;&nbsp;<a class="idref" href="stdpp.base.html#mjoin"><span class="id" title="definition">mjoin</span></a> (<a class="idref" href="stdpp.natmap.html#natmap_map_raw"><span class="id" title="definition">natmap_map_raw</span></a> <a class="idref" href="stdpp.natmap.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="stdpp.natmap.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="stdpp.natmap.html#i"><span class="id" title="variable">i</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="stdpp.natmap.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="stdpp.base.html#2eea06883886179dcc86cdc5a1870594"><span class="id" title="notation">&lt;$&gt;</span></a> <a class="idref" href="stdpp.base.html#mjoin"><span class="id" title="definition">mjoin</span></a> (<a class="idref" href="stdpp.natmap.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="stdpp.natmap.html#i"><span class="id" title="variable">i</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="stdpp.natmap.html#natmap_map_raw"><span class="id" title="definition">natmap_map_raw</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="stdpp.list.html#list_lookup_fmap"><span class="id" title="lemma">list_lookup_fmap</span></a>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> (<span class="id" title="var">l</span> <a class="idref" href="stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <span class="id" title="var">i</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Instance</span> <a name="natmap_map"><span class="id" title="instance">natmap_map</span></a>: <a class="idref" href="stdpp.base.html#FMap"><span class="id" title="class">FMap</span></a> <a class="idref" href="stdpp.natmap.html#natmap"><span class="id" title="record">natmap</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">f</span> <span class="id" title="var">m</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<span class="id" title="var">l</span>,<span class="id" title="var">Hl</span>) := <a class="idref" href="stdpp.natmap.html#m"><span class="id" title="variable">m</span></a> <span class="id" title="tactic">in</span> <a class="idref" href="stdpp.natmap.html#NatMap"><span class="id" title="constructor">NatMap</span></a> (<a class="idref" href="stdpp.natmap.html#natmap_map_raw"><span class="id" title="definition">natmap_map_raw</span></a> <a class="idref" href="stdpp.natmap.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="stdpp.natmap.html#l"><span class="id" title="variable">l</span></a>) (<a class="idref" href="stdpp.natmap.html#natmap_map_wf"><span class="id" title="lemma">natmap_map_wf</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="stdpp.natmap.html#Hl"><span class="id" title="variable">Hl</span></a>).<br/>

<br/>
<span class="id" title="keyword">Instance</span>: <a class="idref" href="stdpp.fin_maps.html#FinMap"><span class="id" title="class">FinMap</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="stdpp.natmap.html#natmap"><span class="id" title="record">natmap</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="stdpp.base.html#lookup"><span class="id" title="definition">lookup</span></a>, <a class="idref" href="stdpp.natmap.html#natmap_lookup"><span class="id" title="instance">natmap_lookup</span></a>. <span class="id" title="tactic">intros</span> <span class="id" title="var">A</span> [<span class="id" title="var">l1</span> <span class="id" title="var">Hl1</span>] [<span class="id" title="var">l2</span> <span class="id" title="var">Hl2</span>] <span class="id" title="var">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="stdpp.natmap.html#natmap_eq"><span class="id" title="lemma">natmap_eq</span></a>. <span class="id" title="var">revert</span> <span class="id" title="var">l2</span> <span class="id" title="var">Hl1</span> <span class="id" title="var">Hl2</span> <span class="id" title="var">E</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l1</span> <span class="id" title="keyword">as</span> [|[<span class="id" title="var">x</span>|] <span class="id" title="var">l1</span> <span class="id" title="var">IH</span>]; <span class="id" title="tactic">intros</span> [|[<span class="id" title="var">y</span>|] <span class="id" title="var">l2</span>] <span class="id" title="var">Hl1</span> <span class="id" title="var">Hl2</span> <span class="id" title="var">E</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">specialize</span> (<span class="id" title="var">E</span> 0).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<a class="idref" href="stdpp.natmap.html#natmap_wf_lookup"><span class="id" title="lemma">natmap_wf_lookup</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <span class="id" title="var">l2</span>)) <span class="id" title="keyword">as</span> (<span class="id" title="var">i</span>&amp;?&amp;?); <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">specialize</span> (<span class="id" title="var">E</span> 0).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">E</span> 0). <span class="id" title="tactic">apply</span> <span class="id" title="var">IH</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="stdpp.natmap.html#natmap_wf_inv"><span class="id" title="lemma">natmap_wf_inv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">i</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">E</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">i</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">specialize</span> (<span class="id" title="var">E</span> 0).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<a class="idref" href="stdpp.natmap.html#natmap_wf_lookup"><span class="id" title="lemma">natmap_wf_lookup</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <span class="id" title="var">l1</span>)) <span class="id" title="keyword">as</span> (<span class="id" title="var">i</span>&amp;?&amp;?); <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">specialize</span> (<span class="id" title="var">E</span> 0).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IH</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="stdpp.natmap.html#natmap_wf_inv"><span class="id" title="lemma">natmap_wf_inv</span></a>. <span class="id" title="tactic">intros</span> <span class="id" title="var">i</span>. <span class="id" title="tactic">apply</span> (<span class="id" title="var">E</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">i</span>)).<br/>
&nbsp;&nbsp;- <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> ?? [??] ?. <span class="id" title="tactic">apply</span> <a class="idref" href="stdpp.natmap.html#natmap_lookup_alter_raw"><span class="id" title="lemma">natmap_lookup_alter_raw</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> ?? [??] ??. <span class="id" title="tactic">apply</span> <a class="idref" href="stdpp.natmap.html#natmap_lookup_alter_raw_ne"><span class="id" title="lemma">natmap_lookup_alter_raw_ne</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> ??? [??] ?. <span class="id" title="tactic">apply</span> <a class="idref" href="stdpp.natmap.html#natmap_lookup_map_raw"><span class="id" title="lemma">natmap_lookup_map_raw</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> ? [??]. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="stdpp.natmap.html#natmap_to_list_raw_nodup"><span class="id" title="lemma">natmap_to_list_raw_nodup</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> ? [??] ??. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="stdpp.natmap.html#natmap_elem_of_to_list_raw"><span class="id" title="lemma">natmap_elem_of_to_list_raw</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> ??? [??] ?. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="stdpp.natmap.html#natmap_lookup_omap_raw"><span class="id" title="lemma">natmap_lookup_omap_raw</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> ????? [??] [??] ?. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="stdpp.natmap.html#natmap_lookup_merge_raw"><span class="id" title="lemma">natmap_lookup_merge_raw</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a name="strip_Nones"><span class="id" title="definition">strip_Nones</span></a> {<span class="id" title="var">A</span>} (<span class="id" title="var">l</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="stdpp.natmap.html#A"><span class="id" title="variable">A</span></a>)) : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="stdpp.natmap.html#A"><span class="id" title="variable">A</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="stdpp.natmap.html#l"><span class="id" title="variable">l</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <span class="id" title="var">l</span> =&gt; <a class="idref" href="stdpp.natmap.html#strip_Nones"><span class="id" title="definition">strip_Nones</span></a> <a class="idref" href="stdpp.natmap.html#l"><span class="id" title="variable">l</span></a> | <span class="id" title="var">_</span> =&gt; <a class="idref" href="stdpp.natmap.html#l"><span class="id" title="variable">l</span></a> <span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="list_to_natmap_wf"><span class="id" title="lemma">list_to_natmap_wf</span></a> {<span class="id" title="var">A</span>} (<span class="id" title="var">l</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="stdpp.natmap.html#A"><span class="id" title="variable">A</span></a>)) :<br/>
&nbsp;&nbsp;<a class="idref" href="stdpp.natmap.html#natmap_wf"><span class="id" title="definition">natmap_wf</span></a> (<a class="idref" href="stdpp.list.html#reverse"><span class="id" title="definition">reverse</span></a> (<a class="idref" href="stdpp.natmap.html#strip_Nones"><span class="id" title="definition">strip_Nones</span></a> (<a class="idref" href="stdpp.list.html#reverse"><span class="id" title="definition">reverse</span></a> <a class="idref" href="stdpp.natmap.html#l"><span class="id" title="variable">l</span></a>))).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="stdpp.natmap.html#natmap_wf"><span class="id" title="definition">natmap_wf</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="stdpp.list.html#last_reverse"><span class="id" title="lemma">last_reverse</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> (<a class="idref" href="stdpp.list.html#reverse"><span class="id" title="definition">reverse</span></a> <span class="id" title="var">l</span>) <span class="id" title="keyword">as</span> [|[]]; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Definition</span> <a name="list_to_natmap"><span class="id" title="definition">list_to_natmap</span></a> {<span class="id" title="var">A</span>} (<span class="id" title="var">l</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="stdpp.natmap.html#A"><span class="id" title="variable">A</span></a>)) : <a class="idref" href="stdpp.natmap.html#natmap"><span class="id" title="record">natmap</span></a> <a class="idref" href="stdpp.natmap.html#A"><span class="id" title="variable">A</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="stdpp.natmap.html#NatMap"><span class="id" title="constructor">NatMap</span></a> (<a class="idref" href="stdpp.list.html#reverse"><span class="id" title="definition">reverse</span></a> (<a class="idref" href="stdpp.natmap.html#strip_Nones"><span class="id" title="definition">strip_Nones</span></a> (<a class="idref" href="stdpp.list.html#reverse"><span class="id" title="definition">reverse</span></a> <a class="idref" href="stdpp.natmap.html#l"><span class="id" title="variable">l</span></a>))) (<a class="idref" href="stdpp.natmap.html#list_to_natmap_wf"><span class="id" title="lemma">list_to_natmap_wf</span></a> <a class="idref" href="stdpp.natmap.html#l"><span class="id" title="variable">l</span></a>).<br/>
<span class="id" title="keyword">Lemma</span> <a name="list_to_natmap_spec"><span class="id" title="lemma">list_to_natmap_spec</span></a> {<span class="id" title="var">A</span>} (<span class="id" title="var">l</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="stdpp.natmap.html#A"><span class="id" title="variable">A</span></a>)) <span class="id" title="var">i</span> :<br/>
&nbsp;&nbsp;<a class="idref" href="stdpp.natmap.html#list_to_natmap"><span class="id" title="definition">list_to_natmap</span></a> <a class="idref" href="stdpp.natmap.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="stdpp.natmap.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="stdpp.base.html#mjoin"><span class="id" title="definition">mjoin</span></a> (<a class="idref" href="stdpp.natmap.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="stdpp.natmap.html#i"><span class="id" title="variable">i</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="stdpp.base.html#lookup"><span class="id" title="definition">lookup</span></a> <span class="id" title="tactic">at</span> 1, <a class="idref" href="stdpp.natmap.html#natmap_lookup"><span class="id" title="instance">natmap_lookup</span></a>, <a class="idref" href="stdpp.natmap.html#list_to_natmap"><span class="id" title="definition">list_to_natmap</span></a>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;-(<a class="idref" href="stdpp.list.html#reverse_involutive"><span class="id" title="lemma">reverse_involutive</span></a> <span class="id" title="var">l</span>) <span class="id" title="tactic">at</span> 2. <span class="id" title="var">revert</span> <span class="id" title="var">i</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> (<a class="idref" href="stdpp.list.html#reverse"><span class="id" title="definition">reverse</span></a> <span class="id" title="var">l</span>) <span class="id" title="keyword">as</span> [|[<span class="id" title="var">x</span>|] <span class="id" title="var">l'</span> <span class="id" title="var">IH</span>]; <span class="id" title="tactic">intros</span> <span class="id" title="var">i</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="stdpp.list.html#reverse_cons"><span class="id" title="lemma">reverse_cons</span></a>, <span class="id" title="var">IH</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">IH</span>. <span class="id" title="var">revert</span> <span class="id" title="var">i</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> (<a class="idref" href="stdpp.list.html#reverse"><span class="id" title="definition">reverse</span></a> <span class="id" title="var">l'</span>); <span class="id" title="tactic">intros</span> [|?]; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Finally, we can construct sets of <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a></span>s satisfying extensional equality. 
</div>
<div class="code">
<span class="id" title="keyword">Notation</span> <a name="natset"><span class="id" title="abbreviation">natset</span></a> := (<a class="idref" href="stdpp.mapset.html#mapset"><span class="id" title="record">mapset</span></a> <a class="idref" href="stdpp.natmap.html#natmap"><span class="id" title="record">natmap</span></a>).<br/>
<span class="id" title="keyword">Instance</span> <a name="natmap_dom"><span class="id" title="instance">natmap_dom</span></a> {<span class="id" title="var">A</span>} : <a class="idref" href="stdpp.base.html#Dom"><span class="id" title="class">Dom</span></a> (<a class="idref" href="stdpp.natmap.html#natmap"><span class="id" title="record">natmap</span></a> <a class="idref" href="stdpp.natmap.html#A"><span class="id" title="variable">A</span></a>) <a class="idref" href="stdpp.natmap.html#natset"><span class="id" title="abbreviation">natset</span></a> := <a class="idref" href="stdpp.mapset.html#mapset_dom"><span class="id" title="instance">mapset_dom</span></a>.<br/>
<span class="id" title="keyword">Instance</span>: <a class="idref" href="stdpp.fin_map_dom.html#FinMapDom"><span class="id" title="class">FinMapDom</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="stdpp.natmap.html#natmap"><span class="id" title="record">natmap</span></a> <a class="idref" href="stdpp.natmap.html#natset"><span class="id" title="abbreviation">natset</span></a> := <a class="idref" href="stdpp.mapset.html#mapset_dom_spec"><span class="id" title="instance">mapset_dom_spec</span></a>.<br/>

<br/>
<span class="comment">(*&nbsp;Fixpoint&nbsp;avoids&nbsp;this&nbsp;definition&nbsp;from&nbsp;being&nbsp;unfolded&nbsp;*)</span><br/>
<span class="id" title="keyword">Fixpoint</span> <a name="bools_to_natset"><span class="id" title="definition">bools_to_natset</span></a> (<span class="id" title="var">βs</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>) : <a class="idref" href="stdpp.natmap.html#natset"><span class="id" title="abbreviation">natset</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">f</span> (<span class="id" title="var">β</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>) := <span class="id" title="keyword">if</span> <a class="idref" href="stdpp.natmap.html#dc5233cb1d950ecad15b1e9b2514f665"><span class="id" title="variable">β</span></a> <span class="id" title="keyword">then</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Program.Syntax.html#f5cb26d96fc0400fc3c881290947e554"><span class="id" title="notation">()</span></a> <span class="id" title="keyword">else</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="stdpp.mapset.html#Mapset"><span class="id" title="constructor">Mapset</span></a> <a class="idref" href="stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a> <a class="idref" href="stdpp.natmap.html#list_to_natmap"><span class="id" title="definition">list_to_natmap</span></a> <a class="idref" href="stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a> <a class="idref" href="stdpp.natmap.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="stdpp.base.html#2eea06883886179dcc86cdc5a1870594"><span class="id" title="notation">&lt;$&gt;</span></a> <a class="idref" href="stdpp.natmap.html#3733fe9c7e1c58f64d5198dad8aad412"><span class="id" title="variable">βs</span></a>.<br/>
<span class="id" title="keyword">Definition</span> <a name="natset_to_bools"><span class="id" title="definition">natset_to_bools</span></a> (<span class="id" title="var">sz</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<span class="id" title="var">X</span> : <a class="idref" href="stdpp.natmap.html#natset"><span class="id" title="abbreviation">natset</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">f</span> (<span class="id" title="var">mu</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Program.Syntax.html#fbbfb55f1ee0a61e0473fa0799e34e17"><span class="id" title="notation">()</span></a>) := <span class="id" title="keyword">match</span> <a class="idref" href="stdpp.natmap.html#mu"><span class="id" title="variable">mu</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> | <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="stdpp.list.html#resize"><span class="id" title="definition">resize</span></a> <a class="idref" href="stdpp.natmap.html#sz"><span class="id" title="variable">sz</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a> <a class="idref" href="stdpp.natmap.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="stdpp.base.html#2eea06883886179dcc86cdc5a1870594"><span class="id" title="notation">&lt;$&gt;</span></a> <a class="idref" href="stdpp.natmap.html#natmap_car"><span class="id" title="projection">natmap_car</span></a> (<a class="idref" href="stdpp.mapset.html#mapset_car"><span class="id" title="projection">mapset_car</span></a> <a class="idref" href="stdpp.natmap.html#X"><span class="id" title="variable">X</span></a>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="bools_to_natset_unfold"><span class="id" title="lemma">bools_to_natset_unfold</span></a> <span class="id" title="var">βs</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">f</span> (<span class="id" title="var">β</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>) := <span class="id" title="keyword">if</span> <a class="idref" href="stdpp.natmap.html#dc5233cb1d950ecad15b1e9b2514f665"><span class="id" title="variable">β</span></a> <span class="id" title="keyword">then</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Program.Syntax.html#f5cb26d96fc0400fc3c881290947e554"><span class="id" title="notation">()</span></a> <span class="id" title="keyword">else</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="stdpp.natmap.html#bools_to_natset"><span class="id" title="definition">bools_to_natset</span></a> <a class="idref" href="stdpp.natmap.html#3733fe9c7e1c58f64d5198dad8aad412"><span class="id" title="variable">βs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="stdpp.mapset.html#Mapset"><span class="id" title="constructor">Mapset</span></a> <a class="idref" href="stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a> <a class="idref" href="stdpp.natmap.html#list_to_natmap"><span class="id" title="definition">list_to_natmap</span></a> <a class="idref" href="stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a> <a class="idref" href="stdpp.natmap.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="stdpp.base.html#2eea06883886179dcc86cdc5a1870594"><span class="id" title="notation">&lt;$&gt;</span></a> <a class="idref" href="stdpp.natmap.html#3733fe9c7e1c58f64d5198dad8aad412"><span class="id" title="variable">βs</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">βs</span>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Lemma</span> <a name="elem_of_bools_to_natset"><span class="id" title="lemma">elem_of_bools_to_natset</span></a> <span class="id" title="var">βs</span> <span class="id" title="var">i</span> : <a class="idref" href="stdpp.natmap.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="stdpp.natmap.html#bools_to_natset"><span class="id" title="definition">bools_to_natset</span></a> <a class="idref" href="stdpp.natmap.html#3733fe9c7e1c58f64d5198dad8aad412"><span class="id" title="variable">βs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#d9d5c539a07c7350478e89358d1fe520"><span class="id" title="notation">↔</span></a> <a class="idref" href="stdpp.natmap.html#3733fe9c7e1c58f64d5198dad8aad412"><span class="id" title="variable">βs</span></a> <a class="idref" href="stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="stdpp.natmap.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="stdpp.natmap.html#bools_to_natset_unfold"><span class="id" title="lemma">bools_to_natset_unfold</span></a>; <span class="id" title="tactic">unfold</span> <a class="idref" href="stdpp.base.html#elem_of"><span class="id" title="definition">elem_of</span></a>, <a class="idref" href="stdpp.mapset.html#mapset_elem_of"><span class="id" title="instance">mapset_elem_of</span></a>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="stdpp.natmap.html#list_to_natmap_spec"><span class="id" title="lemma">list_to_natmap_spec</span></a>, <a class="idref" href="stdpp.list.html#list_lookup_fmap"><span class="id" title="lemma">list_lookup_fmap</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">βs</span> <a class="idref" href="stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <span class="id" title="var">i</span>) <span class="id" title="keyword">as</span> [[]|]; <span class="id" title="tactic">compute</span>; <span class="id" title="tactic">intuition</span> <span class="id" title="tactic">congruence</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Lemma</span> <a name="bools_to_natset_union"><span class="id" title="lemma">bools_to_natset_union</span></a> <span class="id" title="var">βs1</span> <span class="id" title="var">βs2</span> :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="stdpp.natmap.html#2995b442896c6ace56d96b5d4e1ad4ce"><span class="id" title="variable">βs1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="stdpp.natmap.html#7d6ea57151f0b84684cc7edfc501b457"><span class="id" title="variable">βs2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="stdpp.natmap.html#bools_to_natset"><span class="id" title="definition">bools_to_natset</span></a> (<a class="idref" href="stdpp.natmap.html#2995b442896c6ace56d96b5d4e1ad4ce"><span class="id" title="variable">βs1</span></a> <a class="idref" href="stdpp.base.html#9c89b9452e576c38349616457fa814e2"><span class="id" title="notation">||*</span></a> <a class="idref" href="stdpp.natmap.html#7d6ea57151f0b84684cc7edfc501b457"><span class="id" title="variable">βs2</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="stdpp.natmap.html#bools_to_natset"><span class="id" title="definition">bools_to_natset</span></a> <a class="idref" href="stdpp.natmap.html#2995b442896c6ace56d96b5d4e1ad4ce"><span class="id" title="variable">βs1</span></a> <a class="idref" href="stdpp.base.html#e8953ae2b2281f9c2fbbd0d5d6e30fd3"><span class="id" title="notation">∪</span></a> <a class="idref" href="stdpp.natmap.html#bools_to_natset"><span class="id" title="definition">bools_to_natset</span></a> <a class="idref" href="stdpp.natmap.html#7d6ea57151f0b84684cc7edfc501b457"><span class="id" title="variable">βs2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;-<a class="idref" href="stdpp.list.html#Forall2_same_length"><span class="id" title="lemma">Forall2_same_length</span></a>; <span class="id" title="tactic">intros</span> <span class="id" title="var">Hβs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="stdpp.sets.html#elem_of_equiv_L"><span class="id" title="lemma">elem_of_equiv_L</span></a>. <span class="id" title="tactic">intros</span> <span class="id" title="var">i</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="stdpp.base.html#elem_of_union"><span class="id" title="method">elem_of_union</span></a>, !<a class="idref" href="stdpp.natmap.html#elem_of_bools_to_natset"><span class="id" title="lemma">elem_of_bools_to_natset</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">i</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">Hβs</span> <span class="id" title="keyword">as</span> [|[] []]; <span class="id" title="tactic">intros</span> [|?]; <span class="id" title="var">naive_solver</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Lemma</span> <a name="natset_to_bools_length"><span class="id" title="lemma">natset_to_bools_length</span></a> (<span class="id" title="var">X</span> : <a class="idref" href="stdpp.natmap.html#natset"><span class="id" title="abbreviation">natset</span></a>) <span class="id" title="var">sz</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> (<a class="idref" href="stdpp.natmap.html#natset_to_bools"><span class="id" title="definition">natset_to_bools</span></a> <a class="idref" href="stdpp.natmap.html#sz"><span class="id" title="variable">sz</span></a> <a class="idref" href="stdpp.natmap.html#X"><span class="id" title="variable">X</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="stdpp.natmap.html#sz"><span class="id" title="variable">sz</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="stdpp.list.html#resize_length"><span class="id" title="lemma">resize_length</span></a>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Lemma</span> <a name="lookup_natset_to_bools_ge"><span class="id" title="lemma">lookup_natset_to_bools_ge</span></a> <span class="id" title="var">sz</span> <span class="id" title="var">X</span> <span class="id" title="var">i</span> : <a class="idref" href="stdpp.natmap.html#sz"><span class="id" title="variable">sz</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8.html#3ccab6e0e5cec5d8305913b11c2aa678"><span class="id" title="notation">≤</span></a> <a class="idref" href="stdpp.natmap.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="stdpp.natmap.html#natset_to_bools"><span class="id" title="definition">natset_to_bools</span></a> <a class="idref" href="stdpp.natmap.html#sz"><span class="id" title="variable">sz</span></a> <a class="idref" href="stdpp.natmap.html#X"><span class="id" title="variable">X</span></a> <a class="idref" href="stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="stdpp.natmap.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="stdpp.list.html#lookup_resize_old"><span class="id" title="lemma">lookup_resize_old</span></a>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Lemma</span> <a name="lookup_natset_to_bools"><span class="id" title="lemma">lookup_natset_to_bools</span></a> <span class="id" title="var">sz</span> <span class="id" title="var">X</span> <span class="id" title="var">i</span> <span class="id" title="var">β</span> :<br/>
&nbsp;&nbsp;<a class="idref" href="stdpp.natmap.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Peano.html#00fe0eaf5e6949f0a31725357afa4bba"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="stdpp.natmap.html#sz"><span class="id" title="variable">sz</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="stdpp.natmap.html#natset_to_bools"><span class="id" title="definition">natset_to_bools</span></a> <a class="idref" href="stdpp.natmap.html#sz"><span class="id" title="variable">sz</span></a> <a class="idref" href="stdpp.natmap.html#X"><span class="id" title="variable">X</span></a> <a class="idref" href="stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="stdpp.natmap.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="stdpp.natmap.html#dc5233cb1d950ecad15b1e9b2514f665"><span class="id" title="variable">β</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#d9d5c539a07c7350478e89358d1fe520"><span class="id" title="notation">↔</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#d9d5c539a07c7350478e89358d1fe520"><span class="id" title="notation">(</span></a><a class="idref" href="stdpp.natmap.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="stdpp.natmap.html#X"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#d9d5c539a07c7350478e89358d1fe520"><span class="id" title="notation">↔</span></a> <a class="idref" href="stdpp.natmap.html#dc5233cb1d950ecad15b1e9b2514f665"><span class="id" title="variable">β</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#d9d5c539a07c7350478e89358d1fe520"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="stdpp.natmap.html#natset_to_bools"><span class="id" title="definition">natset_to_bools</span></a>, <a class="idref" href="stdpp.base.html#elem_of"><span class="id" title="definition">elem_of</span></a>, <a class="idref" href="stdpp.mapset.html#mapset_elem_of"><span class="id" title="instance">mapset_elem_of</span></a>, <a class="idref" href="stdpp.base.html#lookup"><span class="id" title="definition">lookup</span></a> <span class="id" title="tactic">at</span> 2, <a class="idref" href="stdpp.natmap.html#natmap_lookup"><span class="id" title="instance">natmap_lookup</span></a>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="stdpp.mapset.html#mapset_car"><span class="id" title="projection">mapset_car</span></a> <span class="id" title="var">X</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">l</span> ?]; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">l</span> <a class="idref" href="stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <span class="id" title="var">i</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">mu</span>|] <span class="id" title="var">eqn</span>:<span class="id" title="var">Hmu</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <a class="idref" href="stdpp.list.html#lookup_resize"><span class="id" title="lemma">lookup_resize</span></a>, <a class="idref" href="stdpp.list.html#list_lookup_fmap"><span class="id" title="lemma">list_lookup_fmap</span></a>, <span class="id" title="var">Hmu</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">rewrite</span> ?<a class="idref" href="stdpp.list.html#fmap_length"><span class="id" title="lemma">fmap_length</span></a>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="stdpp.list.html#lookup_lt_Some"><span class="id" title="lemma">lookup_lt_Some</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">mu</span> <span class="id" title="keyword">as</span> [[]|], <span class="id" title="var">β</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intuition</span> <span class="id" title="tactic">congruence</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="stdpp.list.html#lookup_resize_new"><span class="id" title="lemma">lookup_resize_new</span></a> <span class="id" title="tactic">by</span> (<span class="id" title="tactic">rewrite</span> ?<a class="idref" href="stdpp.list.html#fmap_length"><span class="id" title="lemma">fmap_length</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="stdpp.list.html#lookup_ge_None_1"><span class="id" title="lemma">lookup_ge_None_1</span></a>); <span class="id" title="tactic">destruct</span> <span class="id" title="var">β</span>; <span class="id" title="tactic">intuition</span> <span class="id" title="tactic">congruence</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Lemma</span> <a name="lookup_natset_to_bools_true"><span class="id" title="lemma">lookup_natset_to_bools_true</span></a> <span class="id" title="var">sz</span> <span class="id" title="var">X</span> <span class="id" title="var">i</span> :<br/>
&nbsp;&nbsp;<a class="idref" href="stdpp.natmap.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Peano.html#00fe0eaf5e6949f0a31725357afa4bba"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="stdpp.natmap.html#sz"><span class="id" title="variable">sz</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="stdpp.natmap.html#natset_to_bools"><span class="id" title="definition">natset_to_bools</span></a> <a class="idref" href="stdpp.natmap.html#sz"><span class="id" title="variable">sz</span></a> <a class="idref" href="stdpp.natmap.html#X"><span class="id" title="variable">X</span></a> <a class="idref" href="stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="stdpp.natmap.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#d9d5c539a07c7350478e89358d1fe520"><span class="id" title="notation">↔</span></a> <a class="idref" href="stdpp.natmap.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <a class="idref" href="stdpp.natmap.html#X"><span class="id" title="variable">X</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="stdpp.natmap.html#lookup_natset_to_bools"><span class="id" title="lemma">lookup_natset_to_bools</span></a> <span class="id" title="tactic">by</span> <span class="id" title="var">done</span>. <span class="id" title="tactic">intuition</span>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Lemma</span> <a name="lookup_natset_to_bools_false"><span class="id" title="lemma">lookup_natset_to_bools_false</span></a> <span class="id" title="var">sz</span> <span class="id" title="var">X</span> <span class="id" title="var">i</span> :<br/>
&nbsp;&nbsp;<a class="idref" href="stdpp.natmap.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Peano.html#00fe0eaf5e6949f0a31725357afa4bba"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="stdpp.natmap.html#sz"><span class="id" title="variable">sz</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="stdpp.natmap.html#natset_to_bools"><span class="id" title="definition">natset_to_bools</span></a> <a class="idref" href="stdpp.natmap.html#sz"><span class="id" title="variable">sz</span></a> <a class="idref" href="stdpp.natmap.html#X"><span class="id" title="variable">X</span></a> <a class="idref" href="stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="stdpp.natmap.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#d9d5c539a07c7350478e89358d1fe520"><span class="id" title="notation">↔</span></a> <a class="idref" href="stdpp.natmap.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="stdpp.base.html#4291a6e02d5eff431051107aaf15194c"><span class="id" title="notation">∉</span></a> <a class="idref" href="stdpp.natmap.html#X"><span class="id" title="variable">X</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="stdpp.natmap.html#lookup_natset_to_bools"><span class="id" title="lemma">lookup_natset_to_bools</span></a> <span class="id" title="tactic">by</span> <span class="id" title="var">done</span>. <span class="id" title="var">naive_solver</span>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Lemma</span> <a name="natset_to_bools_union"><span class="id" title="lemma">natset_to_bools_union</span></a> <span class="id" title="var">sz</span> <span class="id" title="var">X1</span> <span class="id" title="var">X2</span> :<br/>
&nbsp;&nbsp;<a class="idref" href="stdpp.natmap.html#natset_to_bools"><span class="id" title="definition">natset_to_bools</span></a> <a class="idref" href="stdpp.natmap.html#sz"><span class="id" title="variable">sz</span></a> (<a class="idref" href="stdpp.natmap.html#X1"><span class="id" title="variable">X1</span></a> <a class="idref" href="stdpp.base.html#e8953ae2b2281f9c2fbbd0d5d6e30fd3"><span class="id" title="notation">∪</span></a> <a class="idref" href="stdpp.natmap.html#X2"><span class="id" title="variable">X2</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="stdpp.natmap.html#natset_to_bools"><span class="id" title="definition">natset_to_bools</span></a> <a class="idref" href="stdpp.natmap.html#sz"><span class="id" title="variable">sz</span></a> <a class="idref" href="stdpp.natmap.html#X1"><span class="id" title="variable">X1</span></a> <a class="idref" href="stdpp.base.html#9c89b9452e576c38349616457fa814e2"><span class="id" title="notation">||*</span></a> <a class="idref" href="stdpp.natmap.html#natset_to_bools"><span class="id" title="definition">natset_to_bools</span></a> <a class="idref" href="stdpp.natmap.html#sz"><span class="id" title="variable">sz</span></a> <a class="idref" href="stdpp.natmap.html#X2"><span class="id" title="variable">X2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="stdpp.list.html#list_eq"><span class="id" title="lemma">list_eq</span></a>; <span class="id" title="tactic">intros</span> <span class="id" title="var">i</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="stdpp.list.html#lookup_zip_with"><span class="id" title="lemma">lookup_zip_with</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="stdpp.base.html#decide"><span class="id" title="definition">decide</span></a> (<span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Peano.html#00fe0eaf5e6949f0a31725357afa4bba"><span class="id" title="notation">&lt;</span></a> <span class="id" title="var">sz</span>)); [|<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> !<a class="idref" href="stdpp.natmap.html#lookup_natset_to_bools_ge"><span class="id" title="lemma">lookup_natset_to_bools_ge</span></a> <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="stdpp.option.html#option_eq"><span class="id" title="lemma">option_eq</span></a>; <span class="id" title="tactic">intros</span> <span class="id" title="var">β</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="stdpp.natmap.html#lookup_natset_to_bools"><span class="id" title="lemma">lookup_natset_to_bools</span></a>, <a class="idref" href="stdpp.base.html#elem_of_union"><span class="id" title="method">elem_of_union</span></a> <span class="id" title="tactic">by</span> <span class="id" title="var">done</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="stdpp.base.html#decide"><span class="id" title="definition">decide</span></a> (<span class="id" title="var">i</span> <a class="idref" href="stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <span class="id" title="var">X1</span>)), (<a class="idref" href="stdpp.base.html#decide"><span class="id" title="definition">decide</span></a> (<span class="id" title="var">i</span> <a class="idref" href="stdpp.base.html#2a78afea1eeed082be084d2a55e1605c"><span class="id" title="notation">∈</span></a> <span class="id" title="var">X2</span>)); <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">first</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;[ <span class="id" title="tactic">rewrite</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <span class="id" title="var">X</span> <span class="id" title="var">H</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#proj2"><span class="id" title="lemma">proj2</span></a> (<a class="idref" href="stdpp.natmap.html#lookup_natset_to_bools_true"><span class="id" title="lemma">lookup_natset_to_bools_true</span></a> <span class="id" title="var">sz</span> <a class="idref" href="stdpp.natmap.html#X"><span class="id" title="variable">X</span></a> <span class="id" title="var">i</span> <a class="idref" href="stdpp.natmap.html#H"><span class="id" title="variable">H</span></a>)) <span class="id" title="tactic">by</span> <span class="id" title="var">done</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="tactic">rewrite</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <span class="id" title="var">X</span> <span class="id" title="var">H</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#proj2"><span class="id" title="lemma">proj2</span></a> (<a class="idref" href="stdpp.natmap.html#lookup_natset_to_bools_false"><span class="id" title="lemma">lookup_natset_to_bools_false</span></a> <span class="id" title="var">sz</span> <a class="idref" href="stdpp.natmap.html#X"><span class="id" title="variable">X</span></a> <span class="id" title="var">i</span> <a class="idref" href="stdpp.natmap.html#H"><span class="id" title="variable">H</span></a>)) <span class="id" title="tactic">by</span> <span class="id" title="var">done</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">β</span>; <span class="id" title="var">naive_solver</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Lemma</span> <a name="natset_to_bools_to_natset"><span class="id" title="lemma">natset_to_bools_to_natset</span></a> <span class="id" title="var">βs</span> <span class="id" title="var">sz</span> :<br/>
&nbsp;&nbsp;<a class="idref" href="stdpp.natmap.html#natset_to_bools"><span class="id" title="definition">natset_to_bools</span></a> <a class="idref" href="stdpp.natmap.html#sz"><span class="id" title="variable">sz</span></a> (<a class="idref" href="stdpp.natmap.html#bools_to_natset"><span class="id" title="definition">bools_to_natset</span></a> <a class="idref" href="stdpp.natmap.html#3733fe9c7e1c58f64d5198dad8aad412"><span class="id" title="variable">βs</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="stdpp.list.html#resize"><span class="id" title="definition">resize</span></a> <a class="idref" href="stdpp.natmap.html#sz"><span class="id" title="variable">sz</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="stdpp.natmap.html#3733fe9c7e1c58f64d5198dad8aad412"><span class="id" title="variable">βs</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="stdpp.list.html#list_eq"><span class="id" title="lemma">list_eq</span></a>; <span class="id" title="tactic">intros</span> <span class="id" title="var">i</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="stdpp.base.html#decide"><span class="id" title="definition">decide</span></a> (<span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Peano.html#00fe0eaf5e6949f0a31725357afa4bba"><span class="id" title="notation">&lt;</span></a> <span class="id" title="var">sz</span>));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[|<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="stdpp.natmap.html#lookup_natset_to_bools_ge"><span class="id" title="lemma">lookup_natset_to_bools_ge</span></a>, <a class="idref" href="stdpp.list.html#lookup_resize_old"><span class="id" title="lemma">lookup_resize_old</span></a> <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="stdpp.option.html#option_eq"><span class="id" title="lemma">option_eq</span></a>; <span class="id" title="tactic">intros</span> <span class="id" title="var">β</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="stdpp.natmap.html#lookup_natset_to_bools"><span class="id" title="lemma">lookup_natset_to_bools</span></a>, <a class="idref" href="stdpp.natmap.html#elem_of_bools_to_natset"><span class="id" title="lemma">elem_of_bools_to_natset</span></a> <span class="id" title="tactic">by</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="stdpp.base.html#decide"><span class="id" title="definition">decide</span></a> (<span class="id" title="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Peano.html#00fe0eaf5e6949f0a31725357afa4bba"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <span class="id" title="var">βs</span>)).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <a class="idref" href="stdpp.list.html#lookup_resize"><span class="id" title="lemma">lookup_resize</span></a> <span class="id" title="tactic">by</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="stdpp.list.html#lookup_lt_is_Some_2"><span class="id" title="lemma">lookup_lt_is_Some_2</span></a> <span class="id" title="var">βs</span> <span class="id" title="var">i</span>) <span class="id" title="keyword">as</span> [[]]; <span class="id" title="tactic">destruct</span> <span class="id" title="var">β</span>; <span class="id" title="var">naive_solver</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="stdpp.list.html#lookup_resize_new"><span class="id" title="lemma">lookup_resize_new</span></a>, <a class="idref" href="stdpp.list.html#lookup_ge_None_2"><span class="id" title="lemma">lookup_ge_None_2</span></a> <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">β</span>; <span class="id" title="var">naive_solver</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
A <span class="inlinecode"><a class="idref" href="stdpp.natmap.html#natmap"><span class="id" title="record">natmap</span></a></span> <span class="inlinecode"><a class="idref" href="stdpp.vector.html#A"><span class="id" title="variable">A</span></a></span> forms a stack with elements of type <span class="inlinecode"><a class="idref" href="stdpp.vector.html#A"><span class="id" title="variable">A</span></a></span> and possible holes 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a name="natmap_push"><span class="id" title="definition">natmap_push</span></a> {<span class="id" title="var">A</span>} (<span class="id" title="var">o</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="stdpp.natmap.html#A"><span class="id" title="variable">A</span></a>) (<span class="id" title="var">m</span> : <a class="idref" href="stdpp.natmap.html#natmap"><span class="id" title="record">natmap</span></a> <a class="idref" href="stdpp.natmap.html#A"><span class="id" title="variable">A</span></a>) : <a class="idref" href="stdpp.natmap.html#natmap"><span class="id" title="record">natmap</span></a> <a class="idref" href="stdpp.natmap.html#A"><span class="id" title="variable">A</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<span class="id" title="var">l</span>,<span class="id" title="var">Hl</span>) := <a class="idref" href="stdpp.natmap.html#m"><span class="id" title="variable">m</span></a> <span class="id" title="tactic">in</span> <a class="idref" href="stdpp.natmap.html#NatMap"><span class="id" title="constructor">NatMap</span></a> <span class="id" title="var">_</span> (<a class="idref" href="stdpp.natmap.html#natmap_cons_canon_wf"><span class="id" title="lemma">natmap_cons_canon_wf</span></a> <a class="idref" href="stdpp.natmap.html#o"><span class="id" title="variable">o</span></a> <a class="idref" href="stdpp.natmap.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="stdpp.natmap.html#Hl"><span class="id" title="variable">Hl</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="natmap_pop_raw"><span class="id" title="definition">natmap_pop_raw</span></a> {<span class="id" title="var">A</span>} (<span class="id" title="var">l</span> : <a class="idref" href="stdpp.natmap.html#natmap_raw"><span class="id" title="abbreviation">natmap_raw</span></a> <a class="idref" href="stdpp.natmap.html#A"><span class="id" title="variable">A</span></a>) : <a class="idref" href="stdpp.natmap.html#natmap_raw"><span class="id" title="abbreviation">natmap_raw</span></a> <a class="idref" href="stdpp.natmap.html#A"><span class="id" title="variable">A</span></a> := <a class="idref" href="stdpp.list.html#tail"><span class="id" title="abbreviation">tail</span></a> <a class="idref" href="stdpp.natmap.html#l"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Lemma</span> <a name="natmap_pop_wf"><span class="id" title="lemma">natmap_pop_wf</span></a> {<span class="id" title="var">A</span>} (<span class="id" title="var">l</span> : <a class="idref" href="stdpp.natmap.html#natmap_raw"><span class="id" title="abbreviation">natmap_raw</span></a> <a class="idref" href="stdpp.natmap.html#A"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="stdpp.natmap.html#natmap_wf"><span class="id" title="definition">natmap_wf</span></a> <a class="idref" href="stdpp.natmap.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="stdpp.natmap.html#natmap_wf"><span class="id" title="definition">natmap_wf</span></a> (<a class="idref" href="stdpp.natmap.html#natmap_pop_raw"><span class="id" title="definition">natmap_pop_raw</span></a> <a class="idref" href="stdpp.natmap.html#l"><span class="id" title="variable">l</span></a>).<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="stdpp.natmap.html#natmap_wf_inv"><span class="id" title="lemma">natmap_wf_inv</span></a>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Definition</span> <a name="natmap_pop"><span class="id" title="definition">natmap_pop</span></a> {<span class="id" title="var">A</span>} (<span class="id" title="var">m</span> : <a class="idref" href="stdpp.natmap.html#natmap"><span class="id" title="record">natmap</span></a> <a class="idref" href="stdpp.natmap.html#A"><span class="id" title="variable">A</span></a>) : <a class="idref" href="stdpp.natmap.html#natmap"><span class="id" title="record">natmap</span></a> <a class="idref" href="stdpp.natmap.html#A"><span class="id" title="variable">A</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<span class="id" title="var">l</span>,<span class="id" title="var">Hl</span>) := <a class="idref" href="stdpp.natmap.html#m"><span class="id" title="variable">m</span></a> <span class="id" title="tactic">in</span> <a class="idref" href="stdpp.natmap.html#NatMap"><span class="id" title="constructor">NatMap</span></a> <span class="id" title="var">_</span> (<a class="idref" href="stdpp.natmap.html#natmap_pop_wf"><span class="id" title="lemma">natmap_pop_wf</span></a> <span class="id" title="var">_</span> <a class="idref" href="stdpp.natmap.html#Hl"><span class="id" title="variable">Hl</span></a>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="lookup_natmap_push_O"><span class="id" title="lemma">lookup_natmap_push_O</span></a> {<span class="id" title="var">A</span>} <span class="id" title="var">o</span> (<span class="id" title="var">m</span> : <a class="idref" href="stdpp.natmap.html#natmap"><span class="id" title="record">natmap</span></a> <a class="idref" href="stdpp.natmap.html#A"><span class="id" title="variable">A</span></a>) : <a class="idref" href="stdpp.natmap.html#natmap_push"><span class="id" title="definition">natmap_push</span></a> <a class="idref" href="stdpp.natmap.html#o"><span class="id" title="variable">o</span></a> <a class="idref" href="stdpp.natmap.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> 0 <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="stdpp.natmap.html#o"><span class="id" title="variable">o</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">o</span>, <span class="id" title="var">m</span> <span class="id" title="keyword">as</span> [[|??]]. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Lemma</span> <a name="lookup_natmap_push_S"><span class="id" title="lemma">lookup_natmap_push_S</span></a> {<span class="id" title="var">A</span>} <span class="id" title="var">o</span> (<span class="id" title="var">m</span> : <a class="idref" href="stdpp.natmap.html#natmap"><span class="id" title="record">natmap</span></a> <a class="idref" href="stdpp.natmap.html#A"><span class="id" title="variable">A</span></a>) <span class="id" title="var">i</span> :<br/>
&nbsp;&nbsp;<a class="idref" href="stdpp.natmap.html#natmap_push"><span class="id" title="definition">natmap_push</span></a> <a class="idref" href="stdpp.natmap.html#o"><span class="id" title="variable">o</span></a> <a class="idref" href="stdpp.natmap.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="stdpp.natmap.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="stdpp.natmap.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="stdpp.natmap.html#i"><span class="id" title="variable">i</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">o</span>, <span class="id" title="var">m</span> <span class="id" title="keyword">as</span> [[|??]]. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Lemma</span> <a name="lookup_natmap_pop"><span class="id" title="lemma">lookup_natmap_pop</span></a> {<span class="id" title="var">A</span>} (<span class="id" title="var">m</span> : <a class="idref" href="stdpp.natmap.html#natmap"><span class="id" title="record">natmap</span></a> <a class="idref" href="stdpp.natmap.html#A"><span class="id" title="variable">A</span></a>) <span class="id" title="var">i</span> : <a class="idref" href="stdpp.natmap.html#natmap_pop"><span class="id" title="definition">natmap_pop</span></a> <a class="idref" href="stdpp.natmap.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="stdpp.natmap.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="stdpp.natmap.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="stdpp.natmap.html#i"><span class="id" title="variable">i</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">m</span> <span class="id" title="keyword">as</span> [[|??]]. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Lemma</span> <a name="natmap_push_pop"><span class="id" title="lemma">natmap_push_pop</span></a> {<span class="id" title="var">A</span>} (<span class="id" title="var">m</span> : <a class="idref" href="stdpp.natmap.html#natmap"><span class="id" title="record">natmap</span></a> <a class="idref" href="stdpp.natmap.html#A"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="stdpp.natmap.html#natmap_push"><span class="id" title="definition">natmap_push</span></a> (<a class="idref" href="stdpp.natmap.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> 0) (<a class="idref" href="stdpp.natmap.html#natmap_pop"><span class="id" title="definition">natmap_pop</span></a> <a class="idref" href="stdpp.natmap.html#m"><span class="id" title="variable">m</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="stdpp.natmap.html#m"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="stdpp.fin_maps.html#map_eq"><span class="id" title="method">map_eq</span></a>. <span class="id" title="tactic">intros</span> <span class="id" title="var">i</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">i</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="stdpp.natmap.html#lookup_natmap_push_O"><span class="id" title="lemma">lookup_natmap_push_O</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="stdpp.natmap.html#lookup_natmap_push_S"><span class="id" title="lemma">lookup_natmap_push_S</span></a>, <a class="idref" href="stdpp.natmap.html#lookup_natmap_pop"><span class="id" title="lemma">lookup_natmap_pop</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Lemma</span> <a name="natmap_pop_push"><span class="id" title="lemma">natmap_pop_push</span></a> {<span class="id" title="var">A</span>} <span class="id" title="var">o</span> (<span class="id" title="var">m</span> : <a class="idref" href="stdpp.natmap.html#natmap"><span class="id" title="record">natmap</span></a> <a class="idref" href="stdpp.natmap.html#A"><span class="id" title="variable">A</span></a>) : <a class="idref" href="stdpp.natmap.html#natmap_pop"><span class="id" title="definition">natmap_pop</span></a> (<a class="idref" href="stdpp.natmap.html#natmap_push"><span class="id" title="definition">natmap_push</span></a> <a class="idref" href="stdpp.natmap.html#o"><span class="id" title="variable">o</span></a> <a class="idref" href="stdpp.natmap.html#m"><span class="id" title="variable">m</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="stdpp.natmap.html#m"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="stdpp.natmap.html#natmap_eq"><span class="id" title="lemma">natmap_eq</span></a>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">o</span>, <span class="id" title="var">m</span> <span class="id" title="keyword">as</span> [[|??]]. <span class="id" title="keyword">Qed</span>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
